{
    "version": "https://jsonfeed.org/version/1",
    "title": "å¥½æš–å¥½æ¸©æš–çš„åšå®¢",
    "subtitle": "Do one thing and do it well.",
    "icon": "https://haoruanwn.github.io/assets/favicon.ico",
    "description": "ç”Ÿæ´»æœ‰å¤šç§å¯èƒ½æ€§",
    "home_page_url": "https://haoruanwn.github.io",
    "items": [
        {
            "id": "https://haoruanwn.github.io/2025/11/12/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE&%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/ADB%E5%B7%A5%E5%85%B7%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/",
            "url": "https://haoruanwn.github.io/2025/11/12/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE&%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/ADB%E5%B7%A5%E5%85%B7%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95/",
            "title": "ADBå·¥å…·åŸºç¡€ç”¨æ³•",
            "date_published": "2025-11-12T07:30:32.000Z",
            "content_html": "<h3 id=\"è®¾å¤‡ç®¡ç†-device-management\"><a class=\"anchor\" href=\"#è®¾å¤‡ç®¡ç†-device-management\">#</a> è®¾å¤‡ç®¡ç† (Device Management)</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å‘½ä»¤ (Command)</th>\n<th style=\"text-align:left\">åŠŸèƒ½è¯´æ˜ (Description)</th>\n<th style=\"text-align:left\">ç¤ºä¾‹ (Example)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>adb devices</code></td>\n<td style=\"text-align:left\">åˆ—å‡ºæ‰€æœ‰å·²è¿æ¥çš„è®¾å¤‡åŠå…¶çŠ¶æ€ã€‚</td>\n<td style=\"text-align:left\"><code>adb devices -l</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb root</code></td>\n<td style=\"text-align:left\">ä»¥ root æƒé™é‡å¯ <code>adbd</code> æœåŠ¡ï¼Œè·å–å®Œå…¨è®¿é—®æƒé™ã€‚</td>\n<td style=\"text-align:left\"><code>adb root</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb reboot</code></td>\n<td style=\"text-align:left\">é‡å¯å¼€å‘æ¿ã€‚</td>\n<td style=\"text-align:left\"><code>adb reboot</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb reboot bootloader</code></td>\n<td style=\"text-align:left\">é‡å¯åˆ° Bootloader æ¨¡å¼ã€‚</td>\n<td style=\"text-align:left\"><code>adb reboot bootloader</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb get-serialno</code></td>\n<td style=\"text-align:left\">è·å–è®¾å¤‡çš„åºåˆ—å·ã€‚</td>\n<td style=\"text-align:left\"><code>adb get-serialno</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb get-state</code></td>\n<td style=\"text-align:left\">è·å–è®¾å¤‡çŠ¶æ€ (<code>device</code>, <code>offline</code>, <code>bootloader</code>)ã€‚</td>\n<td style=\"text-align:left\"><code>adb get-state</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"æ–‡ä»¶ä¼ è¾“-file-transfer\"><a class=\"anchor\" href=\"#æ–‡ä»¶ä¼ è¾“-file-transfer\">#</a> æ–‡ä»¶ä¼ è¾“ (File Transfer)</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å‘½ä»¤ (Command)</th>\n<th style=\"text-align:left\">åŠŸèƒ½è¯´æ˜ (Description)</th>\n<th style=\"text-align:left\">ç¤ºä¾‹ (Example)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>adb push &lt;æœ¬åœ°&gt; &lt;è¿œç¨‹&gt;</code></td>\n<td style=\"text-align:left\">ä»ç”µè„‘å‘å¼€å‘æ¿æ¨é€æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚</td>\n<td style=\"text-align:left\"><code>adb push main /data/local/tmp/</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb pull &lt;è¿œç¨‹&gt; &lt;æœ¬åœ°&gt;</code></td>\n<td style=\"text-align:left\">ä»å¼€å‘æ¿å‘ç”µè„‘æ‹‰å–æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ã€‚</td>\n<td style=\"text-align:left\"><code>adb pull /data/anr/traces.txt .</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"åº”ç”¨ç®¡ç†-application-management-ä¸»è¦ç”¨äºandroid\"><a class=\"anchor\" href=\"#åº”ç”¨ç®¡ç†-application-management-ä¸»è¦ç”¨äºandroid\">#</a> åº”ç”¨ç®¡ç† (Application Management - ä¸»è¦ç”¨äºAndroid)</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å‘½ä»¤ (Command)</th>\n<th style=\"text-align:left\">åŠŸèƒ½è¯´æ˜ (Description)</th>\n<th style=\"text-align:left\">ç¤ºä¾‹ (Example)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>adb install &lt;apkè·¯å¾„&gt;</code></td>\n<td style=\"text-align:left\">å®‰è£…ä¸€ä¸ª APK åº”ç”¨ã€‚</td>\n<td style=\"text-align:left\"><code>adb install my_app.apk</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb uninstall &lt;åŒ…å&gt;</code></td>\n<td style=\"text-align:left\">å¸è½½ä¸€ä¸ªåº”ç”¨ã€‚</td>\n<td style=\"text-align:left\"><code>adb uninstall com.example.myapp</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb shell pm list packages</code></td>\n<td style=\"text-align:left\">åˆ—å‡ºè®¾å¤‡ä¸Šæ‰€æœ‰åº”ç”¨çš„åŒ…åã€‚</td>\n<td style=\"text-align:left\"><code>adb shell pm list packages \\| grep myapp</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"è¿œç¨‹-shell-ä¸è°ƒè¯•-remote-shell-debugging\"><a class=\"anchor\" href=\"#è¿œç¨‹-shell-ä¸è°ƒè¯•-remote-shell-debugging\">#</a> è¿œç¨‹ Shell ä¸è°ƒè¯• (Remote Shell &amp; Debugging)</h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">å‘½ä»¤ (Command)</th>\n<th style=\"text-align:left\">åŠŸèƒ½è¯´æ˜ (Description)</th>\n<th style=\"text-align:left\">ç¤ºä¾‹ (Example)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>adb shell</code></td>\n<td style=\"text-align:left\">è¿›å…¥å¼€å‘æ¿çš„äº¤äº’å¼ Shell ç¯å¢ƒã€‚</td>\n<td style=\"text-align:left\"><code>adb shell</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb shell &lt;å‘½ä»¤&gt;</code></td>\n<td style=\"text-align:left\">åœ¨å¼€å‘æ¿ä¸Šæ‰§è¡Œå•æ¡ Shell å‘½ä»¤ã€‚</td>\n<td style=\"text-align:left\"><code>adb shell &quot;ps -ef \\| grep main&quot;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb logcat</code></td>\n<td style=\"text-align:left\">æŸ¥çœ‹ Android ç³»ç»Ÿçš„å®æ—¶æ—¥å¿—ã€‚</td>\n<td style=\"text-align:left\"><code>adb logcat</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb bugreport</code></td>\n<td style=\"text-align:left\">ç”Ÿæˆä¸€ä»½åŒ…å«æ‰€æœ‰ç³»ç»Ÿä¿¡æ¯çš„å®Œæ•´ bug æŠ¥å‘Šã€‚</td>\n<td style=\"text-align:left\"><code>adb bugreport ./report.zip</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>adb forward</code></td>\n<td style=\"text-align:left\">ç«¯å£è½¬å‘ï¼Œå°†ä¸»æœºçš„ç«¯å£æ˜ å°„åˆ°å¼€å‘æ¿çš„ç«¯å£ã€‚</td>\n<td style=\"text-align:left\"><code>adb forward tcp:8080 tcp:80</code></td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "ç¯å¢ƒé…ç½®&å·¥å…·ä½¿ç”¨",
                "ADB"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/12/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE&%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/NetWorkManager/",
            "url": "https://haoruanwn.github.io/2025/11/12/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE&%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/NetWorkManager/",
            "title": "NetWorkManager",
            "date_published": "2025-11-12T07:30:16.000Z",
            "content_html": "<h1 id=\"ä½¿ç”¨-nmcli-ç®¡ç†ç½‘ç»œè¿æ¥\"><a class=\"anchor\" href=\"#ä½¿ç”¨-nmcli-ç®¡ç†ç½‘ç»œè¿æ¥\">#</a> ä½¿ç”¨ <code>nmcli</code> ç®¡ç†ç½‘ç»œè¿æ¥</h1>\n<p><code>nmcli</code> æ˜¯ NetworkManager çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯ï¼Œæ˜¯åœ¨ç°ä»£ Linux å‘è¡Œç‰ˆï¼ˆå¦‚ Debianã€Ubuntuã€CentOSï¼‰ä¸­ç®¡ç†ç½‘ç»œè¿æ¥çš„å¼ºå¤§å·¥å…·ã€‚</p>\n<h2 id=\"ä¸€-åŸºç¡€æŸ¥çœ‹å‘½ä»¤\"><a class=\"anchor\" href=\"#ä¸€-åŸºç¡€æŸ¥çœ‹å‘½ä»¤\">#</a> ä¸€ã€åŸºç¡€æŸ¥çœ‹å‘½ä»¤</h2>\n<h3 id=\"1-æŸ¥çœ‹ç½‘ç»œè®¾å¤‡\"><a class=\"anchor\" href=\"#1-æŸ¥çœ‹ç½‘ç»œè®¾å¤‡\">#</a> 1. æŸ¥çœ‹ç½‘ç»œè®¾å¤‡</h3>\n<p>ä½¿ç”¨ <code>nmcli device</code> (æˆ– <code>nmcli device status</code>) æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰ç½‘ç»œè®¾å¤‡åŠå…¶çŠ¶æ€ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">â¯</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">DEVICE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           TYPE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      STATE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">         CONNECTION</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">wlp2s0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      å·²è¿æ¥</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        è™šç©ºç»ˆç«¯</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">tailscale0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">       tun</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">       è¿æ¥ï¼ˆå¤–éƒ¨ï¼‰</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  tailscale0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">          bridge</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    è¿æ¥ï¼ˆå¤–éƒ¨ï¼‰</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  docker0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">         </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">lo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">               loopback</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  è¿æ¥ï¼ˆå¤–éƒ¨ï¼‰</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  lo</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">              </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">br-2dd69cafb18b</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  bridge</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    è¿æ¥ï¼ˆå¤–éƒ¨ï¼‰</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  br-2dd69cafb18b</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">enp6s0f3u2u4</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     ethernet</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  å·²æ–­å¼€</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">        --</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">              </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">p2p-dev-wlp2s0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   wifi-p2p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  å·²æ–­å¼€</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">        --</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">   </span></span></code></pre>\n<h3 id=\"2-æŸ¥çœ‹æ‰€æœ‰è¿æ¥é…ç½®\"><a class=\"anchor\" href=\"#2-æŸ¥çœ‹æ‰€æœ‰è¿æ¥é…ç½®\">#</a> 2. æŸ¥çœ‹æ‰€æœ‰è¿æ¥é…ç½®</h3>\n<p>ä½¿ç”¨ <code>nmcli connection show</code> åˆ—å‡ºæ‰€æœ‰å·²ä¿å­˜çš„ç½‘ç»œè¿æ¥é…ç½®ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">hao@archlinux </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">~</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">$ nmcli connection show</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">NAME</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        UUID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">                                  TYPE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      DEVICE</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">     </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">æœ‰çº¿è¿æ¥</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  605f8e47-9a35-3183-80af-447a18307c8b</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  ethernet</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  enp2s0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Kwrt_5G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     536344bf-a2df-41cf-9dfe-f71ca37fe4d7</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      wlan0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">     </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">tailscale0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  a8ebcfa3-e44d-472c-9ead-65fc154d2bb7</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  tun</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">       tailscale0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">...</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">N100-Setup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  a655b45d-1c87-468f-8a14-914534aa6c63</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  wifi</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">      --</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">         </span></span></code></pre>\n<h3 id=\"3-æŸ¥çœ‹è¿æ¥çš„è‡ªåŠ¨è¿æ¥çŠ¶æ€\"><a class=\"anchor\" href=\"#3-æŸ¥çœ‹è¿æ¥çš„è‡ªåŠ¨è¿æ¥çŠ¶æ€\">#</a> 3. æŸ¥çœ‹è¿æ¥çš„è‡ªåŠ¨è¿æ¥çŠ¶æ€</h3>\n<p>å¯ä»¥-fæŒ‡å®šå­—æ®µï¼ŒæŸ¥çœ‹æ›´è¯¦ç»†çš„è‡ªå¯é…ç½®ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">hao@archlinux </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">~</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">$ nmcli -f NAME,TYPE,AUTOCONNECT,AUTOCONNECT-PRIORITY connection show</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">NAME</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           TYPE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      AUTOCONNECT</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  AUTOCONNECT-PRIORITY</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">æœ‰çº¿è¿æ¥</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     ethernet</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  æ˜¯</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">           -999</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                 </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Kwrt_5G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      æ˜¯</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">           0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">tailscale0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     tun</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">       æ˜¯</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">           0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">lo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">             loopback</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  æ˜¯</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">           0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Hotspot</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">        wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      å¦</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">           0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">N100-Setup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      å¦</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">           0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">                    </span></span></code></pre>\n<h2 id=\"äºŒ-wifi-é…ç½®\"><a class=\"anchor\" href=\"#äºŒ-wifi-é…ç½®\">#</a> äºŒã€WiFi é…ç½®</h2>\n<h3 id=\"1-æ‰«æ-wifi-ç½‘ç»œ\"><a class=\"anchor\" href=\"#1-æ‰«æ-wifi-ç½‘ç»œ\">#</a> 1. æ‰«æ WiFi ç½‘ç»œ</h3>\n<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰«æå¹¶åˆ—å‡ºå‘¨å›´å¯ç”¨çš„ WiFi ç½‘ç»œã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">hao@archlinux </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">~</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">$ nmcli dev wifi list</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">IN-USE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  BSSID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">              SSID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">                MODE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">   CHAN</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  RATE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">         SIGNAL</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  BARS</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  SECURITY</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        80:AF:CA:C9:50:B3</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  Kwrt_2.4G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">           Infra</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  1</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">     130</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Mbit/s</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   100</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">     â–‚â–„â–†â–ˆ</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  WPA2</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> WPA3</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> 82:AF:CA:C9:50:B4  Kwrt_5G             Infra  36    1170 Mbit/s  99      â–‚â–„â–†â–ˆ  WPA2 WPA3 </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        4C:C6:4C:BE:77:10</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  Xiaomi_770F</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">         Infra</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">  11</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">    270</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Mbit/s</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">   79</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">      â–‚â–„â–†_</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  WPA1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> WPA2</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">...</span></span></code></pre>\n<h3 id=\"2-è¿æ¥-æ–­å¼€ä¸åˆ é™¤-wifi\"><a class=\"anchor\" href=\"#2-è¿æ¥-æ–­å¼€ä¸åˆ é™¤-wifi\">#</a> 2. è¿æ¥ã€æ–­å¼€ä¸åˆ é™¤ WiFi</h3>\n<h4 id=\"è¿æ¥åˆ°-wifi\"><a class=\"anchor\" href=\"#è¿æ¥åˆ°-wifi\">#</a> è¿æ¥åˆ° WiFi</h4>\n<p>ä½¿ç”¨ <code>connect</code> å‘½ä»¤è¿æ¥åˆ°æŒ‡å®šçš„ WiFi ç½‘ç»œ (SSID)ã€‚è¿æ¥æˆåŠŸåï¼ŒNetworkManager ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåŒåçš„è¿æ¥é…ç½®æ–‡ä»¶ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ ¼å¼: sudo nmcli device wifi connect &#x3C;SSID> password &#x3C;å¯†ç ></span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Kwrt_5G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> password</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 20542054</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connect</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 503</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> password</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 503503503</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> è™šç©ºç»ˆç«¯</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> password</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 503503503</span></span></code></pre>\n<h4 id=\"è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨è¿æ¥\"><a class=\"anchor\" href=\"#è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨è¿æ¥\">#</a> è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨è¿æ¥</h4>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°è¿æ¥ä¼šè‡ªåŠ¨è®¾ä¸ºè‡ªåŠ¨è¿æ¥ã€‚å¦‚æœéœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ ¼å¼: sudo nmcli connection modify &#x3C;è¿æ¥åç§°> connection.autoconnect yes</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Kwrt_5G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection.autoconnect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> yes</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 503</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection.autoconnect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> yes</span></span></code></pre>\n<h4 id=\"æ–­å¼€è¿æ¥\"><a class=\"anchor\" href=\"#æ–­å¼€è¿æ¥\">#</a> æ–­å¼€è¿æ¥</h4>\n<p>å¯ä»¥æ–­å¼€æŒ‡å®šç½‘å¡ï¼ˆ<code>device disconnect</code>ï¼‰æˆ–æ–­å¼€æŸä¸ªè¿æ¥é…ç½®ï¼ˆ<code>connection down</code>ï¼‰ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ–¹å¼ä¸€ï¼šæ–­å¼€æŒ‡å®šè¿æ¥é…ç½®</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> down</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Kwrt_5G</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ–¹å¼äºŒï¼šæ–­å¼€æŒ‡å®šç½‘å¡</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> disconnect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wlan0</span></span></code></pre>\n<h4 id=\"åˆ é™¤é…ç½®\"><a class=\"anchor\" href=\"#åˆ é™¤é…ç½®\">#</a> åˆ é™¤é…ç½®</h4>\n<p>æ°¸ä¹…åˆ é™¤ï¼ˆé—å¿˜ï¼‰æŒ‡å®šåç§°çš„è¿æ¥é…ç½®æ–‡ä»¶ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ ¼å¼: sudo nmcli connection delete &#x3C;è¿æ¥åç§°></span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> delete</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Kwrt_5G</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> delete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> è™šç©ºç»ˆç«¯</span></span></code></pre>\n<h2 id=\"ä¸‰-æœ‰çº¿è¿æ¥\"><a class=\"anchor\" href=\"#ä¸‰-æœ‰çº¿è¿æ¥\">#</a> ä¸‰ã€æœ‰çº¿è¿æ¥</h2>\n<p>å¯¹äºæœ‰çº¿è¿æ¥ï¼Œå¦‚æœç½‘å¡å·²æ’å…¥ç½‘çº¿ï¼Œå¯ä»¥ç›´æ¥ <code>connect</code> è®¾å¤‡åã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ¿€æ´»åä¸º enp6s0f3u2u4 çš„æœ‰çº¿ç½‘å¡</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> enp6s0f3u2u4</span></span></code></pre>\n<h2 id=\"å››-è®¾ç½®é™æ€-ip-åœ°å€\"><a class=\"anchor\" href=\"#å››-è®¾ç½®é™æ€-ip-åœ°å€\">#</a> å››ã€è®¾ç½®é™æ€ IP åœ°å€</h2>\n<p>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆå¦‚å°†è®¾å¤‡ç”¨ä½œæœåŠ¡å™¨æˆ–é€šè¿‡æ—è·¯ç”±ä¸Šç½‘ï¼‰ï¼Œéœ€è¦å°†åŠ¨æ€ IP (DHCP) ä¿®æ”¹ä¸ºé™æ€ IPã€‚</p>\n<h3 id=\"1-ç¡®å®šè¦ä¿®æ”¹çš„è¿æ¥\"><a class=\"anchor\" href=\"#1-ç¡®å®šè¦ä¿®æ”¹çš„è¿æ¥\">#</a> 1. ç¡®å®šè¦ä¿®æ”¹çš„è¿æ¥</h3>\n<p>é¦–å…ˆï¼Œä½¿ç”¨ <code>nmcli connection show</code> æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„è¿æ¥é…ç½®çš„åç§° (<code>NAME</code>)ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> show</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># NAME                UUID                                  TYPE      DEVICE </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 503                 82cbca27-7035-420a-96c0-f54aef5c5f83  wifi      wlan0  </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æœ‰çº¿è¿æ¥ 1          xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx  ethernet  enp2s0</span></span></code></pre>\n<h3 id=\"2-ä¿®æ”¹è¿æ¥ä¸ºé™æ€-ip\"><a class=\"anchor\" href=\"#2-ä¿®æ”¹è¿æ¥ä¸ºé™æ€-ip\">#</a> 2. ä¿®æ”¹è¿æ¥ä¸ºé™æ€ IP</h3>\n<p>ä½¿ç”¨ <code>nmcli connection modify</code> å‘½ä»¤ä¿®æ”¹æŒ‡å®šè¿æ¥çš„ç½‘ç»œå‚æ•°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¯­æ³•ç¤ºä¾‹</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">&#x3C;è¿æ¥åç§°></span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.method</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> manual</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.addresses</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">IPåœ°</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">å€</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">/</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">å­ç½‘æ©ç å‰</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ç¼€</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.gateway</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ç½‘å…³åœ°</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">å€</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.dns</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">&#x3C;DNSæœåŠ¡å™¨1>,&#x3C;DNSæœåŠ¡å™¨2></span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¤ºä¾‹ï¼šå°†åä¸º \"503\" çš„ WiFi è¿æ¥ä¿®æ”¹ä¸ºé™æ€IP</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">503</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.method</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> manual</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.addresses</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 192.168.31.152/24</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.gateway</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 192.168.31.141</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.dns</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">223.5.5.5,114.114.114.114</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¤ºä¾‹ï¼šå°†åä¸º \"æœ‰çº¿è¿æ¥ 1\" çš„æœ‰çº¿è¿æ¥ä¿®æ”¹ä¸ºé™æ€IP</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æœ‰çº¿è¿æ¥ 1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.method</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> manual</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.addresses</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 192.168.31.68/24</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.gateway</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 192.168.31.141</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.dns</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">223.5.5.5,114.114.114.114</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"><strong>å‚æ•°</strong></th>\n<th style=\"text-align:left\"><strong>è¯´æ˜</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>ipv4.method</code></td>\n<td style=\"text-align:left\"><code>manual</code> è¡¨ç¤ºé™æ€ IPï¼Œ<code>auto</code> è¡¨ç¤º DHCPã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>ipv4.addresses</code></td>\n<td style=\"text-align:left\">è®¾ç½®é™æ€ IP åœ°å€å’Œå­ç½‘æ©ç ï¼ˆä½¿ç”¨ CIDR è¡¨ç¤ºæ³•ï¼‰ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>ipv4.gateway</code></td>\n<td style=\"text-align:left\">è®¾ç½®é»˜è®¤ç½‘å…³åœ°å€ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>ipv4.dns</code></td>\n<td style=\"text-align:left\">è®¾ç½® DNS æœåŠ¡å™¨ï¼Œå¤šä¸ªæœåŠ¡å™¨ç”¨é€—å·åˆ†éš”ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"3-åº”ç”¨æ›´æ”¹\"><a class=\"anchor\" href=\"#3-åº”ç”¨æ›´æ”¹\">#</a> 3. åº”ç”¨æ›´æ”¹</h3>\n<p>ä¿®æ”¹é…ç½®åï¼Œéœ€è¦é‡æ–°æ¿€æ´»è¿æ¥ä»¥ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> down</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">503</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> up</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">503</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> down</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æœ‰çº¿è¿æ¥ 1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> &#x26;&#x26;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> up</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æœ‰çº¿è¿æ¥ 1</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<h3 id=\"4-æ¢å¤ä¸º-dhcp\"><a class=\"anchor\" href=\"#4-æ¢å¤ä¸º-dhcp\">#</a> 4. æ¢å¤ä¸º DHCP</h3>\n<p>å¦‚æœéœ€è¦ä»é™æ€ IP åˆ‡æ¢å›åŠ¨æ€ IP (DHCP)ï¼Œåªéœ€å°† <code>ipv4.method</code> ä¿®æ”¹ä¸º <code>auto</code> å¹¶æ¸…ç©ºé™æ€é…ç½®å³å¯ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">503</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ipv4.method</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> auto</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ¸…ç©ºé™æ€é…ç½®ï¼ˆå¯é€‰ä½†æ¨èï¼‰</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">503</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ipv4.addresses</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ipv4.gateway</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ipv4.dns</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é‡å¯è¿æ¥</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> up</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">503</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<h2 id=\"äº”-ç½‘ç»œæµ‹è¯•\"><a class=\"anchor\" href=\"#äº”-ç½‘ç»œæµ‹è¯•\">#</a> äº”ã€ç½‘ç»œæµ‹è¯•</h2>\n<p>é…ç½®å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·æµ‹è¯•ç½‘ç»œè¿é€šæ€§ã€‚</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"><strong>å‘½ä»¤</strong></th>\n<th style=\"text-align:left\"><strong>ç”¨é€”</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>ping</code></td>\n<td style=\"text-align:left\">æµ‹è¯•ä¸ç›®æ ‡ä¸»æœºï¼ˆIPæˆ–åŸŸåï¼‰çš„åŸºæœ¬è¿é€šæ€§å’Œå»¶è¿Ÿã€‚ <code>ping 8.8.8.8</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>ip addr</code></td>\n<td style=\"text-align:left\">æŸ¥çœ‹ç½‘ç»œæ¥å£çš„ IP åœ°å€ã€MAC åœ°å€ç­‰è¯¦ç»†ä¿¡æ¯ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>iwconfig</code></td>\n<td style=\"text-align:left\">ï¼ˆæ—§å·¥å…·ï¼‰æŸ¥çœ‹æ— çº¿ç½‘å¡çš„è¿æ¥çŠ¶æ€ï¼Œå¦‚ SSIDã€ä¿¡å·å¼ºåº¦ (Link Quality)ã€æ¯”ç‰¹ç‡ (Bit Rate) ç­‰ã€‚</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "ç¯å¢ƒé…ç½®&å·¥å…·ä½¿ç”¨",
                "ç½‘ç»œ"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/12/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE&%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Tmux%E7%BB%88%E7%AB%AF%E5%A4%8D%E7%94%A8%E5%B7%A5%E5%85%B7/",
            "url": "https://haoruanwn.github.io/2025/11/12/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE&%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Tmux%E7%BB%88%E7%AB%AF%E5%A4%8D%E7%94%A8%E5%B7%A5%E5%85%B7/",
            "title": "Tmuxç»ˆç«¯å¤ç”¨å·¥å…·",
            "date_published": "2025-11-12T07:30:04.000Z",
            "content_html": "<p><strong><code>tmux</code> (Terminal Multiplexer)</strong> æ˜¯ä¸€ç§ç»ˆç«¯å¤ç”¨å™¨ã€‚å®ƒå¯ä»¥è®©ä½ ï¼š</p>\n<ol>\n<li>åœ¨ä¸€ä¸ªç»ˆç«¯çª—å£ä¸­åˆ›å»º<strong>å¤šä¸ªè™šæ‹Ÿç»ˆç«¯ä¼šè¯ï¼ˆSessionï¼‰</strong>ã€‚</li>\n<li>å³ä½¿ SSH è¿æ¥ä¸­æ–­ã€ç›´æ¥å…³æ‰ç»ˆç«¯ï¼Œ<strong>æœåŠ¡å™¨ä¸Šçš„ <code>tmux</code> ä¼šè¯åŠå…¶ä¸­è¿è¡Œçš„ç¨‹åºï¼ˆå¦‚ç¼–è¯‘ã€ä¸‹è½½ã€æœåŠ¡ï¼‰ä¹Ÿä¼šç»§ç»­è¿è¡Œ</strong>ã€‚</li>\n<li>å¯ä»¥éšæ—¶ä»ä»»ä½•è®¾å¤‡<strong>é‡æ–°è¿æ¥ï¼ˆAttachï¼‰</strong> åˆ°è¿™ä¸ªä¼šè¯ã€‚</li>\n</ol>\n<h3 id=\"tmux-åŸºç¡€å‘½ä»¤å’Œä½¿ç”¨æ–¹å¼\"><a class=\"anchor\" href=\"#tmux-åŸºç¡€å‘½ä»¤å’Œä½¿ç”¨æ–¹å¼\">#</a> ğŸš€ <code>tmux</code> åŸºç¡€å‘½ä»¤å’Œä½¿ç”¨æ–¹å¼</h3>\n<table>\n<thead>\n<tr>\n<th><strong>æ¦‚å¿µ</strong></th>\n<th><strong>åœºæ™¯</strong></th>\n<th><strong>å‘½ä»¤ (åœ¨ Shell ä¸­è¾“å…¥)</strong></th>\n<th><strong>å¿«æ·é”® (åœ¨ tmux å†…éƒ¨æ“ä½œ)</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>åˆ›å»º</strong></td>\n<td>å¼€å¯ä¸€ä¸ªæ–°çš„ä¼šè¯ã€‚</td>\n<td><code>tmux new -s &lt;ä¼šè¯å&gt;</code></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>åˆ›å»ºå¹¶è¿›å…¥</strong></td>\n<td>å¦‚æœä¸æŒ‡å®šä¼šè¯åï¼Œ<code>tmux</code> ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªä¼šè¯å¹¶è¿›å…¥ã€‚</td>\n<td><code>tmux</code></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>ç¦»å¼€/åˆ†ç¦»</strong></td>\n<td>ä¿æŒä¼šè¯åœ¨åå°è¿è¡Œï¼Œå®‰å…¨åœ°ç¦»å¼€ç»ˆç«¯ã€‚</td>\n<td>N/A</td>\n<td><code>Ctrl + b</code> ç„¶åæŒ‰ <code>d</code></td>\n</tr>\n<tr>\n<td><strong>æŸ¥çœ‹ä¼šè¯</strong></td>\n<td>åˆ—å‡ºå½“å‰æœåŠ¡å™¨ä¸Šæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ä¼šè¯ã€‚</td>\n<td><code>tmux ls</code> æˆ– <code>tmux attach</code></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>é‡æ–°è¿æ¥</strong></td>\n<td>é‡æ–°è¿›å…¥ä½ ç¦»å¼€çš„ä¼šè¯ã€‚</td>\n<td><code>tmux attach -t &lt;ä¼šè¯å&gt;</code></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>å…³é—­/åœæ­¢</strong></td>\n<td>å½»åº•æ€æ­»ä¸€ä¸ªæˆ–å¤šä¸ªä¼šè¯ã€‚</td>\n<td><code>tmux kill-session -t &lt;ä¼šè¯å&gt;</code></td>\n<td>N/A</td>\n</tr>\n<tr>\n<td><strong>åˆ‡æ¢ä¼šè¯</strong></td>\n<td>åœ¨å¤šä¸ªä¼šè¯ä¹‹é—´å¿«é€Ÿè·³è½¬ã€‚</td>\n<td>N/A</td>\n<td><code>Ctrl + b</code> ç„¶åæŒ‰ <code>s</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"è¿›é˜¶çª—æ ¼-panes-å’Œçª—å£-windows\"><a class=\"anchor\" href=\"#è¿›é˜¶çª—æ ¼-panes-å’Œçª—å£-windows\">#</a> ğŸ’¡ è¿›é˜¶ï¼šçª—æ ¼ (Panes) å’Œçª—å£ (Windows)</h3>\n<p><code>tmux</code> çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥åœ¨ä¸€ä¸ªä¼šè¯ä¸­ç®¡ç†å¤šä¸ªçª—å£å’Œçª—æ ¼ï¼š</p>\n<table>\n<thead>\n<tr>\n<th><strong>å¯¹è±¡</strong></th>\n<th><strong>ä½œç”¨</strong></th>\n<th><strong>å¿«æ·é”® (Ctrl + b åæŒ‰)</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>çª—å£</strong></td>\n<td>å¤šä¸ªå…¨å±è™šæ‹Ÿç»ˆç«¯ï¼ˆå¦‚æ¡Œé¢ç¯å¢ƒä¸­çš„å¤šä¸ªæ¡Œé¢ï¼‰ã€‚</td>\n<td><code>c</code> (Create), <code>n</code> (Next), <code>p</code> (Previous)</td>\n</tr>\n<tr>\n<td><strong>çª—æ ¼</strong></td>\n<td>å°†ä¸€ä¸ªçª—å£åˆ†å‰²æˆå¤šä¸ªå­åŒºåŸŸï¼ˆå¦‚ <code>htop</code> åœ¨å·¦è¾¹ï¼Œä»£ç åœ¨å³è¾¹ï¼‰ã€‚</td>\n<td><code>%</code> (å‚ç›´åˆ†å‰²), <code>&quot;</code> (æ°´å¹³åˆ†å‰²)</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "ç¯å¢ƒé…ç½®&å·¥å…·ä½¿ç”¨",
                "Tmux"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/12/SBC/%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8E%E8%BD%AFAP%E7%9A%84Linux%E8%AE%BE%E5%A4%87%E9%85%8D%E7%BD%91%E7%AD%96%E7%95%A5/",
            "url": "https://haoruanwn.github.io/2025/11/12/SBC/%E4%B8%80%E7%A7%8D%E5%9F%BA%E4%BA%8E%E8%BD%AFAP%E7%9A%84Linux%E8%AE%BE%E5%A4%87%E9%85%8D%E7%BD%91%E7%AD%96%E7%95%A5/",
            "title": "ä¸€ç§åŸºäºè½¯APçš„Linuxè®¾å¤‡é…ç½‘ç­–ç•¥",
            "date_published": "2025-11-12T07:03:52.000Z",
            "content_html": "<h1 id=\"ä¸€ç§åŸºäºè½¯apçš„linuxè®¾å¤‡é…ç½‘ç­–ç•¥\"><a class=\"anchor\" href=\"#ä¸€ç§åŸºäºè½¯apçš„linuxè®¾å¤‡é…ç½‘ç­–ç•¥\">#</a> ä¸€ç§åŸºäºè½¯APçš„Linuxè®¾å¤‡é…ç½‘ç­–ç•¥</h1>\n<h4 id=\"èƒŒæ™¯\"><a class=\"anchor\" href=\"#èƒŒæ™¯\">#</a> èƒŒæ™¯</h4>\n<p>å¯¹äºæŸäº›è®¾å¤‡ï¼Œæ¯”å¦‚ç‰©è”ç½‘è®¾å¤‡ã€æœºå™¨äººï¼Œæœ¬èº«ä¸å¸¦å±å¹•é”®é¼ ï¼Œä¸æ–¹ä¾¿è¿›shellé‡Œæ“ä½œï¼Œä¹Ÿæ²¡æœ‰æ¡Œé¢æˆ–è€…å…¶ä»–GUIå¯ä¾›é…ç½‘ï¼Œå°±å¯ä»¥ç”¨è½¯APç­–ç•¥æ¥è¿›è¡Œé…ç½‘ã€‚å®Œæ•´çš„è½¯APç­–ç•¥å¯ä»¥è®©æ‰‹æœºé“¾æ¥çƒ­ç‚¹åè¿›å…¥ä¸€ä¸ªwebç•Œé¢ï¼Œæœ¬æ–‡ç« æä¾›ä¸€ç§è¾ƒä¸ºåŸå§‹ä½†ç®€å•çš„æ–¹æ¡ˆã€‚</p>\n<p>å½“è®¾å¤‡å¯åŠ¨åæ£€æµ‹ä¸åˆ°ç½‘ç»œé“¾æ¥ï¼Œå°è¯•é“¾æ¥å·²ä¿å­˜çš„Wi-Fiä¹Ÿä¸æˆåŠŸåï¼Œå®ƒä¼šè¿›å…¥apæ¨¡å¼ï¼Œæä¾›ä¸€ä¸ªçƒ­ç‚¹ä¾›å…¶ä»–è®¾å¤‡é“¾æ¥ã€‚å…¶ä»–è®¾å¤‡é“¾æ¥åï¼Œå°±å¯ä»¥sshè¿›æœ¬è®¾å¤‡ï¼Œåœ¨shellé‡Œæ‰§è¡Œé…ç½‘æ“ä½œã€‚</p>\n<p>æœ¬æ–‡ç« çš„å…·ä½“æ€è·¯åŸºäºsystemdå’Œnetworkmanagerï¼Œå…¶ä»–æƒ…æ™¯æ€è·¯å¤§è‡´ç›¸åŒã€‚</p>\n<h3 id=\"ä¸€-åˆ›å»ºapçƒ­ç‚¹è¿æ¥é…ç½®æ–‡ä»¶\"><a class=\"anchor\" href=\"#ä¸€-åˆ›å»ºapçƒ­ç‚¹è¿æ¥é…ç½®æ–‡ä»¶\">#</a> ä¸€ã€åˆ›å»ºAPï¼ˆçƒ­ç‚¹ï¼‰è¿æ¥é…ç½®æ–‡ä»¶</h3>\n<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>N100-Setup</code> çš„APã€‚æœ€å…³é”®çš„è®¾ç½®æ˜¯ <code>autoconnect no</code>ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›å®ƒåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚åœ¨å®¶æ—¶ï¼‰è‡ªåŠ¨å¯åŠ¨ï¼Œæˆ‘ä»¬åªå¸Œæœ›åœ¨è„šæœ¬è°ƒç”¨å®ƒæ—¶æ‰å¯åŠ¨ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¯·å°† 'wlan0' æ›¿æ¢ä¸ºå®é™…çš„Wi-Fiè®¾å¤‡å (ç”¨ `nmcli dev` æŸ¥çœ‹)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    type</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wifi</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ifname</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wlan0</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    con-name</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">N100-Setup</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    autoconnect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> no</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ssid</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">N100-Setup</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    802-11-wireless.mode</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ap</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    802-11-wireless.band</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> bg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.method</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> shared</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ipv4.addresses</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 192.168.42.1/24</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    wifi-sec.key-mgmt</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wpa-psk</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    wifi-sec.psk</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">YourPassword</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<ul>\n<li><code>con-name &quot;N100-Setup&quot;</code>: è¿æ¥çš„åç§°ã€‚</li>\n<li><code>autoconnect no</code>: æˆ‘ä»¬åªåœ¨éœ€è¦æ—¶æ‰‹åŠ¨ï¼ˆé€šè¿‡è„šæœ¬ï¼‰å¯åŠ¨å®ƒï¼Œæ‰€ä»¥è®¾ç½®ä¸ºä¸å…è®¸è‡ªåŠ¨é“¾æ¥ã€‚</li>\n<li><code>802-11-wireless.mode ap</code>: å°†æ­¤æ¥å£è®¾ä¸ºAPï¼ˆçƒ­ç‚¹ï¼‰æ¨¡å¼ã€‚</li>\n<li><code>ipv4.method shared</code>: NMä¼šè‡ªåŠ¨ä¸ºæ­¤è¿æ¥å¯åŠ¨ä¸€ä¸ªDHCPæœåŠ¡å™¨ï¼ˆåœ¨ <code>192.168.42.0/24</code> ç½‘æ®µï¼‰å¹¶å¤„ç†NATï¼ˆå¦‚æœN100æœªæ¥æœ‰å…¶ä»–æ–¹å¼è”ç½‘ï¼‰ã€‚</li>\n<li><code>ipv4.addresses 192.168.42.1/24</code>: å®šä¹‰APçš„ç½‘å…³IPã€‚å…¶ä»–è®¾å¤‡è¿ä¸Šåï¼Œä¼šè·å–ä¸€ä¸ª <code>192.168.42.x</code> çš„IPï¼Œè€ŒN100æœ¬èº«å°±æ˜¯ <code>192.168.42.1</code>ã€‚</li>\n<li><code>wifi-sec.*</code>: è®¾ç½®WPA2å¯†ç ã€‚</li>\n</ul>\n<hr />\n<h3 id=\"äºŒ-åˆ›å»ºå›è½æ£€æŸ¥è„šæœ¬\"><a class=\"anchor\" href=\"#äºŒ-åˆ›å»ºå›è½æ£€æŸ¥è„šæœ¬\">#</a> äºŒã€åˆ›å»ºå›è½æ£€æŸ¥è„šæœ¬</h3>\n<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªShellè„šæœ¬ï¼Œç”± <code>systemd</code> å®šæ—¶è°ƒç”¨ã€‚</p>\n<p><strong>åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> mkdir</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -p</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /usr/local/bin</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /usr/local/bin/check-network-and-fallback.sh</span></span></code></pre>\n<p>å­˜æ”¾ä»¥ä¸‹å†…å®¹</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#!/bin/bash</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è„šæœ¬çš„ç›®çš„æ˜¯ï¼šæ£€æŸ¥NMæ˜¯å¦å¤„äº\"å®Œå…¨è¿æ¥\"çŠ¶æ€ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å¦‚æœä¸æ˜¯ï¼Œå°±å¯åŠ¨APå›è½çƒ­ç‚¹ã€‚</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># NMçŠ¶æ€ç : 70 = å·²è¿æ¥ (å…¨å±€)</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¯¦æƒ…: nmcli general status</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#       STATE          CONNECTIVITY  WIFI-HW  WIFI     WWAN-HW  WWAN</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">#       connected      full          enabled  enabled  enabled  enabled</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># `nmcli -t -f STATE general` çš„è¾“å‡ºä¼šæ˜¯ \"connected\", \"connecting\", \"disconnected\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">if</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> nmcli</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -t</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> STATE</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> general</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> grep</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -q</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">^connected</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> then</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # çŠ¶æ€æ˜¯ \"connected\"ï¼Œæ„å‘³ç€æˆ‘ä»¬å·²ç»è¿ä¸Šäº†æŸä¸ªç½‘ç»œï¼ˆæœ‰çº¿æˆ–æ— çº¿ï¼‰ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # ä»»åŠ¡å®Œæˆï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    exit</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">else</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # çŠ¶æ€ä¸æ˜¯ \"connected\" (å¯èƒ½æ˜¯ 'disconnected' æˆ– 'connecting')</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # æˆ‘ä»¬è®¤ä¸ºè¿™æ˜¯â€œåœ¨æ–°ç¯å¢ƒâ€ï¼Œéœ€è¦å¯åŠ¨APã€‚</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # ä½¿ç”¨ systemd-cat å°†æ—¥å¿—å‘é€åˆ° systemd-journalï¼Œæ–¹ä¾¿æ’æŸ¥</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    systemd-cat</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -t</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ap-fallback</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> echo</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">No network detected. Activating AP fallback 'N100-Setup'.</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # å¯åŠ¨æˆ‘ä»¬çš„APè¿æ¥</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # (å¦‚æœå®ƒå·²å¯åŠ¨ï¼Œæ­¤å‘½ä»¤ä¹Ÿæ— å®³)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> up</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">N100-Setup</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fi</span></span></code></pre>\n<p><strong>ä½¿å…¶å¯æ‰§è¡Œï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> chmod</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> +x</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /usr/local/bin/check-network-and-fallback.sh</span></span></code></pre>\n<hr />\n<h3 id=\"ä¸‰-åˆ›å»º-systemd-æœåŠ¡å’Œå®šæ—¶å™¨\"><a class=\"anchor\" href=\"#ä¸‰-åˆ›å»º-systemd-æœåŠ¡å’Œå®šæ—¶å™¨\">#</a> ä¸‰ã€åˆ›å»º <code>systemd</code> æœåŠ¡å’Œå®šæ—¶å™¨</h3>\n<p>æˆ‘ä»¬éœ€è¦ä¸¤ä¸ª <code>systemd</code> å•å…ƒæ–‡ä»¶ï¼šä¸€ä¸ª <code>.service</code> æ–‡ä»¶æ¥è¿è¡Œè„šæœ¬ï¼Œä¸€ä¸ª <code>.timer</code> æ–‡ä»¶æ¥å®šæ—¶è§¦å‘å®ƒã€‚</p>\n<h4 id=\"1-åˆ›å»º-service-æ–‡ä»¶\"><a class=\"anchor\" href=\"#1-åˆ›å»º-service-æ–‡ä»¶\">#</a> 1. åˆ›å»º <code>.service</code> æ–‡ä»¶</h4>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nano</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/systemd/system/ap-fallback.service</span></span></code></pre>\n<p>ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-toml\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#59873A;--shiki-dark:#80A665\">Unit</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">Description</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">A</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">ctivate AP mode fallback if no network is available</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¡®ä¿åœ¨NetworkManagerå‡†å¤‡å°±ç»ªåæ‰è¿è¡Œ</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">After</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">N</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">etworkManager-wait-online.service</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#59873A;--shiki-dark:#80A665\">Service</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">Type</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">o</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">neshot</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">ExecStart</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">/</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">usr/local/bin/check-network-and-fallback.sh</span></span></code></pre>\n<h4 id=\"2-åˆ›å»º-timer-æ–‡ä»¶\"><a class=\"anchor\" href=\"#2-åˆ›å»º-timer-æ–‡ä»¶\">#</a> 2. åˆ›å»º <code>.timer</code> æ–‡ä»¶</h4>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> vim</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /etc/systemd/system/ap-fallback.timer</span></span></code></pre>\n<p>ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Unit</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">Description</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Run</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> AP</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fallback</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> check</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> minutes</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> after</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> boot</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Timer</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åœ¨å¼€æœº1åˆ†é’Ÿåæ‰§è¡Œ</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">OnBootSec</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">1min</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ä¿æŒæ­¤è®¾ç½®ï¼Œä»¥ä¾¿åœ¨ç³»ç»Ÿä¼‘çœ å”¤é†’åä¹Ÿèƒ½æ­£ç¡®è§¦å‘</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">Persistent</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">true</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Install</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">WantedBy</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">timers.target</span></span></code></pre>\n<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>\n<ul>\n<li><code>OnBootSec=2min</code>: æˆ‘ä»¬ç»™N100å’ŒNetworkManager <strong>1åˆ†é’Ÿ</strong>çš„æ—¶é—´å»å°è¯•è¿æ¥æ‰€æœ‰å®ƒå·²çŸ¥çš„Wi-Fiï¼ˆæ¯”å¦‚ä½ å®¶é‡Œçš„ï¼‰ã€‚å¦‚æœ1åˆ†é’Ÿåï¼ˆç”± <code>ap-fallback.service</code> æ£€æŸ¥ï¼‰å®ƒä»ç„¶æ²¡è¿ä¸Šï¼Œå°±å¯åŠ¨APã€‚</li>\n</ul>\n<hr />\n<h3 id=\"å››-å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡\"><a class=\"anchor\" href=\"#å››-å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡\">#</a> å››ã€å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡</h3>\n<ol>\n<li>\n<p><strong>é‡æ–°åŠ è½½ systemd daemonï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> daemon-reload</span></span></code></pre>\n</li>\n<li>\n<p><strong>å¯ç”¨å¹¶ç«‹å³å¯åŠ¨å®šæ—¶å™¨ï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> systemctl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> enable</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --now</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ap-fallback.timer</span></span></code></pre>\n</li>\n<li>\n<p><strong>æ£€æŸ¥å®šæ—¶å™¨çŠ¶æ€ï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">systemctl</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> list-timers</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> grep</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ap-fallback</span></span></code></pre>\n<p>åº”è¯¥èƒ½çœ‹åˆ° <code>ap-fallback.timer</code> å’Œ <code>ap-fallback.service</code> çš„æ¡ç›®ã€‚</p>\n</li>\n</ol>\n<hr />\n<h3 id=\"äº”-åœ¨æ–°ç¯å¢ƒä¸­çš„å·¥ä½œæµç¨‹\"><a class=\"anchor\" href=\"#äº”-åœ¨æ–°ç¯å¢ƒä¸­çš„å·¥ä½œæµç¨‹\">#</a> äº”ã€åœ¨æ–°ç¯å¢ƒä¸­çš„å·¥ä½œæµç¨‹</h3>\n<ol>\n<li>\n<p>ç»™è®¾å¤‡é€šç”µå¯åŠ¨ã€‚</p>\n</li>\n<li>\n<p>è®¾å¤‡å¯åŠ¨åï¼Œ<code>ap-fallback.timer</code> å¼€å§‹è®¡æ—¶ã€‚NetworkManagerä¼šå°è¯•è¿æ¥å®ƒæ‰€æœ‰å·²çŸ¥çš„ã€<code>autoconnect yes</code> çš„Wi-Fiç½‘ç»œã€‚</p>\n</li>\n<li>\n<p>åœ¨1åˆ†é’Ÿçš„ç­‰å¾…æ—¶é—´å†…ï¼Œæ‰€æœ‰å°è¯•éƒ½å¤±è´¥äº†ï¼ˆå› ä¸ºåœ¨æ–°ç¯å¢ƒï¼‰ã€‚</p>\n</li>\n<li>\n<p>1åˆ†é’Ÿåï¼Œ<code>ap-fallback.timer</code> è§¦å‘ <code>ap-fallback.service</code>ã€‚</p>\n</li>\n<li>\n<p><code>check-network-and-fallback.sh</code> è„šæœ¬è¿è¡Œã€‚å®ƒé€šè¿‡ <code>nmcli general status</code> å‘ç°çŠ¶æ€æ˜¯ <code>disconnected</code>ã€‚</p>\n</li>\n<li>\n<p>è„šæœ¬æ‰§è¡Œ <code>nmcli connection up &quot;N100-Setup&quot;</code>ã€‚</p>\n</li>\n<li>\n<p>è®¾å¤‡å¼€å§‹å¹¿æ’­ä¸€ä¸ªåä¸º <strong>&quot;N100-Setup&quot;</strong> çš„Wi-Fiçƒ­ç‚¹ã€‚</p>\n</li>\n<li>\n<p>å…¶ä»–è®¾å¤‡è¿æ¥åˆ°è¿™ä¸ª &quot;N100-Setup&quot; Wi-Fiã€‚</p>\n</li>\n<li>\n<p>è¿æ¥æˆåŠŸåï¼Œç»ˆç«¯ï¼ŒSSHç™»å…¥è®¾å¤‡çš„å›ºå®šIPï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ssh</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hao@192.168.42.1</span></span></code></pre>\n</li>\n<li>\n<p>åœ¨è®¾å¤‡çš„Shellä¸­ï¼Œä½ è¿è¡Œ <code>nmcli</code> æ¥æ‰«æå¹¶è¿æ¥åˆ°<em>æ–°ç¯å¢ƒ</em>çš„Wi-Fiï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 1. æ·»åŠ ä¸€ä¸ªæ–°è¿æ¥ã€‚è¿™ä¸ªå‘½ä»¤*ä¸ä¼š*å°è¯•ç«‹å³è¿æ¥ï¼Œå®ƒåªæ˜¯åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> add</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    type</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wifi</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    con-name</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Kwrt_5G</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ifname</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wlan0</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    ssid</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Kwrt_5G</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 2. ä¸ºè¿™ä¸ªæ–°è¿æ¥è®¾ç½®å¯†ç </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Kwrt_5G</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    wifi-sec.key-mgmt</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> wpa-psk</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#B56959;--shiki-dark:#C98A7D\">    wifi-sec.psk</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">20542054</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 3. ç¡®ä¿è¿™ä¸ªæ–°è¿æ¥ä¼šè‡ªåŠ¨è¿æ¥</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> modify</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Kwrt_5G</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection.autoconnect</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> yes</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 4. ä¸»åŠ¨æ–­å¼€AP</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¿™ä¸ªå‘½ä»¤ä¼šç«‹å³å…³é—­ N100-Setup AP</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nmcli</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> connection</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> down</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">N100-Setup</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n</li>\n<li>\n<p>å½“è®¾å¤‡æˆåŠŸè¿æ¥åˆ°æ–°ç¯å¢ƒçš„Wi-Fiåï¼Œ<code>nmcli general status</code> å°±ä¼šå˜ä¸º <code>connected</code>ã€‚</p>\n</li>\n<li>\n<p>ä¸‹æ¬¡å¯åŠ¨æ—¶ï¼Œ<code>check-network-and-fallback.sh</code> è„šæœ¬ä¼šåœ¨2åˆ†é’Ÿåè¿è¡Œï¼Œä½†å®ƒä¼šæ£€æµ‹åˆ°çŠ¶æ€æ˜¯ <code>connected</code>ï¼ˆå› ä¸ºè¿ä¸Šäº†æ–°ç¯å¢ƒçš„Wi-Fiï¼‰ï¼Œå› æ­¤å®ƒ<strong>ä¸ä¼š</strong>å†å¯åŠ¨APçƒ­ç‚¹ã€‚</p>\n</li>\n</ol>\n",
            "tags": [
                "SBC",
                "ç½‘ç»œ"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/",
            "url": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/",
            "title": "Rustç”Ÿå‘½å‘¨æœŸ",
            "date_published": "2025-11-01T15:24:54.000Z",
            "content_html": "<h1 id=\"rust-ç”Ÿå‘½å‘¨æœŸ-lifetime\"><a class=\"anchor\" href=\"#rust-ç”Ÿå‘½å‘¨æœŸ-lifetime\">#</a> Rust ç”Ÿå‘½å‘¨æœŸ (Lifetime)</h1>\n<p>Rust ä¸­çš„æ¯ä¸€ä¸ªå¼•ç”¨éƒ½æœ‰å…¶ç”Ÿå‘½å‘¨æœŸï¼ˆlifetimeï¼‰ï¼Œä¹Ÿå°±æ˜¯å¼•ç”¨ä¿æŒæœ‰æ•ˆçš„ä½œç”¨åŸŸã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œç”Ÿå‘½å‘¨æœŸæ˜¯éšå¼ä¸”å¯ä»¥è¢«æ¨æ–­çš„ï¼Œç±»ä¼¼äºç±»å‹æ¨æ–­ã€‚ç„¶è€Œï¼Œå½“å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½ä»¥å¤šç§æ–¹å¼äº’ç›¸å…³è”æ—¶ï¼ŒRust ä¼šè¦æ±‚æˆ‘ä»¬ä½¿ç”¨æ³›å‹ç”Ÿå‘½å‘¨æœŸå‚æ•°æ¥æ‰‹åŠ¨æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸï¼Œä»¥ç¡®ä¿è¿è¡Œæ—¶ä¸ä¼šå‡ºç°æ‚¬å‚å¼•ç”¨ã€‚</p>\n<hr />\n<h2 id=\"å€Ÿç”¨æ£€æŸ¥å™¨ä¸ç”Ÿå‘½å‘¨æœŸ\"><a class=\"anchor\" href=\"#å€Ÿç”¨æ£€æŸ¥å™¨ä¸ç”Ÿå‘½å‘¨æœŸ\">#</a> å€Ÿç”¨æ£€æŸ¥å™¨ä¸ç”Ÿå‘½å‘¨æœŸ</h2>\n<p>ç”Ÿå‘½å‘¨æœŸçš„ä¸»è¦ç›®æ ‡æ˜¯é¿å…æ‚¬å‚å¼•ç”¨ï¼Œå®ƒä¼šå¯¼è‡´ç¨‹åºå¼•ç”¨äº†éé¢„æœŸå¼•ç”¨çš„æ•°æ®ã€‚</p>\n<p>è€ƒè™‘ä¸€ä¸ªè¿”å›ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ä¸­è¾ƒé•¿è€…çš„å‡½æ•°ã€‚ä¸‹é¢çš„ä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå› ä¸º Rust ç¼–è¯‘å™¨æ— æ³•åœ¨ç¼–è¯‘æœŸçŸ¥é“è¿”å›çš„å¼•ç”¨æŒ‡å‘ <code>x</code> è¿˜æ˜¯ <code>y</code>ï¼Œå› æ­¤æ— æ³•ç¡®å®šå…¶ç”Ÿå‘½å‘¨æœŸã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æ— æ³•ç¼–è¯‘ï¼šè¿”å›çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸æ˜ç¡®</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// fn longest(x: &#x26;str, y: &#x26;str) -> &#x26;str &#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//     if x.len() > y.len() &#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//         x</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//     &#125; else &#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//         y</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//     &#125;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// &#125;</span></span></code></pre>\n<blockquote>\n<p>é”™è¯¯ä¿¡æ¯ï¼šmissing lifetime specifier</p>\n<p>è¿™ä¸ªé”™è¯¯è¡¨æ˜ï¼Œç¼–è¯‘å™¨éœ€è¦æˆ‘ä»¬æ˜ç¡®å‘ŠçŸ¥è¿”å›çš„å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸è¾“å…¥å‚æ•°çš„ç”Ÿå‘½å‘¨æœŸä¹‹é—´çš„å…³ç³»ã€‚</p>\n</blockquote>\n<hr />\n<h2 id=\"æ³›å‹ç”Ÿå‘½å‘¨æœŸæ³¨è§£\"><a class=\"anchor\" href=\"#æ³›å‹ç”Ÿå‘½å‘¨æœŸæ³¨è§£\">#</a> æ³›å‹ç”Ÿå‘½å‘¨æœŸæ³¨è§£</h2>\n<p>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå‡½æ•°ç­¾åæ·»åŠ æ³›å‹ç”Ÿå‘½å‘¨æœŸå‚æ•°ã€‚ç”Ÿå‘½å‘¨æœŸæ³¨è§£ä¸ä¼šæ”¹å˜ä»»ä½•å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œæ˜¯æè¿°å¤šä¸ªå¼•ç”¨ç”Ÿå‘½å‘¨æœŸä¹‹é—´çš„å…³ç³»ã€‚</p>\n<ul>\n<li>ç”Ÿå‘½å‘¨æœŸå‚æ•°ä»¥æ’‡å·ï¼ˆ<code>'</code>ï¼‰å¼€å¤´ï¼Œåç§°é€šå¸¸æ˜¯å°å†™å­—æ¯ï¼Œå¦‚ <code>'a</code>ã€‚</li>\n<li><code>&amp;'a str</code> è¯»ä½œ â€œä¸€ä¸ªè‡³å°‘æ´»å¾—å’Œç”Ÿå‘½å‘¨æœŸ <code>'a</code> ä¸€æ ·é•¿çš„å­—ç¬¦ä¸²åˆ‡ç‰‡å¼•ç”¨â€ã€‚</li>\n</ul>\n<p>é€šè¿‡æ·»åŠ æ³›å‹ç”Ÿå‘½å‘¨æœŸ <code>'a</code>ï¼Œæˆ‘ä»¬å‘Šè¯‰ç¼–è¯‘å™¨ï¼šè¾“å…¥å‚æ•° <code>x</code>ã€<code>y</code> å’Œè¿”å›çš„å¼•ç”¨å¿…é¡»æ‹¥æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼ˆå³å®ƒä»¬ä¸­ç”Ÿå‘½å‘¨æœŸæœ€çŸ­çš„é‚£ä¸ªï¼‰ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æ·»åŠ æ³›å‹ç”Ÿå‘½å‘¨æœŸå‚æ•°'aï¼Œè¡¨ç¤ºè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸä¸è¾“å…¥å‚æ•°ä¸­ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„ä¸€ä¸ªç›¸åŒ</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> longest_with_lifetime</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> y</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">len</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> y</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">len</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> y</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>åœ¨ä¸‹é¢çš„ <code>main</code> å‡½æ•°ç¤ºä¾‹ä¸­ï¼Œ<code>string1</code> çš„ç”Ÿå‘½å‘¨æœŸæ¯” <code>string2</code> é•¿ã€‚å½“å®ƒä»¬è¢«ä¼ å…¥ <code>longest_with_lifetime</code> æ—¶ï¼Œ<code>'a</code> çš„å…·ä½“ç”Ÿå‘½å‘¨æœŸå°†ç­‰äº <code>string2</code> çš„ç”Ÿå‘½å‘¨æœŸã€‚å› æ­¤ï¼Œè¿”å›çš„ <code>result</code> çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿä¸ <code>string2</code> ç›¸åŒã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> string1</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">abcd</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> string2</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">xyz</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> result</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> longest_with_lifetime</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">string1</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">as_str</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> string2</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">as_str</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">The longest string is </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> result</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // string2 åœ¨è¿™é‡Œå¤±æ•ˆï¼Œresult çš„ç”Ÿå‘½å‘¨æœŸä¹Ÿåˆ°æ­¤ç»“æŸ</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<hr />\n<h2 id=\"ç»“æ„ä½“å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ³¨è§£\"><a class=\"anchor\" href=\"#ç»“æ„ä½“å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ³¨è§£\">#</a> ç»“æ„ä½“å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ³¨è§£</h2>\n<p>å½“ç»“æ„ä½“æŒæœ‰å¼•ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»åœ¨å…¶å®šä¹‰ä¸­æ·»åŠ ç”Ÿå‘½å‘¨æœŸæ³¨è§£ã€‚è¿™ä¿è¯äº†è¯¥ç»“æ„ä½“çš„å®ä¾‹å­˜æ´»æ—¶é—´ä¸ä¼šè¶…è¿‡å…¶åŒ…å«çš„å¼•ç”¨çš„å­˜æ´»æ—¶é—´ã€‚</p>\n<p><code>ImportantExcerpt</code> ç»“æ„ä½“æŒæœ‰ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ <code>part</code>ã€‚å…¶å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ³¨è§£ <code>'a</code> è¡¨æ˜ï¼Œ<code>ImportantExcerpt</code> çš„å®ä¾‹ä¸èƒ½æ¯”å®ƒæ‰€å¼•ç”¨çš„ <code>part</code> æ´»å¾—æ›´ä¹…ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// Struct ä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ³¨è§£</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æŒ‡æ˜ ImportantExcerpt å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…è¿‡ part å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ImportantExcerpt</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    part</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> novel</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Call me Ishmael. Some years ago...</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> first_sentence</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> novel</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">split</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">.</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">next</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">unwrap</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> i</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ImportantExcerpt</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        part</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> first_sentence</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<hr />\n<h2 id=\"ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™lifetime-elision-rules\"><a class=\"anchor\" href=\"#ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™lifetime-elision-rules\">#</a> ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™ï¼ˆLifetime Elision Rulesï¼‰</h2>\n<p>åœ¨å®è·µä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œç¼–è¯‘å™¨å†…ç½®äº†ä¸€å¥—ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™ã€‚å¦‚æœä»£ç ç¬¦åˆè¿™äº›è§„åˆ™ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦æ˜¾å¼åœ°æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸã€‚è¿™äº›è§„åˆ™ä¸æ˜¯è®©ç¼–è¯‘å™¨çŒœæµ‹ï¼Œè€Œæ˜¯éµå¾ªä¸€å¥—æ˜ç¡®çš„ç®—æ³•ã€‚</p>\n<p>é¦–å…ˆï¼Œå®šä¹‰ä¸¤ä¸ªæœ¯è¯­ï¼š</p>\n<ul>\n<li><strong>è¾“å…¥ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå‡½æ•°æˆ–æ–¹æ³•å‚æ•°ä¸Šçš„ç”Ÿå‘½å‘¨æœŸã€‚</li>\n<li><strong>è¾“å‡ºç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå‡½æ•°æˆ–æ–¹æ³•è¿”å›å€¼ä¸Šçš„ç”Ÿå‘½å‘¨æœŸã€‚</li>\n</ul>\n<p>ç¼–è¯‘å™¨ä½¿ç”¨ä»¥ä¸‹ä¸‰æ¡è§„åˆ™æ¥æ¨æ–­ç”Ÿå‘½å‘¨æœŸï¼š</p>\n<table>\n<thead>\n<tr>\n<th><strong>è§„åˆ™</strong></th>\n<th><strong>æè¿°</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>è§„åˆ™ 1</strong></td>\n<td>ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªè¾“å…¥å¼•ç”¨ï¼ˆå‡½æ•°æˆ–æ–¹æ³•çš„å‚æ•°ï¼‰åˆ†é…ä¸€ä¸ªä¸åŒçš„ç”Ÿå‘½å‘¨æœŸå‚æ•°ã€‚</td>\n</tr>\n<tr>\n<td><strong>è§„åˆ™ 2</strong></td>\n<td>å¦‚æœåªæœ‰ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œé‚£ä¹ˆè¯¥ç”Ÿå‘½å‘¨æœŸä¼šè¢«èµ‹ç»™æ‰€æœ‰è¾“å‡ºç”Ÿå‘½å‘¨æœŸå‚æ•°ã€‚</td>\n</tr>\n<tr>\n<td><strong>è§„åˆ™ 3</strong></td>\n<td>å¦‚æœæœ‰å¤šä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œä½†å…¶ä¸­ä¸€ä¸ªæ˜¯ <code>&amp;self</code> æˆ– <code>&amp;mut self</code>ï¼Œé‚£ä¹ˆ <code>self</code> çš„ç”Ÿå‘½å‘¨æœŸä¼šè¢«èµ‹ç»™æ‰€æœ‰è¾“å‡ºç”Ÿå‘½å‘¨æœŸå‚æ•°ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p>å¦‚æœç¼–è¯‘å™¨åº”ç”¨å®Œè¿™ä¸‰æ¡è§„åˆ™åï¼Œä»ç„¶æ— æ³•ç¡®å®šæ‰€æœ‰è¾“å‡ºå¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå°±ä¼šæŠ¥é”™å¹¶è¦æ±‚æ‰‹åŠ¨æ ‡æ³¨ã€‚</p>\n<hr />\n<h2 id=\"æ–¹æ³•å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸ\"><a class=\"anchor\" href=\"#æ–¹æ³•å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸ\">#</a> æ–¹æ³•å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸ</h2>\n<p>åœ¨ä¸ºå¸¦æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»“æ„ä½“å®ç°æ–¹æ³•æ—¶ï¼Œå…¶è¯­æ³•ä¸æ³›å‹ç±»å‹å‚æ•°ç›¸ä¼¼ã€‚</p>\n<ul>\n<li>éœ€è¦åœ¨ <code>impl</code> å…³é”®å­—åå£°æ˜ç”Ÿå‘½å‘¨æœŸå‚æ•° <code>'a</code>ã€‚</li>\n<li>è¿™äº›ç”Ÿå‘½å‘¨æœŸå‚æ•°æ˜¯ <code>ImportantExcerpt</code> ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ImportantExcerpt</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // è§„åˆ™ 3 é€‚ç”¨ï¼šè¾“å…¥ç”Ÿå‘½å‘¨æœŸæ˜¯ &#x26;'a selfï¼Œæ‰€ä»¥è¾“å‡ºç”Ÿå‘½å‘¨æœŸä¹Ÿè¢«æ¨æ–­ä¸º 'a</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å› æ­¤ &#x26;self å’Œè¿”å›çš„ &#x26;str æ‹¥æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸ</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> announce_and_return_part</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> announcement</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">str</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">str</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Attention please: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> announcement</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">part</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>ç”±äºç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™ï¼ˆç‰¹åˆ«æ˜¯ç¬¬ä¸‰æ¡ï¼‰ï¼Œ<code>announce_and_return_part</code> æ–¹æ³•ä¸éœ€è¦æ˜¾å¼æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸã€‚</p>\n<hr />\n<h2 id=\"é™æ€ç”Ÿå‘½å‘¨æœŸ-static\"><a class=\"anchor\" href=\"#é™æ€ç”Ÿå‘½å‘¨æœŸ-static\">#</a> é™æ€ç”Ÿå‘½å‘¨æœŸ (<code>'static</code>)</h2>\n<p><code>'static</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒè¡¨ç¤ºå¼•ç”¨åœ¨æ•´ä¸ªç¨‹åºçš„è¿è¡ŒæœŸé—´éƒ½æœ‰æ•ˆã€‚æ‰€æœ‰çš„å­—ç¬¦ä¸²å­—é¢é‡éƒ½æ‹¥æœ‰ <code>'static</code> ç”Ÿå‘½å‘¨æœŸï¼Œå› ä¸ºå®ƒä»¬è¢«ç›´æ¥å­˜å‚¨åœ¨ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> s</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">static</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">I have a static lifetime.</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<h2 id=\"æ³›å‹-trait-bound-ä¸ç”Ÿå‘½å‘¨æœŸçš„ç»“åˆ\"><a class=\"anchor\" href=\"#æ³›å‹-trait-bound-ä¸ç”Ÿå‘½å‘¨æœŸçš„ç»“åˆ\">#</a> æ³›å‹ã€Trait Bound ä¸ç”Ÿå‘½å‘¨æœŸçš„ç»“åˆ</h2>\n<p>æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªå‡½æ•°ç­¾åä¸­åŒæ—¶ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°ã€Trait Bound å’Œç”Ÿå‘½å‘¨æœŸï¼Œä»¥åˆ›å»ºæ›´çµæ´»å’Œå¼ºå¤§çš„å‡½æ•°ã€‚</p>\n<p>ä¸‹é¢çš„å‡½æ•° <code>longest_with_an_announcement</code> ç»¼åˆäº†è¿™äº›æ¦‚å¿µï¼š</p>\n<ul>\n<li><code>'a</code>ï¼šæ³›å‹ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œç¡®ä¿å¼•ç”¨çš„æœ‰æ•ˆæ€§ã€‚</li>\n<li><code>T</code>ï¼šæ³›å‹ç±»å‹å‚æ•°ã€‚</li>\n<li><code>where T: Display</code>ï¼šTrait Bound çº¦æŸï¼Œè¦æ±‚ç±»å‹ <code>T</code> å¿…é¡»å®ç° <code>Display</code> traitï¼Œä»¥ä¾¿èƒ½è¢«æ‰“å°ã€‚</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Display</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> longest_with_an_announcement</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> y</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> ann</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> str</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">where</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Display</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // Trait boundçº¦æŸ</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Announcement! </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> ann</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">len</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> y</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">len</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        x</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        y</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/",
            "url": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/",
            "title": "Rustæ™ºèƒ½æŒ‡é’ˆ",
            "date_published": "2025-11-01T15:24:39.000Z",
            "content_html": "<h1 id=\"æ™ºèƒ½æŒ‡é’ˆ\"><a class=\"anchor\" href=\"#æ™ºèƒ½æŒ‡é’ˆ\">#</a> æ™ºèƒ½æŒ‡é’ˆ</h1>\n<p>æ™ºèƒ½æŒ‡é’ˆï¼ˆSmart Pointersï¼‰æ˜¯ç±»ä¼¼æŒ‡é’ˆçš„æ•°æ®ç»“æ„ï¼Œä½†å®ƒä»¬å…·æœ‰é¢å¤–çš„å…ƒæ•°æ®å’ŒåŠŸèƒ½ã€‚ä¸å¼•ç”¨ï¼ˆ<code>&amp;</code>ï¼‰ä¸åŒï¼Œå¼•ç”¨ä»…å€Ÿç”¨æ•°æ®ï¼Œè€Œæ™ºèƒ½æŒ‡é’ˆé€šå¸¸æ‹¥æœ‰å®ƒä»¬æŒ‡å‘çš„æ•°æ®ã€‚</p>\n<p>å¸¸è§çš„æ™ºèƒ½æŒ‡é’ˆåŒ…æ‹¬ï¼š</p>\n<ul>\n<li><code>Box&lt;T&gt;</code></li>\n<li><code>Rc&lt;T&gt;</code></li>\n<li><code>RefCell&lt;T&gt;</code></li>\n<li><code>Ref&lt;T&gt;</code></li>\n<li><code>Mutex&lt;T&gt;</code></li>\n<li><code>Arc&lt;T&gt;</code></li>\n</ul>\n<hr />\n<h3 id=\"1-boxtåœ¨å †ä¸Šåˆ†é…æ•°æ®\"><a class=\"anchor\" href=\"#1-boxtåœ¨å †ä¸Šåˆ†é…æ•°æ®\">#</a> 1. <code>Box&lt;T&gt;</code>ï¼šåœ¨å †ä¸Šåˆ†é…æ•°æ®</h3>\n<p><code>Box&lt;T&gt;</code> æ™ºèƒ½æŒ‡é’ˆç”¨äºå°†æ•°æ®å­˜å‚¨åœ¨å †ï¼ˆHeapï¼‰ä¸Šï¼Œè€Œä¸æ˜¯æ ˆï¼ˆStackï¼‰ä¸Šã€‚å®ƒæä¾›äº†æ•°æ®çš„æ‰€æœ‰æƒï¼Œå¹¶åœ¨ <code>Box&lt;T&gt;</code> ç¦»å¼€ä½œç”¨åŸŸæ—¶è‡ªåŠ¨é‡Šæ”¾å †ä¸Šçš„æ•°æ®ã€‚ç•™åœ¨æ ˆä¸­çš„åªæ˜¯æŒ‡å‘å †æ•°æ®çš„æŒ‡é’ˆã€‚</p>\n<p><code>Box&lt;T&gt;</code> çš„ä¸€ä¸ªå¸¸è§ç”¨é€”æ˜¯æ„å»ºé€’å½’æ•°æ®ç»“æ„ï¼ˆå¦‚é“¾è¡¨ï¼‰ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ© Rust ç¡®å®šç»“æ„çš„å¤§å°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ç¤ºä¾‹ï¼šä½¿ç”¨ Box æ„å»ºé€’å½’çš„ List</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">enum</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> List</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    Cons</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">i32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Box</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">List</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    Nil</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main_box</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // b åœ¨æ ˆä¸Šï¼Œä½†å€¼ 5 åœ¨å †ä¸Š</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> b</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Box</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">new</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">5</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Boxed value: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> b</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å°† x çš„å€¼ï¼ˆ5ï¼‰å¤åˆ¶åˆ°å †ä¸Š</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> y</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Box</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">new</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">x</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">5</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ä½¿ç”¨ * è§£å¼•ç”¨æ“ä½œç¬¦æ¥è®¿é—®å †ä¸Šçš„æ•°æ®</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">5</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> *</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">y</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<hr />\n<h3 id=\"2-deref-traitè‡ªå®šä¹‰è§£å¼•ç”¨è¡Œä¸º\"><a class=\"anchor\" href=\"#2-deref-traitè‡ªå®šä¹‰è§£å¼•ç”¨è¡Œä¸º\">#</a> 2. <code>Deref</code> Traitï¼šè‡ªå®šä¹‰è§£å¼•ç”¨è¡Œä¸º</h3>\n<p><code>Deref</code> Trait å…è®¸æˆ‘ä»¬è‡ªå®šä¹‰è§£å¼•ç”¨æ“ä½œç¬¦ï¼ˆ<code>*</code>ï¼‰çš„è¡Œä¸ºï¼Œä½¿å…¶èƒ½å¤Ÿåƒå¸¸è§„æŒ‡é’ˆä¸€æ ·è¢«è§£å¼•ç”¨ã€‚</p>\n<p>å®ç° <code>Deref</code> Trait åªéœ€è¦å®ç° <code>deref</code> æ–¹æ³•ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">ops</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Deref</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// è‡ªå®šä¹‰ä¸€ä¸ªç±»ä¼¼ Box çš„ç»“æ„</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyBox</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyBox</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> new</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyBox</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        MyBox</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">x</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä¸º MyBox å®ç° Deref</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Deref</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyBox</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    type</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Target</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> deref</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">Self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Target</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // è¿”å›å…ƒç»„ç»“æ„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  (T) çš„å¼•ç”¨</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        &#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h4 id=\"deref-å¼ºåˆ¶è½¬æ¢-deref-coercion\"><a class=\"anchor\" href=\"#deref-å¼ºåˆ¶è½¬æ¢-deref-coercion\">#</a> Deref å¼ºåˆ¶è½¬æ¢ (Deref Coercion)</h4>\n<p>Deref Coercionï¼ˆè§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢ï¼‰æ˜¯ Rust çš„ä¸€é¡¹ä¾¿åˆ©ç‰¹æ€§ã€‚å¦‚æœä¸€ä¸ªç±»å‹ <code>A</code> å®ç°äº† <code>Deref&lt;Target = B&gt;</code>ï¼Œé‚£ä¹ˆ Rust ä¼šåœ¨éœ€è¦æ—¶è‡ªåŠ¨å°† <code>&amp;A</code> è½¬æ¢ä¸º <code>&amp;B</code>ã€‚</p>\n<ul>\n<li>ä¾‹å¦‚ï¼š<code>String</code> å®ç°äº† <code>Deref&lt;Target = str&gt;</code>ï¼Œæ‰€ä»¥ <code>&amp;String</code> å¯ä»¥è‡ªåŠ¨è½¬æ¢ï¼ˆå¼ºåˆ¶è½¬æ¢ï¼‰ä¸º <code>&amp;str</code>ã€‚</li>\n</ul>\n<p>è¿™åŒæ ·é€‚ç”¨äºæˆ‘ä»¬è‡ªå®šä¹‰çš„ <code>MyBox&lt;T&gt;</code>ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// (æ¥ä¸Šæ–‡ MyBox çš„å®šä¹‰)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> hello</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">name</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">str</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Hello, </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> name</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main_deref_coercion</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> m</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyBox</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">new</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Rust</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // Rust è‡ªåŠ¨æ‰§è¡Œäº† &#x26;MyBox&#x3C;String> -> &#x26;String -> &#x26;str</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    hello</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">m</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<hr />\n<h3 id=\"3-drop-traitè‡ªå®šä¹‰æ¸…ç†é€»è¾‘\"><a class=\"anchor\" href=\"#3-drop-traitè‡ªå®šä¹‰æ¸…ç†é€»è¾‘\">#</a> 3. <code>Drop</code> Traitï¼šè‡ªå®šä¹‰æ¸…ç†é€»è¾‘</h3>\n<p><code>Drop</code> Trait å…è®¸æˆ‘ä»¬åœ¨å€¼ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œè‡ªå®šä¹‰éœ€è¦æ‰§è¡Œçš„æ¸…ç†é€»è¾‘ï¼ˆç±»ä¼¼äºå…¶ä»–è¯­è¨€çš„ææ„å‡½æ•°ï¼‰ã€‚</p>\n<p>å®ç° <code>Drop</code> Trait åªéœ€è¦å®ç° <code>drop</code> æ–¹æ³•ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> CustomSmartPointer</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    data</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Drop</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> CustomSmartPointer</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> drop</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;mut</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // å®šä¹‰æ¸…ç†é€»è¾‘</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Dropping CustomSmartPointer with data `</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">`!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">data</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main_drop</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> c</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> CustomSmartPointer</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        data</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">my stuff</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> d</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> CustomSmartPointer</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        data</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">other stuff</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">CustomSmartPointers created.</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å½“ main ç»“æŸæ—¶ï¼Œå˜é‡ä¼šæŒ‰å…¶å…¥æ ˆé¡ºåºçš„é€†åºè¢« Drop</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // d å…ˆè¢« dropï¼Œç„¶å c è¢« drop</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h4 id=\"æå‰é‡Šæ”¾èµ„æº-stdmemdrop\"><a class=\"anchor\" href=\"#æå‰é‡Šæ”¾èµ„æº-stdmemdrop\">#</a> æå‰é‡Šæ”¾èµ„æº <code>std::mem::drop</code></h4>\n<p>æˆ‘ä»¬ä¸èƒ½æ‰‹åŠ¨è°ƒç”¨ <code>drop</code> æ–¹æ³•ï¼ˆä¾‹å¦‚ <code>c.drop()</code>ï¼‰ã€‚å¦‚æœéœ€è¦æå‰é‡Šæ”¾èµ„æºï¼Œå¿…é¡»ä½¿ç”¨æ ‡å‡†åº“æä¾›çš„ <code>std::mem::drop</code> å‡½æ•°ã€‚</p>\n<p><code>std::mem::drop</code> ä¼šæ¥ç®¡å€¼çš„æ‰€æœ‰æƒï¼Œå¹¶åœ¨è¯¥å‡½æ•°ç»“æŸæ—¶è‡ªåŠ¨è°ƒç”¨å…¶ <code>Drop::drop</code> æ–¹æ³•ï¼Œè¿™å¯ä»¥é˜²æ­¢åŒé‡é‡Šæ”¾ï¼ˆDouble Freeï¼‰é”™è¯¯ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// (æ¥ä¸Šæ–‡ CustomSmartPointer çš„å®šä¹‰)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main_mem_drop</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> c</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> CustomSmartPointer</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        data</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">my stuff</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">CustomSmartPointer c created.</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // æå‰é‡Šæ”¾ c</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">mem</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">drop</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">c</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">CustomSmartPointer c dropped before end of main.</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<hr />\n<h3 id=\"4-rctå¼•ç”¨è®¡æ•°\"><a class=\"anchor\" href=\"#4-rctå¼•ç”¨è®¡æ•°\">#</a> 4. <code>Rc&lt;T&gt;</code>ï¼šå¼•ç”¨è®¡æ•°</h3>\n<p><code>Rc&lt;T&gt;</code> (Reference Counting) æ˜¯ä¸€ç§å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒå…è®¸å¤šä¸ªæ‰€æœ‰è€…ï¼ˆMultiple Ownershipï¼‰å…±åŒæ‹¥æœ‰åŒä¸€ä»½å †ä¸Šçš„æ•°æ®ã€‚</p>\n<ul>\n<li>å®ƒä¼šè·Ÿè¸ªæŒ‡å‘æ•°æ®çš„å¼•ç”¨æ•°é‡ã€‚</li>\n<li>åªæœ‰å½“å¼•ç”¨è®¡æ•°å½’é›¶æ—¶ï¼Œæ•°æ®æ‰ä¼šè¢«æ¸…ç†ã€‚</li>\n<li><code>Rc&lt;T&gt;</code> <strong>åªå¯ç”¨äºå•çº¿ç¨‹åœºæ™¯</strong>ã€‚</li>\n</ul>\n<hr />\n<h3 id=\"5-refcellt-ä¸å†…éƒ¨å¯å˜æ€§\"><a class=\"anchor\" href=\"#5-refcellt-ä¸å†…éƒ¨å¯å˜æ€§\">#</a> 5. <code>RefCell&lt;T&gt;</code> ä¸å†…éƒ¨å¯å˜æ€§</h3>\n<p><code>RefCell&lt;T&gt;</code> (Reference Cell) æä¾›äº†ä¸€ç§å®ç°<strong>å†…éƒ¨å¯å˜æ€§</strong>ï¼ˆInterior Mutabilityï¼‰çš„æ¨¡å¼ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨æŒæœ‰ä¸å¯å˜å¼•ç”¨ï¼ˆ<code>&amp;T</code>ï¼‰çš„æƒ…å†µä¸‹ï¼Œä»ç„¶èƒ½å¤Ÿä¿®æ”¹å†…éƒ¨çš„æ•°æ®ã€‚</p>\n<ul>\n<li><code>RefCell&lt;T&gt;</code> <strong>åªé€‚ç”¨äºå•çº¿ç¨‹åœºæ™¯</strong>ã€‚</li>\n<li>å®ƒå¹¶ä¸ä¼šç»•è¿‡ Rust çš„å€Ÿç”¨è§„åˆ™ï¼Œè€Œæ˜¯å°†å€Ÿç”¨è§„åˆ™çš„æ£€æŸ¥ä»<strong>ç¼–è¯‘æ—¶</strong>æ¨è¿Ÿåˆ°<strong>è¿è¡Œæ—¶</strong>ã€‚</li>\n<li>é€šè¿‡ <code>borrow()</code> (è·å–ä¸å¯å˜å¼•ç”¨) å’Œ <code>borrow_mut()</code> (è·å–å¯å˜å¼•ç”¨) æ–¹æ³•åœ¨è¿è¡Œæ—¶æ£€æŸ¥å€Ÿç”¨è§„åˆ™ã€‚</li>\n<li>å¦‚æœè¿åäº†å€Ÿç”¨è§„åˆ™ï¼ˆä¾‹å¦‚ï¼ŒåŒæ—¶å­˜åœ¨å¤šä¸ªå¯å˜å€Ÿç”¨ï¼‰ï¼Œç¨‹åºå°†åœ¨è¿è¡Œæ—¶ <code>panic</code>ã€‚</li>\n</ul>\n<h4 id=\"å®è·µç¤ºä¾‹refcellt-ç”¨äºæ¨¡æ‹Ÿmocking\"><a class=\"anchor\" href=\"#å®è·µç¤ºä¾‹refcellt-ç”¨äºæ¨¡æ‹Ÿmocking\">#</a> å®è·µç¤ºä¾‹ï¼š<code>RefCell&lt;T&gt;</code> ç”¨äºæ¨¡æ‹Ÿï¼ˆMockingï¼‰</h4>\n<p>åœ¨æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¸€ä¸ªâ€œæ¨¡æ‹Ÿå¯¹è±¡â€ï¼ˆMock Objectï¼‰æ¥è®°å½•å…¶ä¸Šå‘ç”Ÿäº†å“ªäº›è°ƒç”¨ã€‚</p>\n<p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code>MockMessenger</code> éœ€è¦åœ¨ <code>send</code> æ–¹æ³•ï¼ˆè¯¥æ–¹æ³•åªæ¥æ”¶ <code>&amp;self</code>ï¼Œå³ä¸å¯å˜å¼•ç”¨ï¼‰å†…éƒ¨ä¿®æ”¹ <code>sent_messages</code> å‘é‡ã€‚<code>RefCell</code> ä½¿å¾—è¿™ç§å†…éƒ¨å¯å˜æ€§æˆä¸ºå¯èƒ½ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pub</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> trait</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Messenger</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // send æ–¹æ³•æ¥æ”¶çš„æ˜¯ä¸å¯å˜å¼•ç”¨</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> send</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> msg</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">str</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pub</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> LimitTracker</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Messenger</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    messenger</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    value</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> usize</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    max</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> usize</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> LimitTracker</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">where</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Messenger</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    pub</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> new</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">messenger</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> max</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> usize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> LimitTracker</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">a</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        LimitTracker</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">            messenger</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">            value</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">            max</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    pub</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> set_value</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;mut</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> value</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> usize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">value </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> value</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> percentage_of_max</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">value </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">as</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> f64</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> /</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">max </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">as</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> f64</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> percentage_of_max</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">0</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">            self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">messenger</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">send</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Error: You are over your quota!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> if</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> percentage_of_max</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">9</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">            self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">messenger</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">                .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">send</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Urgent warning: You've used up over 90% of your quota!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> if</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> percentage_of_max</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">75</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">            self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">messenger</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">                .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">send</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Warning: You've used up over 75% of your quota!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// --- æµ‹è¯•æ¨¡å— ---</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cfg</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">test</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">mod</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> tests</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    use</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> super</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::*</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">cell</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">RefCell</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MockMessenger</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ä½¿ç”¨ RefCell åŒ…è£…éœ€è¦â€œå†…éƒ¨å¯å˜â€çš„æ•°æ®</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        sent_messages</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> RefCell</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">String</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MockMessenger</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">        fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> new</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MockMessenger</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            MockMessenger</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">                sent_messages</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> RefCell</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">new</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">vec!</span><span style=\"color:#296aa3;--shiki-dark:#6394bf\">[</span><span style=\"color:#296aa3;--shiki-dark:#6394bf\">]</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">            </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Messenger</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MockMessenger</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // å°½ç®¡ send æ¥æ”¶çš„æ˜¯ &#x26;selfï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ä¿®æ”¹å†…éƒ¨æ•°æ®</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">        fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> send</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> msg</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">str</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">            // 1. borrow_mut() åœ¨è¿è¡Œæ—¶è·å–å¯å˜å¼•ç”¨</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">            // 2. å¦‚æœè¿åå€Ÿç”¨è§„åˆ™ï¼ˆæ¯”å¦‚å·²å­˜åœ¨å…¶ä»–å€Ÿç”¨ï¼‰ï¼Œè¿™é‡Œä¼š panic</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">            self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">sent_messages</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">borrow_mut</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">push</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">msg</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">)</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    #</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">test</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> it_sends_over_75_percent_warning_message</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> mock_messenger</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MockMessenger</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">new</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> limit_tracker</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> LimitTracker</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">new</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">mock_messenger</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 100</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        limit_tracker</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">set_value</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">80</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // 3. borrow() åœ¨è¿è¡Œæ—¶è·å–ä¸å¯å˜å¼•ç”¨</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        assert_eq!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">mock_messenger</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">sent_messages</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">borrow</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">len</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E8%BF%AD%E4%BB%A3%E5%99%A8/",
            "url": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E8%BF%AD%E4%BB%A3%E5%99%A8/",
            "title": "Rustè¿­ä»£å™¨",
            "date_published": "2025-11-01T15:24:21.000Z",
            "content_html": "<h1 id=\"rust-è¿­ä»£å™¨-iterators\"><a class=\"anchor\" href=\"#rust-è¿­ä»£å™¨-iterators\">#</a> Rust è¿­ä»£å™¨ (Iterators)</h1>\n<p>Rust çš„è¿­ä»£å™¨ï¼ˆIteratorï¼‰å…è®¸æˆ‘ä»¬å¯¹ä¸€ä¸ªåºåˆ—ï¼ˆå¦‚ <code>Vec</code>ï¼‰ä¸­çš„æ¯ä¸ªé¡¹ä¾æ¬¡æ‰§è¡ŒæŸäº›æ“ä½œã€‚</p>\n<p>è¿­ä»£å™¨ä¸€ä¸ªæ ¸å¿ƒç‰¹æ€§æ˜¯<strong>æƒ°æ€§ (Lazy)</strong>ï¼šåœ¨è°ƒç”¨â€œæ¶ˆè€—æ€§â€æ–¹æ³•ï¼ˆconsuming methodsï¼‰æ¥é©±åŠ¨è¿­ä»£å™¨ä¹‹å‰ï¼Œè¿­ä»£å™¨æœ¬èº«ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œã€‚</p>\n<h3 id=\"1-åˆ›å»ºå’Œä½¿ç”¨è¿­ä»£å™¨\"><a class=\"anchor\" href=\"#1-åˆ›å»ºå’Œä½¿ç”¨è¿­ä»£å™¨\">#</a> 1. åˆ›å»ºå’Œä½¿ç”¨è¿­ä»£å™¨</h3>\n<p>å¯ä»¥é€šè¿‡åœ¨é›†åˆï¼ˆå¦‚ <code>Vec</code>ï¼‰ä¸Šè°ƒç”¨ <code>iter()</code> æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ã€‚<code>for</code> å¾ªç¯æ˜¯ä½¿ç”¨è¿­ä»£å™¨æœ€å¸¸è§çš„æ–¹å¼ä¹‹ä¸€ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // v1.iter() åˆ›å»ºäº†ä¸€ä¸ªè¿­ä»£å™¨</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1_iter</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">iter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // for å¾ªç¯ä¼šè·å–è¿­ä»£å™¨çš„æ‰€æœ‰æƒå¹¶è‡ªåŠ¨è°ƒç”¨ next()</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> val</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> in</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1_iter</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">         // å› ä¸º .iter() äº§ç”Ÿçš„æ˜¯ä¸å¯å˜å¼•ç”¨ï¼Œæ‰€ä»¥ val çš„ç±»å‹æ˜¯ &#x26;i32</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Got: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> val</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h3 id=\"2-iterator-trait-ä¸-next-æ–¹æ³•\"><a class=\"anchor\" href=\"#2-iterator-trait-ä¸-next-æ–¹æ³•\">#</a> 2. Iterator Trait ä¸ next æ–¹æ³•</h3>\n<p>æ‰€æœ‰çš„è¿­ä»£å™¨éƒ½å®ç°äº†æ ‡å‡†åº“ä¸­çš„ <code>Iterator</code> Traitã€‚è¿™ä¸ª Trait çš„æ ¸å¿ƒæ˜¯ <code>next</code> æ–¹æ³•ã€‚</p>\n<ul>\n<li><code>next()</code> æ–¹æ³•ï¼š\n<ul>\n<li>æ¯æ¬¡è°ƒç”¨ <code>next</code> æ—¶ï¼Œå®ƒä¼šè¿”å›è¿­ä»£å™¨ä¸­çš„ä¸‹ä¸€é¡¹ï¼Œå¹¶å°†å…¶åŒ…è£…åœ¨ <code>Some(T)</code> ä¸­ã€‚</li>\n<li>å½“è¿­ä»£å™¨è€—å°½æ—¶ï¼Œå®ƒä¼šè¿”å› <code>None</code>ã€‚</li>\n</ul>\n</li>\n<li><code>next()</code> æ–¹æ³•ä¼šæ¶ˆè€—ï¼ˆæ¨è¿›ï¼‰è¿­ä»£å™¨çš„çŠ¶æ€ï¼Œå› æ­¤å¦‚æœæ‰‹åŠ¨è°ƒç”¨ <code>next</code>ï¼Œè¿­ä»£å™¨å˜é‡å¿…é¡»æ˜¯å¯å˜çš„ï¼ˆ<code>mut</code>ï¼‰ã€‚</li>\n<li><code>for</code> å¾ªç¯ä¼šè‡ªåŠ¨å¤„ç†è¿­ä»£å™¨çš„å¯å˜æ€§ã€‚</li>\n</ul>\n<p>&lt;!-- end list --&gt;</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">test</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> iterator_demonstration</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å½“æ‰‹åŠ¨è°ƒç”¨ next() æ—¶ï¼Œå¿…é¡»å°†è¿­ä»£å™¨å£°æ˜ä¸º mut</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1_iter</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">iter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // next() è¿”å›çš„æ˜¯ Option&#x3C;&#x26;T></span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">v1_iter</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">next</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Some</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">v1_iter</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">next</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Some</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">v1_iter</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">next</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Some</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">3</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">v1_iter</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">next</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Some</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">4</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">v1_iter</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">next</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Some</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">5</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">v1_iter</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">next</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> None</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h3 id=\"3-è¿­ä»£å™¨ç§ç±»-iter-iter_mut-into_iter\"><a class=\"anchor\" href=\"#3-è¿­ä»£å™¨ç§ç±»-iter-iter_mut-into_iter\">#</a> 3. è¿­ä»£å™¨ç§ç±» (iter, iter_mut, into_iter)</h3>\n<p>æ ¹æ®åˆ›å»ºæ–¹å¼çš„ä¸åŒï¼Œè¿­ä»£å™¨å¯ä»¥äº§ç”Ÿä¸åŒç±»å‹çš„é¡¹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">æ–¹æ³•</th>\n<th style=\"text-align:left\">è¿”å›çš„é¡¹</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>iter()</code></td>\n<td style=\"text-align:left\"><code>&amp;T</code></td>\n<td style=\"text-align:left\">åˆ›å»ºä¸€ä¸ªè¿”å›ä¸å¯å˜å¼•ç”¨çš„è¿­ä»£å™¨ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>iter_mut()</code></td>\n<td style=\"text-align:left\"><code>&amp;mut T</code></td>\n<td style=\"text-align:left\">åˆ›å»ºä¸€ä¸ªè¿”å›å¯å˜å¼•ç”¨çš„è¿­ä»£å™¨ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>into_iter()</code></td>\n<td style=\"text-align:left\"><code>T</code></td>\n<td style=\"text-align:left\">åˆ›å»ºä¸€ä¸ªè·å–é›†åˆæ‰€æœ‰æƒçš„è¿­ä»£å™¨ï¼Œè¿”å›é¡¹æœ¬èº«ï¼ˆ<code>T</code>ï¼‰ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"4-æ¶ˆè€—æ€§é€‚é…å™¨-consuming-adapters\"><a class=\"anchor\" href=\"#4-æ¶ˆè€—æ€§é€‚é…å™¨-consuming-adapters\">#</a> 4. æ¶ˆè€—æ€§é€‚é…å™¨ (Consuming Adapters)</h3>\n<p>æ¶ˆè€—æ€§é€‚é…å™¨ï¼ˆConsuming Adaptersï¼‰æ˜¯è¿­ä»£å™¨ä¸Šçš„æ–¹æ³•ï¼Œå®ƒä»¬ä¼šè°ƒç”¨ <code>next</code> æ¥é©±åŠ¨è¿­ä»£å™¨ï¼Œå¹¶æœ€ç»ˆæ¶ˆè€—ï¼ˆä½¿ç”¨æ‰ï¼‰å®ƒã€‚</p>\n<p><code>next</code> æ–¹æ³•æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ¶ˆè€—æ€§é€‚é…å™¨ã€‚</p>\n<p><strong>ç¤ºä¾‹ï¼š<code>sum</code></strong><br />\n<code>sum</code> æ–¹æ³•ä¼šè·å–è¿­ä»£å™¨çš„æ‰€æœ‰æƒï¼Œéå†æ‰€æœ‰å…ƒç´ å¹¶è®¡ç®—æ€»å’Œã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">test</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> iterator_sum</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1_iter</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">iter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // sum() ä¼šè·å– v1_iter çš„æ‰€æœ‰æƒå¹¶æ¶ˆè€—å®ƒ</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> total</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> i32</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v1_iter</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sum</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // è°ƒç”¨ sum ä¹‹åï¼Œv1_iter ä¸èƒ½å†è¢«ä½¿ç”¨</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">total</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 15</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p><strong>ç¤ºä¾‹ï¼š<code>collect</code></strong><br />\n<code>collect</code> æ–¹æ³•ä¼šæ¶ˆè€—è¿­ä»£å™¨ï¼Œå¹¶å°†ç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæ–°çš„é›†åˆä¸­ï¼ˆå¦‚ä¸‹æ–‡ <code>map</code> ç¤ºä¾‹æ‰€ç¤ºï¼‰ã€‚</p>\n<h3 id=\"5-è¿­ä»£å™¨é€‚é…å™¨-iterator-adapters\"><a class=\"anchor\" href=\"#5-è¿­ä»£å™¨é€‚é…å™¨-iterator-adapters\">#</a> 5. è¿­ä»£å™¨é€‚é…å™¨ (Iterator Adapters)</h3>\n<p>è¿­ä»£å™¨é€‚é…å™¨ï¼ˆIterator Adaptersï¼‰æ˜¯ <code>Iterator</code> Trait ä¸Šçš„æ–¹æ³•ï¼Œå®ƒä»¬<strong>è¿”å›ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨</strong>ã€‚å®ƒä»¬æ˜¯æƒ°æ€§çš„ï¼Œåœ¨è°ƒç”¨æ¶ˆè€—æ€§é€‚é…å™¨ä¹‹å‰ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œã€‚</p>\n<p><strong>ç¤ºä¾‹ï¼š<code>map</code></strong><br />\n<code>map</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼Œå¯¹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨è¯¥é—­åŒ…ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ–°ç»“æœçš„æ–°è¿­ä»£å™¨ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main_map</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v2</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // .iter() æ˜¯è¿­ä»£å™¨</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // .map() æ˜¯è¿­ä»£å™¨é€‚é…å™¨ (æƒ°æ€§çš„)</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // .collect() æ˜¯æ¶ˆè€—æ€§é€‚é…å™¨ (æ‰§è¡Œæ“ä½œ)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v3</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">_</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> v2</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">iter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">map</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">collect</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    assert_eq!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">v3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 6</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h3 id=\"6-ä½¿ç”¨é—­åŒ…æ•è·ç¯å¢ƒ\"><a class=\"anchor\" href=\"#6-ä½¿ç”¨é—­åŒ…æ•è·ç¯å¢ƒ\">#</a> 6. ä½¿ç”¨é—­åŒ…æ•è·ç¯å¢ƒ</h3>\n<p>è®¸å¤šè¿­ä»£å™¨é€‚é…å™¨ï¼ˆå¦‚ <code>map</code>ã€<code>filter</code>ï¼‰éƒ½æ¥æ”¶é—­åŒ…ä½œä¸ºå‚æ•°ã€‚é—­åŒ…å¯ä»¥æ•è·å…¶å®šä¹‰æ—¶æ‰€åœ¨çš„ç¯å¢ƒå˜é‡ã€‚</p>\n<p><strong>ç¤ºä¾‹ï¼š<code>filter</code></strong><br />\n<code>filter</code> æ–¹æ³•æ¥æ”¶ä¸€ä¸ªé—­åŒ…ï¼ˆè¿”å› <code>true</code> æˆ– <code>false</code>ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªåªåŒ…å«åŸè¿­ä»£å™¨ä¸­ä½¿é—­åŒ…è¿”å› <code>true</code> çš„å…ƒç´ çš„æ–°è¿­ä»£å™¨ã€‚</p>\n<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>filter</code> é—­åŒ… <code>|s| s.size == shoe_size</code> æ•è·äº† <code>shoes_in_size</code> å‡½æ•°å‚æ•°ä¸­çš„ <code>shoe_size</code> å˜é‡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">derive</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">PartialEq</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Debug</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    size</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    style</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æ‰¾å‡ºç¬¦åˆæ¡ä»¶çš„é‹å­ï¼ˆsize ç­‰äº shoe_sizeï¼‰</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> shoes_in_size</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">shoes</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> shoe_size</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    shoes</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">into_iter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è·å–æ‰€æœ‰æƒï¼Œäº§ç”Ÿ T (Shoe)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">s</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> s</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">size </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">==</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> shoe_size</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // é—­åŒ…æ•è·äº† shoe_size</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">collect</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // æ¶ˆè€—è¿­ä»£å™¨ï¼Œæ”¶é›†ç»“æœ</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cfg</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">test</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">mod</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> tests</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    use</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> super</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::*</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    #</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">test</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> filters_by_size</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> shoes</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> size</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> style</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sneaker</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> size</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 13</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> style</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sandal</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> size</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> style</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">boot</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> in_my_size</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> shoes_in_size</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">shoes</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        assert_eq!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">            in_my_size</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">            vec!</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">[</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">                Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> size</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> style</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#296aa3;--shiki-dark:#6394bf\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sneaker</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#296aa3;--shiki-dark:#6394bf\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">                Shoe</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> size</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> style</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#296aa3;--shiki-dark:#6394bf\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">boot</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#296aa3;--shiki-dark:#6394bf\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#bda437;--shiki-dark:#e6cc77\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">            </span><span style=\"color:#a13865;--shiki-dark:#d9739f\">]</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E9%97%AD%E5%8C%85/",
            "url": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E9%97%AD%E5%8C%85/",
            "title": "Rusté—­åŒ…",
            "date_published": "2025-11-01T15:24:05.000Z",
            "content_html": "<h1 id=\"rust-é—­åŒ…closure\"><a class=\"anchor\" href=\"#rust-é—­åŒ…closure\">#</a> Rust é—­åŒ…ï¼ˆClosureï¼‰</h1>\n<p>é—­åŒ…æ˜¯ä¸€ç§å¯ä»¥æ•è·å…¶ç¯å¢ƒä¸­å˜é‡çš„åŒ¿åå‡½æ•°ã€‚å®ƒåœ¨ Rust ä¸­è¢«å¹¿æ³›ç”¨äºå‡½æ•°å¼ç¼–ç¨‹ã€è¿­ä»£å™¨å¤„ç†å’Œå¹¶å‘ç¼–ç¨‹ã€‚</p>\n<p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å°†å›´ç»•ä¸€ä¸ªè¡¬è¡«åº“å­˜<code>Inventory</code>ç»“æ„å±•å¼€ï¼Œæ¼”ç¤ºé—­åŒ…åœ¨å®é™…åœºæ™¯ä¸­çš„åº”ç”¨ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">time</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Duration</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">thread</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">derive</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Debug</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> PartialEq</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Copy</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Clone</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">enum</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ShirtColor</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    Red</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    Blue</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// åº“å­˜ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘ä»¶ä¸åŒé¢œè‰²çš„è¡¬è¡«</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Inventory</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    shirts</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">ShirtColor</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Inventory</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // æ ¹æ®ç”¨æˆ·åå¥½é€‰æ‹©è¡¬è¡«é¢œè‰²ï¼Œå¦‚æœæ²¡æœ‰åå¥½åˆ™é€‰æ‹©åº“å­˜æœ€å¤šçš„é¢œè‰²</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> giveaway</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> user_preference</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Option</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">ShirtColor</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ShirtColor</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // unwrap_or_else åœ¨ user_preference ä¸º None æ—¶è°ƒç”¨é—­åŒ…</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // é—­åŒ…è¿”å›å€¼ä¸ºTï¼Œå³ most_stocked() çš„è¿”å›å€¼</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        user_preference</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">unwrap_or_else</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">||</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">most_stocked</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> most_stocked</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ShirtColor</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> red_count</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">shirts</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">iter</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|&#x26;&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">c</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> c</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Red</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">count</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> blue_count</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">shirts</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">iter</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|&#x26;&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">c</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> c</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Blue</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">            .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">count</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> red_count</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">=</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> blue_count</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Red</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Blue</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> store</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Inventory</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        shirts</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Blue</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Red</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Blue</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> user_pref1</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Some</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">ShirtColor</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Red</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> giveaway1</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> store</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">giveaway</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">user_pref1</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">        \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">User preference: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">, Given away: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        user_pref1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> giveaway1</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> user_pref2</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> None</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> giveaway2</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> store</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">giveaway</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">user_pref2</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span></span>\n<span class=\"line\"><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">        \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">User preference: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">, Given away: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        user_pref2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> giveaway2</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ... åç»­ä»£ç  ...</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>åœ¨ <code>giveaway</code> æ–¹æ³•ä¸­ï¼Œ<code>unwrap_or_else</code> æ¥å—ä¸€ä¸ªé—­åŒ… <code>|| self.most_stocked()</code>ã€‚è¿™ä¸ªé—­åŒ…æ²¡æœ‰å‚æ•°ï¼ˆç”± <code>||</code> è¡¨ç¤ºï¼‰ï¼Œå¹¶åœ¨è¢«è°ƒç”¨æ—¶æ‰§è¡Œ <code>self.most_stocked()</code>ã€‚</p>\n<hr />\n<h3 id=\"1-é—­åŒ…çš„ç±»å‹æ¨æ–­ä¸æ ‡æ³¨\"><a class=\"anchor\" href=\"#1-é—­åŒ…çš„ç±»å‹æ¨æ–­ä¸æ ‡æ³¨\">#</a> 1. é—­åŒ…çš„ç±»å‹æ¨æ–­ä¸æ ‡æ³¨</h3>\n<p>Rust ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥ä¸ºé—­åŒ…æ¨æ–­å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ... main å‡½æ•°ä¸­ ...</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 1. ä¸ºé—­åŒ…çš„å‚æ•°å’Œè¿”å›å€¼æ˜¾å¼æ ‡æ³¨ç±»å‹</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> expensive_closure</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">num</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">This is an expensive closure!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    thread</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sleep</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">Duration</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from_secs</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">2</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    num</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æ‰“å°é—­åŒ… </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> expensive_closure</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">32</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 2. ç¼–è¯‘å™¨è‡ªåŠ¨æ¨æ–­ç±»å‹</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å¿…é¡»è¦æ±‚é—­åŒ…çš„å‚æ•°ç±»å‹åœ¨ä¸Šä¸‹æ–‡ä¸­å¯ä»¥è¢«æ¨æ–­å‡ºæ¥</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> example_closure</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> |</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> s</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> example_closure</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">hello</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ç±»å‹ä¸€æ—¦è¢«æ¨æ–­ä¸º Stringï¼Œå°±ä¸èƒ½å†ä¼ å…¥å…¶ä»–ç±»å‹</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// let n = example_closure(5);</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¿™å°†å¯¼è‡´ç¼–è¯‘é”™è¯¯</span></span></code></pre>\n<h3 id=\"2-æ•è·ç¯å¢ƒå€Ÿç”¨ä¸æ‰€æœ‰æƒ\"><a class=\"anchor\" href=\"#2-æ•è·ç¯å¢ƒå€Ÿç”¨ä¸æ‰€æœ‰æƒ\">#</a> 2. æ•è·ç¯å¢ƒï¼ˆå€Ÿç”¨ä¸æ‰€æœ‰æƒï¼‰</h3>\n<p>é—­åŒ…çš„æ ¸å¿ƒç‰¹æ€§æ˜¯å®ƒå¯ä»¥æ•è·å…¶å®šä¹‰æ—¶æ‰€åœ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ã€‚æ•è·æ–¹å¼æœ‰ä¸‰ç§ï¼šä¸å¯å˜å€Ÿç”¨ã€å¯å˜å€Ÿç”¨å’Œå–å¾—æ‰€æœ‰æƒã€‚</p>\n<h4 id=\"21-ä¸å¯å˜å€Ÿç”¨-fn\"><a class=\"anchor\" href=\"#21-ä¸å¯å˜å€Ÿç”¨-fn\">#</a> 2.1. ä¸å¯å˜å€Ÿç”¨ (Fn)</h4>\n<p>é—­åŒ…é»˜è®¤ä»¥æœ€è½»é‡çš„æ–¹å¼ï¼ˆä¸å¯å˜å€Ÿç”¨ï¼‰æ•è·å˜é‡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ... main å‡½æ•°ä¸­ ...</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Before defining closure: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é—­åŒ…ä¸å¯å˜åœ°å€Ÿç”¨äº† list</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> only_borrows</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ||</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">From closure: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// è°ƒç”¨é—­åŒ…</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">only_borrows</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é—­åŒ…è°ƒç”¨åï¼Œlist ä»ç„¶å¯ç”¨</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">After calling closure: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<h4 id=\"22-å¯å˜å€Ÿç”¨-fnmut\"><a class=\"anchor\" href=\"#22-å¯å˜å€Ÿç”¨-fnmut\">#</a> 2.2. å¯å˜å€Ÿç”¨ (FnMut)</h4>\n<p>å¦‚æœé—­åŒ…éœ€è¦ä¿®æ”¹æ•è·çš„å˜é‡ï¼Œå®ƒä¼šè¿›è¡Œå¯å˜å€Ÿç”¨ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ... main å‡½æ•°ä¸­ ...</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list2</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Before defining closure: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list2</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é—­åŒ…å¯å˜åœ°å€Ÿç”¨äº† list2</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> borrows_mutably</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ||</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list2</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">push</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">7</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å¯å˜å€Ÿç”¨åœ¨é—­åŒ…è°ƒç”¨ï¼ˆborrows_mutably()ï¼‰ä¹‹å‰éƒ½æœ‰æ•ˆ</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// åœ¨æ­¤æœŸé—´ï¼ˆé—­åŒ…å®šä¹‰ååˆ°è°ƒç”¨å‰ï¼‰æ— æ³•ä½¿ç”¨è¢«å€Ÿç”¨çš„å€¼</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// println!(\"Before calling closure: &#123;:?&#125;\", list2);</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // é”™è¯¯ï¼šä¸èƒ½åœ¨å¯å˜å€Ÿç”¨æœŸé—´å†æ¬¡å€Ÿç”¨</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">borrows_mutably</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è°ƒç”¨é—­åŒ…ï¼Œå¯å˜å€Ÿç”¨åœ¨æ­¤å¤„ä½¿ç”¨</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// è°ƒç”¨é—­åŒ…ä¹‹åï¼Œå¯å˜å€Ÿç”¨ç»“æŸï¼Œåç»­å¯ä»¥æ­£å¸¸æ‰“å°</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">After calling closure: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list2</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<h4 id=\"23-å–å¾—æ‰€æœ‰æƒ-fnonce-ä¸-move\"><a class=\"anchor\" href=\"#23-å–å¾—æ‰€æœ‰æƒ-fnonce-ä¸-move\">#</a> 2.3. å–å¾—æ‰€æœ‰æƒ (FnOnce ä¸ <code>move</code>)</h4>\n<p>ä½¿ç”¨ <code>move</code> å…³é”®å­—å¯ä»¥å¼ºåˆ¶é—­åŒ…è·å–å…¶ä½¿ç”¨çš„å€¼ï¼ˆæ•è·çš„å€¼ï¼‰çš„æ‰€æœ‰æƒã€‚è¿™åœ¨å¹¶å‘ç¼–ç¨‹ä¸­å°¤å…¶é‡è¦ï¼Œä¾‹å¦‚å°†å˜é‡ä¼ é€’ç»™æ–°çº¿ç¨‹ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ... main å‡½æ•°ä¸­ ...</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list3</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Before defining closure: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list3</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// åœ¨é—­åŒ…å®šä¹‰å‰åŠ  moveï¼Œè¡¨ç¤ºé—­åŒ…å–å¾— list3 çš„æ‰€æœ‰æƒ</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">thread</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">spawn</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">move</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ||</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">From thread: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list3</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">join</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">unwrap</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// list3 çš„æ‰€æœ‰æƒå·²è¢«ç§»åŠ¨åˆ°çº¿ç¨‹ä¸­ï¼Œä¸»çº¿ç¨‹æ— æ³•å†è®¿é—®</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// println!(\"After thread: &#123;:?&#125;\", list3);</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // é”™è¯¯ï¼švalue borrowed here after move</span></span></code></pre>\n<p><em>æ³¨æ„ï¼šæ–°çº¿ç¨‹æ•è·ä¸»çº¿ç¨‹çš„å€¼æ—¶ï¼Œé€šå¸¸å¿…é¡»è·å–æ‰€æœ‰æƒï¼ˆä½¿ç”¨ <code>move</code>ï¼‰ï¼Œå¦åˆ™å¯èƒ½åœ¨ä¸»çº¿ç¨‹ç»“æŸåï¼Œæ–°çº¿ç¨‹æŒæœ‰çš„å¼•ç”¨å˜æˆæ‚¬å‚å¼•ç”¨ã€‚</em></p>\n<hr />\n<h3 id=\"3-é—­åŒ…çš„-traitfn-fnmut-fnonce\"><a class=\"anchor\" href=\"#3-é—­åŒ…çš„-traitfn-fnmut-fnonce\">#</a> 3. é—­åŒ…çš„ Traitï¼š<code>Fn</code>ã€<code>FnMut</code>ã€<code>FnOnce</code></h3>\n<p>Rust æ ¹æ®é—­åŒ…å¦‚ä½•æ•è·å’Œä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œè‡ªåŠ¨ä¸ºå…¶å®ç°ä¸€ä¸ªæˆ–å¤šä¸ª <code>Fn</code> Traitï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Trait</th>\n<th style=\"text-align:left\">æ•è·æ–¹å¼</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>FnOnce</code></td>\n<td style=\"text-align:left\">å–å¾—æ‰€æœ‰æƒ</td>\n<td style=\"text-align:left\">é—­åŒ…å¿…é¡»è¢«è°ƒç”¨ï¼ˆæ¶ˆè´¹ï¼‰ä¸€æ¬¡ã€‚æ‰€æœ‰é—­åŒ…éƒ½è‡³å°‘å®ç°äº† <code>FnOnce</code>ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>FnMut</code></td>\n<td style=\"text-align:left\">å¯å˜å€Ÿç”¨</td>\n<td style=\"text-align:left\">é—­åŒ…å¯ä»¥ä¿®æ”¹æ•è·çš„å˜é‡ï¼Œå¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><code>Fn</code></td>\n<td style=\"text-align:left\">ä¸å¯å˜å€Ÿç”¨</td>\n<td style=\"text-align:left\">é—­åŒ…ä¸èƒ½ä¿®æ”¹æ•è·çš„å˜é‡ï¼Œå¯ä»¥è¢«è°ƒç”¨å¤šæ¬¡ã€‚</td>\n</tr>\n</tbody>\n</table>\n<p><em>ç»§æ‰¿å…³ç³»ï¼š<code>Fn</code> ç»§æ‰¿è‡ª <code>FnMut</code>ï¼Œ<code>FnMut</code> ç»§æ‰¿è‡ª <code>FnOnce</code>ã€‚</em></p>\n<p><code>Option&lt;T&gt;</code> çš„ <code>unwrap_or_else</code> æ–¹æ³•çš„ç­¾åå±•ç¤ºäº† <code>FnOnce</code> çš„åº”ç”¨ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// impl&#x3C;T> Option&#x3C;T> &#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//     pub fn unwrap_or_else&#x3C;F>(self, f: F) -> T</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//     where</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//         F: FnOnce() -> T,</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¦æ±‚Få®ç°FnOnceï¼Œè¡¨ç¤ºé—­åŒ…å¯ä»¥è¢«è°ƒç”¨ä¸€æ¬¡</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//     &#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//         match self &#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//             Some(val) => val,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//             None => f(),</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // åªæœ‰åœ¨Noneçš„æƒ…å†µä¸‹æ‰è°ƒç”¨é—­åŒ…f</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//         &#125;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//     &#125;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// &#125;</span></span></code></pre>\n<h3 id=\"4-fnmut-ä¸-sort_by_key-ç¤ºä¾‹\"><a class=\"anchor\" href=\"#4-fnmut-ä¸-sort_by_key-ç¤ºä¾‹\">#</a> 4. <code>FnMut</code> ä¸ <code>sort_by_key</code> ç¤ºä¾‹</h3>\n<p><code>sort_by_key</code> æ–¹æ³•éœ€è¦ä¸€ä¸ªå®ç°äº† <code>FnMut</code> çš„é—­åŒ…ï¼Œå› ä¸ºå®ƒåœ¨æ’åºè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦å¤šæ¬¡è°ƒç”¨é—­åŒ…æ¥è·å–é”®å€¼ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">derive</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Debug</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Rectangle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    width</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    height</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ... main å‡½æ•°ä¸­ ...</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list_rect</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    Rectangle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> width</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> height</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    Rectangle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> width</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 20</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> height</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    Rectangle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> width</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 30</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> height</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 15</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é—­åŒ… |r| r.width å®ç°äº† FnMut (å®é™…ä¸Šä¹Ÿå®ç°äº† Fn)</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">list_rect</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sort_by_key</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">r</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> r</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">width</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Sorted by width: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> list_rect</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// --- æ¼”ç¤º FnMut ---</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> sort_operations</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> value</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">closure called</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // ç¨åå°†è¢«å…‹éš†</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> num_sort_operations</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // å°†è¢«å¯å˜å€Ÿç”¨</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">list_rect</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sort_by_key</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">r</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // é—­åŒ…å†…éƒ¨ä¿®æ”¹äº†æ•è·çš„å˜é‡ num_sort_operationsï¼Œå› æ­¤å®ƒå¿…é¡»æ˜¯ FnMut</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    sort_operations</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">push</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">value</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">clone</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // value è¢«å…‹éš†ï¼Œæ‰€æœ‰æƒæœªç§»åŠ¨</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    num_sort_operations</span><span style=\"color:#999999;--shiki-dark:#666666\"> +=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    r</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">width</span></span>\n<span class=\"line\"><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">println!</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Sort operations: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">, Count: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> sort_operations</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">len</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> num_sort_operations</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E5%B7%A5%E5%85%B7%E9%93%BE%E7%AE%A1%E7%90%86/",
            "url": "https://haoruanwn.github.io/2025/11/01/Programming/Rust/Rust%E5%B7%A5%E5%85%B7%E9%93%BE%E7%AE%A1%E7%90%86/",
            "title": "Rustå·¥å…·é“¾ç®¡ç†",
            "date_published": "2025-11-01T15:22:23.000Z",
            "content_html": "<h1 id=\"rustå·¥å…·é“¾ç®¡ç†\"><a class=\"anchor\" href=\"#rustå·¥å…·é“¾ç®¡ç†\">#</a> rustå·¥å…·é“¾ç®¡ç†</h1>\n<p>åœ¨ Rust å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ <code>stable</code>ï¼ˆç¨³å®šç‰ˆï¼‰å’Œ <code>nightly</code>ï¼ˆæ¯å¤œæ„å»ºç‰ˆï¼‰å·¥å…·é“¾ä¹‹é—´åˆ‡æ¢ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦ä½¿ç”¨å°šæœªç¨³å®šçš„æ–°ç‰¹æ€§æ—¶ã€‚å¦‚æœä¸ºæ¯ä¸ªé¡¹ç›®æ‰‹åŠ¨åˆ‡æ¢å…¨å±€å·¥å…·é“¾ï¼Œä¼šéå¸¸ç¹çä¸”å®¹æ˜“å‡ºé”™ã€‚<code>rustup</code> æä¾›äº†å¼ºå¤§ä¸”ä¼˜é›…çš„æœºåˆ¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>\n<h3 id=\"1-æ ¸å¿ƒå·¥å…·rustup\"><a class=\"anchor\" href=\"#1-æ ¸å¿ƒå·¥å…·rustup\">#</a> 1. æ ¸å¿ƒå·¥å…·ï¼š<code>rustup</code></h3>\n<p><code>rustup</code> æ˜¯ Rust çš„å®˜æ–¹å·¥å…·é“¾ç®¡ç†å™¨ã€‚æˆ‘ä»¬æ‰€æœ‰çš„ç®¡ç†æ“ä½œéƒ½å›´ç»•å®ƒè¿›è¡Œã€‚</p>\n<h3 id=\"2-æ‰‹åŠ¨ç®¡ç†å…¨å±€ä¸ä¸´æ—¶\"><a class=\"anchor\" href=\"#2-æ‰‹åŠ¨ç®¡ç†å…¨å±€ä¸ä¸´æ—¶\">#</a> 2. æ‰‹åŠ¨ç®¡ç†ï¼ˆå…¨å±€ä¸ä¸´æ—¶ï¼‰</h3>\n<h4 id=\"21-å®‰è£…ä¸æŸ¥çœ‹å·¥å…·é“¾\"><a class=\"anchor\" href=\"#21-å®‰è£…ä¸æŸ¥çœ‹å·¥å…·é“¾\">#</a> 2.1. å®‰è£…ä¸æŸ¥çœ‹å·¥å…·é“¾</h4>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å®‰è£… stable (ç¨³å®šç‰ˆ)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rustup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> stable</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å®‰è£… nightly (æ¯å¤œæ„å»ºç‰ˆ)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rustup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nightly</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æŸ¥çœ‹æ‰€æœ‰å·²å®‰è£…çš„å·¥å…·é“¾</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rustup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> toolchain</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> list</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¾“å‡ºç¤ºä¾‹:</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># stable-x86_64-apple-darwin (default)</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># nightly-x86_64-apple-darwin</span></span></code></pre>\n<h4 id=\"22-åˆ‡æ¢å…¨å±€é»˜è®¤ç‰ˆæœ¬\"><a class=\"anchor\" href=\"#22-åˆ‡æ¢å…¨å±€é»˜è®¤ç‰ˆæœ¬\">#</a> 2.2. åˆ‡æ¢å…¨å±€é»˜è®¤ç‰ˆæœ¬</h4>\n<p>è¿™ä¸ªå‘½ä»¤ä¼šæ”¹å˜ä½ ç³»ç»Ÿä¸Šæ‰€æœ‰é¡¹ç›®çš„<strong>é»˜è®¤</strong>å·¥å…·é“¾ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å°†å…¨å±€é»˜è®¤åˆ‡æ¢ä¸º nightly</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rustup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nightly</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å†åˆ‡æ¢å› stable</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rustup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> default</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> stable</span></span></code></pre>\n<h4 id=\"23-ä¸´æ—¶å•æ¬¡è¦†ç›–\"><a class=\"anchor\" href=\"#23-ä¸´æ—¶å•æ¬¡è¦†ç›–\">#</a> 2.3. ä¸´æ—¶å•æ¬¡è¦†ç›–</h4>\n<p>å¯ä»¥ä½¿ç”¨ <code>+</code> è¯­æ³•ï¼Œä¸´æ—¶ä¸º<strong>å•æ¡å‘½ä»¤</strong>æŒ‡å®šå·¥å…·é“¾ï¼Œè€Œä¸æ”¹å˜å…¨å±€é»˜è®¤å€¼ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ä»…æœ¬æ¬¡ build ä½¿ç”¨ nightly</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cargo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> +nightly</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ä»…æœ¬æ¬¡ test ä½¿ç”¨ stable</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cargo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> +stable</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> test</span></span></code></pre>\n<hr />\n<h3 id=\"3-é¡¹ç›®çº§è‡ªåŠ¨è¦†ç›–\"><a class=\"anchor\" href=\"#3-é¡¹ç›®çº§è‡ªåŠ¨è¦†ç›–\">#</a> 3. é¡¹ç›®çº§è‡ªåŠ¨è¦†ç›–</h3>\n<p><strong>åœ¨é¡¹ç›®é…ç½®ä¸­å®šä¹‰æ‰€ç”¨çš„ Rust ç‰ˆæœ¬ã€‚</strong></p>\n<p><code>rustup</code> åœ¨æ‰§è¡Œ <code>cargo</code> æˆ– <code>rustc</code> æ—¶ï¼Œä¼šè‡ªåŠ¨ä»å½“å‰ç›®å½•å‘ä¸ŠæŸ¥æ‰¾åä¸º <code>rust-toolchain</code> æˆ– <code>rust-toolchain.toml</code> çš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœæ‰¾åˆ°ï¼Œå®ƒå°†<strong>è‡ªåŠ¨ä½¿ç”¨è¯¥æ–‡ä»¶æŒ‡å®šçš„å·¥å…·é“¾</strong>ï¼Œå®Œå…¨è¦†ç›–å…¨å±€é»˜è®¤è®¾ç½®ã€‚</p>\n<h4 id=\"æ–¹å¼ä¸€ä½¿ç”¨-rustup-override\"><a class=\"anchor\" href=\"#æ–¹å¼ä¸€ä½¿ç”¨-rustup-override\">#</a> æ–¹å¼ä¸€ï¼šä½¿ç”¨ <code>rustup override</code></h4>\n<ol>\n<li>\n<p>è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">cd</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /path/to/my-nightly-project</span></span></code></pre>\n</li>\n<li>\n<p>æ‰§è¡Œ <code>override</code> å‘½ä»¤ï¼Œå£°æ˜æ­¤ç›®å½•ä½¿ç”¨ <code>nightly</code>ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rustup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> override</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> set</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> nightly</span></span></code></pre>\n</li>\n<li>\n<p><code>rustup</code> ä¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>rust-toolchain</code> çš„æ–‡ä»¶ï¼Œå†…å®¹ä»…ä¸€è¡Œï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">nightly</span></span></code></pre>\n</li>\n<li>\n<p>ç°åœ¨ï¼Œåªè¦ç»ˆç«¯ä½äºæ­¤ç›®å½•ï¼ˆæˆ–å…¶å­ç›®å½•ï¼‰ä¸‹ï¼Œæ‰§è¡Œ <code>cargo build</code> æˆ– <code>rustc --version</code> éƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨ <code>nightly</code> å·¥å…·é“¾ã€‚å½“ä½ ç¦»å¼€è¿™ä¸ªç›®å½•ï¼Œ<code>rustup</code> ä¼šè‡ªåŠ¨ç”¨å›å…¨å±€é»˜è®¤ï¼ˆå¦‚ <code>stable</code>ï¼‰å·¥å…·é“¾ã€‚</p>\n</li>\n</ol>\n<p><strong>é‡è¦</strong>ï¼š<code>rust-toolchain</code> æ–‡ä»¶åº”è¯¥<strong>æäº¤åˆ° Git ä»“åº“</strong>ã€‚è¿™å¯ä»¥ä¿è¯æ‰€æœ‰åä½œè€…å’Œ CI/CD æœåŠ¡å™¨éƒ½èƒ½è‡ªåŠ¨ä½¿ç”¨å®Œå…¨ä¸€è‡´çš„å·¥å…·é“¾ï¼Œå®ç°å¯å¤ç°æ„å»ºã€‚</p>\n<ul>\n<li>\n<p><strong>å–æ¶ˆè¦†ç›–</strong>ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># è¿™ä¼šåˆ é™¤ rust-toolchain æ–‡ä»¶</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rustup</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> override</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> unset</span></span></code></pre>\n</li>\n</ul>\n<h4 id=\"æ–¹å¼äºŒæ‰‹åŠ¨åˆ›å»º-rust-toolchaintoml\"><a class=\"anchor\" href=\"#æ–¹å¼äºŒæ‰‹åŠ¨åˆ›å»º-rust-toolchaintoml\">#</a> æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»º <code>rust-toolchain.toml</code></h4>\n<p>å¯ä»¥æ‰‹åŠ¨åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>rust-toolchain.toml</code> æ–‡ä»¶ï¼ˆè¿™æ˜¯ <code>rust-toolchain</code> æ–‡ä»¶çš„ç°ä»£ TOML æ ¼å¼ç‰ˆæœ¬ï¼‰ï¼Œå®ƒæä¾›äº†æ›´ä¸°å¯Œçš„é…ç½®é€‰é¡¹ã€‚</p>\n<p><strong>ç¤ºä¾‹ <code>rust-toolchain.toml</code>ï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-toml\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#59873A;--shiki-dark:#80A665\">toolchain</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 1. æŒ‡å®šé€šé“</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">channel</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">nightly</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 2. (å¯é€‰) ç¡®ä¿ç‰¹å®šç»„ä»¶è¢«è‡ªåŠ¨å®‰è£…</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åœ¨ CI æˆ–æ–°ç¯å¢ƒä¸­éå¸¸æœ‰ç”¨</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">components</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">clippy</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">rustfmt</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># 3. (å¯é€‰) è‡ªåŠ¨å®‰è£…æŒ‡å®šçš„ç›®æ ‡å¹³å°</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åµŒå…¥å¼å¼€å‘åˆ©å™¨</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># targets = [ \"thumbv7em-none-eabihf\" ]</span></span></code></pre>\n<p><strong>é”å®šç‰¹å®šç‰ˆæœ¬</strong></p>\n<p>ä¸ºäº†é˜²æ­¢ <code>nightly</code> çš„æ—¥å¸¸æ›´æ–°ç ´åä½ çš„æ„å»ºï¼Œå¯ä»¥é”å®šåˆ°ä¸€ä¸ªå·²çŸ¥å¯ç”¨çš„ç‰¹å®šæ—¥æœŸç‰ˆæœ¬ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-toml\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#59873A;--shiki-dark:#80A665\">toolchain</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é”å®šåˆ° 2025 å¹´ 10 æœˆ 20 æ—¥çš„ nightly ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">channel</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">nightly-2025-10-20</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span></span></code></pre>\n<h3 id=\"4-æ€»ç»“\"><a class=\"anchor\" href=\"#4-æ€»ç»“\">#</a> 4. æ€»ç»“</h3>\n<ul>\n<li><strong>é¿å…ä½¿ç”¨ <code>rustup default</code></strong> æ¥ç®¡ç†é¡¹ç›®é—´çš„åˆ‡æ¢ã€‚å®ƒåªåº”è¯¥ç”¨æ¥è®¾ç½®ä½ ä¸ªäººçš„â€œé»˜è®¤â€åå¥½ã€‚</li>\n<li>å¯¹äºä»»ä½•éœ€è¦ç‰¹å®šï¼ˆé <code>stable</code>ï¼‰å·¥å…·é“¾çš„é¡¹ç›®ï¼Œ<strong>ä¸€å¾‹ä½¿ç”¨ <code>rustup override set</code> æˆ–åˆ›å»º <code>rust-toolchain.toml</code> æ–‡ä»¶</strong>ã€‚</li>\n<li>è¿™å¥—åŸºäºç›®å½•çš„è¦†ç›–æœºåˆ¶ï¼Œæ˜¯ Rust ä¿è¯é¡¹ç›®ç¯å¢ƒä¸€è‡´æ€§ã€å®ç°å¯å¤ç°æ„å»ºçš„å·¥ç¨‹åŒ–åŸºçŸ³ã€‚</li>\n</ul>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/09/07/Programming/C++/%E7%8E%B0%E4%BB%A3C-%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/",
            "url": "https://haoruanwn.github.io/2025/09/07/Programming/C++/%E7%8E%B0%E4%BB%A3C-%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/",
            "title": "ç°ä»£C++å¼ºåˆ¶ç±»å‹è½¬æ¢",
            "date_published": "2025-09-06T16:13:19.000Z",
            "content_html": "<h1 id=\"ç°ä»£cå¼ºåˆ¶ç±»å‹è½¬æ¢\"><a class=\"anchor\" href=\"#ç°ä»£cå¼ºåˆ¶ç±»å‹è½¬æ¢\">#</a> ç°ä»£C++å¼ºåˆ¶ç±»å‹è½¬æ¢</h1>\n<p>åœ¨C++ä¸­ï¼Œæä¾›äº†å››ç§ç‰¹å®šçš„å¼ºåˆ¶ç±»å‹è½¬æ¢æ“ä½œç¬¦ï¼Œä»¥æä¾›æ›´å®‰å…¨ã€æ›´æ˜ç¡®çš„ç±»å‹è½¬æ¢ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ <code>static_cast</code>ã€<code>dynamic_cast</code>ã€<code>const_cast</code> å’Œ <code>reinterpret_cast</code>ã€‚</p>\n<h2 id=\"static_castç”¨äºè‰¯æ€§å’Œç›¸å…³çš„è½¬æ¢\"><a class=\"anchor\" href=\"#static_castç”¨äºè‰¯æ€§å’Œç›¸å…³çš„è½¬æ¢\">#</a> <code>static_cast</code>ï¼šç”¨äºâ€œè‰¯æ€§â€å’Œâ€œç›¸å…³â€çš„è½¬æ¢</h2>\n<p><code>static_cast</code> åœ¨ç¼–è¯‘æœŸè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå¦‚æœè½¬æ¢åœ¨ç¼–è¯‘æœŸè¢«è®¤ä¸ºæ˜¯æ— æ•ˆçš„ï¼Œåˆ™ä¼šå¼•å‘é”™è¯¯ã€‚å®ƒé€‚ç”¨äºå¤§éƒ¨åˆ†è‰¯æ€§çš„ã€æœ‰é€»è¾‘å…³è”çš„ç±»å‹è½¬æ¢ã€‚</p>\n<h4 id=\"æ ¸å¿ƒç‰¹ç‚¹\"><a class=\"anchor\" href=\"#æ ¸å¿ƒç‰¹ç‚¹\">#</a> æ ¸å¿ƒç‰¹ç‚¹</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>è½¬æ¢æ—¶æœº</strong></td>\n<td style=\"text-align:left\">ç¼–è¯‘æœŸ (Compile-time)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å®‰å…¨æ€§</strong></td>\n<td style=\"text-align:left\">éƒ¨åˆ†å®‰å…¨ã€‚ç¼–è¯‘æœŸä¼šæ£€æŸ¥ç±»å‹æ˜¯å¦ç›¸å…³ï¼Œä½†ä¸è¿›è¡Œè¿è¡Œæ—¶æ£€æŸ¥ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å¼€é”€</strong></td>\n<td style=\"text-align:left\">æ— è¿è¡Œæ—¶å¼€é”€ï¼Œä¸Cé£æ ¼è½¬æ¢ç›¸å½“ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ä¸»è¦ç”¨é€”\"><a class=\"anchor\" href=\"#ä¸»è¦ç”¨é€”\">#</a> ä¸»è¦ç”¨é€”</h4>\n<ol>\n<li>\n<p><strong>åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢</strong><br />\né€‚ç”¨äºæ•°å€¼ç±»å‹ä¹‹é—´çš„è½¬æ¢ï¼Œå¦‚ <code>int</code> åˆ° <code>double</code>ï¼Œæˆ–è€… <code>enum</code> åˆ° <code>int</code>ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">double</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> pi </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3.14159</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> truncated_pi </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> static_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">pi</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // ç»“æœä¸º 3</span></span></code></pre>\n</li>\n<li>\n<p><strong>æœ‰ç»§æ‰¿å…³ç³»çš„ç±»æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢</strong></p>\n<ul>\n<li><strong>å‘ä¸Šè½¬å‹ (Upcasting)</strong>ï¼šå°†æ´¾ç”Ÿç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºåŸºç±»ï¼Œè¿™æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºæ´¾ç”Ÿç±»åŒ…å«äº†åŸºç±»çš„æ‰€æœ‰æˆå‘˜ã€‚</li>\n<li><strong>å‘ä¸‹è½¬å‹ (Downcasting)</strong>ï¼šå°†åŸºç±»çš„æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºæ´¾ç”Ÿç±»ã€‚è¿™æ˜¯ <strong>ä¸å®‰å…¨</strong> çš„ï¼Œå› ä¸ºå®ƒä¸è¿›è¡Œè¿è¡Œæ—¶æ£€æŸ¥æ¥ç¡®ä¿åŸºç±»æŒ‡é’ˆç¡®å®æŒ‡å‘ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡ã€‚å¦‚æœè½¬æ¢é”™è¯¯ï¼Œå°†å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Base</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Derived</span><span style=\"color:#999999;--shiki-dark:#666666\"> :</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> public</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Base</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Derived d</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å‘ä¸Šè½¬å‹ï¼šå®‰å…¨</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Base</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> b_ptr </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> static_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Base</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">d</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å‘ä¸‹è½¬å‹ï¼šä¸å®‰å…¨ï¼Œç¨‹åºå‘˜å¿…é¡»ç¡®ä¿ b_ptr ç¡®å®æŒ‡å‘ä¸€ä¸ª Derived å¯¹è±¡</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Derived</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> d_ptr </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> static_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Derived</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">b_ptr</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n</li>\n<li>\n<p><strong>å°†<code>void*</code>æŒ‡é’ˆè½¬æ¢ä¸ºå…·ä½“ç±»å‹æŒ‡é’ˆ</strong><br />\n<code>static_cast</code> å¯ä»¥å°† <code>void*</code> æŒ‡é’ˆè½¬å›å…¶åŸå§‹æˆ–å…¼å®¹çš„ç±»å‹ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> p </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> malloc</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">10</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> int_p </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> static_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">p</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">free</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">int_p</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n</li>\n</ol>\n<h2 id=\"dynamic_castç”¨äºå®‰å…¨çš„å‘ä¸‹è½¬å‹\"><a class=\"anchor\" href=\"#dynamic_castç”¨äºå®‰å…¨çš„å‘ä¸‹è½¬å‹\">#</a> <code>dynamic_cast</code>ï¼šç”¨äºâ€œå®‰å…¨â€çš„å‘ä¸‹è½¬å‹</h2>\n<p><code>dynamic_cast</code> ä¸“é—¨ç”¨äºå¤„ç†æ¶‰åŠ<strong>å¤šæ€</strong>ï¼ˆpolymorphismï¼‰çš„ç±»å±‚æ¬¡ç»“æ„ä¸­çš„ç±»å‹è½¬æ¢ã€‚å®ƒåœ¨<strong>è¿è¡Œæ—¶</strong>è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä»¥ç¡®ä¿è½¬æ¢çš„å®‰å…¨æ€§ã€‚</p>\n<h4 id=\"æ ¸å¿ƒç‰¹ç‚¹-2\"><a class=\"anchor\" href=\"#æ ¸å¿ƒç‰¹ç‚¹-2\">#</a> æ ¸å¿ƒç‰¹ç‚¹</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>è½¬æ¢æ—¶æœº</strong></td>\n<td style=\"text-align:left\">è¿è¡Œæ—¶ (Run-time)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å®‰å…¨æ€§</strong></td>\n<td style=\"text-align:left\">å®‰å…¨ã€‚é€šè¿‡è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ (RTTI) æ£€æŸ¥è½¬æ¢çš„æœ‰æ•ˆæ€§ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å¼€é”€</strong></td>\n<td style=\"text-align:left\">æœ‰è¿è¡Œæ—¶å¼€é”€ï¼Œæ¯” <code>static_cast</code> æ…¢ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å‰ææ¡ä»¶</strong></td>\n<td style=\"text-align:left\">åªèƒ½ç”¨äºåŒ…å«è™šå‡½æ•°ï¼ˆvirtual functionï¼‰çš„ç±»ï¼Œå³å¤šæ€ç±»ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ä¸»è¦ç”¨é€”-2\"><a class=\"anchor\" href=\"#ä¸»è¦ç”¨é€”-2\">#</a> ä¸»è¦ç”¨é€”</h4>\n<ul>\n<li>\n<p><strong>å®‰å…¨çš„å‘ä¸‹è½¬å‹</strong>ï¼šåœ¨ç±»ç»§æ‰¿ç»“æ„ä¸­ï¼Œå®‰å…¨åœ°å°†åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨è½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆæˆ–å¼•ç”¨ã€‚</p>\n</li>\n<li>\n<p><strong>è½¬æ¢å¤±è´¥çš„å¤„ç†</strong>ï¼š</p>\n<ul>\n<li>å¯¹äºæŒ‡é’ˆç±»å‹ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œå®ƒä¼šè¿”å› <code>nullptr</code>ã€‚</li>\n<li>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œå®ƒä¼šæŠ›å‡º <code>std::bad_cast</code> å¼‚å¸¸ã€‚</li>\n</ul>\n</li>\n</ul>\n<p>&lt;!-- end list --&gt;</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Base</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> public</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> virtual</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ~</span><span style=\"color:#59873A;--shiki-dark:#80A665\">Base</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // å¿…é¡»æœ‰è™šå‡½æ•°</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Derived</span><span style=\"color:#999999;--shiki-dark:#666666\"> :</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> public</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Base</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> public</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> derived_only_func</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Another</span><span style=\"color:#999999;--shiki-dark:#666666\"> :</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> public</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Base</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> process</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Base</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> b_ptr</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å°è¯•å°†åŸºç±»æŒ‡é’ˆå®‰å…¨åœ°è½¬æ¢ä¸ºæ´¾ç”Ÿç±»æŒ‡é’ˆ</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Derived</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> d_ptr </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> dynamic_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Derived</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">b_ptr</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // è½¬æ¢æˆåŠŸï¼Œb_ptr ç¡®å®æŒ‡å‘ä¸€ä¸ª Derived æˆ–å…¶å­ç±»çš„å¯¹è±¡</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        d_ptr</span><span style=\"color:#999999;--shiki-dark:#666666\">-</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\">derived_only_func</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // è½¬æ¢å¤±è´¥ï¼Œb_ptr æŒ‡å‘çš„ä¸æ˜¯ Derived å¯¹è±¡</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // åœ¨è¿™é‡Œå®‰å…¨åœ°å¤„ç†å…¶ä»–æƒ…å†µ</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h2 id=\"const_castç”¨äºç§»é™¤-const-æˆ–-volatile-å±æ€§\"><a class=\"anchor\" href=\"#const_castç”¨äºç§»é™¤-const-æˆ–-volatile-å±æ€§\">#</a> <code>const_cast</code>ï¼šç”¨äºç§»é™¤ <code>const</code> æˆ– <code>volatile</code> å±æ€§</h2>\n<p><code>const_cast</code> æ˜¯å”¯ä¸€èƒ½ä¿®æ”¹ç±»å‹çš„ <code>const</code> æˆ– <code>volatile</code> é™å®šç¬¦çš„è½¬æ¢ç¬¦ã€‚å®ƒçš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯ä¸ä¸€äº›æ—§çš„ã€æœªæ­£ç¡®ä½¿ç”¨ <code>const</code> çš„APIäº¤äº’ã€‚</p>\n<h4 id=\"æ ¸å¿ƒç‰¹ç‚¹-3\"><a class=\"anchor\" href=\"#æ ¸å¿ƒç‰¹ç‚¹-3\">#</a> æ ¸å¿ƒç‰¹ç‚¹</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>è½¬æ¢æ—¶æœº</strong></td>\n<td style=\"text-align:left\">ç¼–è¯‘æœŸ (Compile-time)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å®‰å…¨æ€§</strong></td>\n<td style=\"text-align:left\">ä¸å®‰å…¨ã€‚å¦‚æœè¯•å›¾é€šè¿‡ <code>const_cast</code> ç§»é™¤ <code>const</code> åå»ä¿®æ”¹ä¸€ä¸ªæœ¬èº«è¢«å®šä¹‰ä¸º <code>const</code> çš„å¯¹è±¡ï¼Œå°†å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å¼€é”€</strong></td>\n<td style=\"text-align:left\">æ— è¿è¡Œæ—¶å¼€é”€ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ä¸»è¦ç”¨é€”-3\"><a class=\"anchor\" href=\"#ä¸»è¦ç”¨é€”-3\">#</a> ä¸»è¦ç”¨é€”</h4>\n<ul>\n<li><strong>ç§»é™¤ <code>const</code></strong>ï¼šå°† <code>const</code> æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢ä¸ºé <code>const</code> æŒ‡é’ˆ/å¼•ç”¨ã€‚</li>\n<li><strong>æ·»åŠ  <code>const</code></strong>ï¼šå°†é <code>const</code> æŒ‡é’ˆ/å¼•ç”¨è½¬æ¢ä¸º <code>const</code> æŒ‡é’ˆ/å¼•ç”¨ã€‚</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä¸€ä¸ªè€æ—§çš„Cé£æ ¼APIï¼Œå®ƒä¸ä¼šä¿®æ”¹æ•°æ®ï¼Œä½†å‚æ•°ä¸æ˜¯ const</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> legacy_c_api</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">char*</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> str</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ...</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> call_legacy_api</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    const</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> char*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> my_str </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">hello</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // my_str æ˜¯ constï¼Œä¸èƒ½ç›´æ¥ä¼ é€’ç»™ legacy_c_api</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // æˆ‘ä»¬ç¡®ä¿¡ API ä¸ä¼šä¿®æ”¹å®ƒï¼Œå› æ­¤ä½¿ç”¨ const_cast</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    legacy_c_api</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">char*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">my_str</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p><strong>è­¦å‘Š</strong>ï¼šåªæœ‰å½“ä½ çŸ¥é“è¢«è½¬æ¢çš„å¯¹è±¡æœ€åˆä¸æ˜¯ <code>const</code> æ—¶ï¼Œæ‰èƒ½å®‰å…¨åœ°é€šè¿‡ <code>const_cast</code> åçš„æŒ‡é’ˆä¿®æ”¹å®ƒã€‚</p>\n<h2 id=\"reinterpret_castç”¨äºå¤„ç†æ— å…³ç±»å‹çš„è½¬æ¢\"><a class=\"anchor\" href=\"#reinterpret_castç”¨äºå¤„ç†æ— å…³ç±»å‹çš„è½¬æ¢\">#</a> <code>reinterpret_cast</code>ï¼šç”¨äºå¤„ç†â€œæ— å…³â€ç±»å‹çš„è½¬æ¢</h2>\n<p><code>reinterpret_cast</code> æ˜¯æœ€å±é™©çš„ç±»å‹è½¬æ¢ï¼Œå®ƒæ‰§è¡Œåº•å±‚çš„ã€ä¸å®ç°ç›¸å…³çš„ä½æ¨¡å¼é‡æ–°è§£é‡Šã€‚ç¼–è¯‘å™¨ä¸ä¼šè¿›è¡Œä»»ä½•ç±»å‹æ£€æŸ¥ï¼Œå®Œå…¨ä¿¡ä»»ç¨‹åºå‘˜çš„æ“ä½œã€‚</p>\n<h4 id=\"æ ¸å¿ƒç‰¹ç‚¹-4\"><a class=\"anchor\" href=\"#æ ¸å¿ƒç‰¹ç‚¹-4\">#</a> æ ¸å¿ƒç‰¹ç‚¹</h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\">æè¿°</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>è½¬æ¢æ—¶æœº</strong></td>\n<td style=\"text-align:left\">ç¼–è¯‘æœŸ (Compile-time)</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å®‰å…¨æ€§</strong></td>\n<td style=\"text-align:left\">æåº¦ä¸å®‰å…¨ã€‚å®ƒä»…ä»…æ˜¯é‡æ–°è§£é‡Šå†…å­˜ä¸­çš„ä½ï¼Œç»“æœæ˜¯å¹³å°ç›¸å…³çš„ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å¼€é”€</strong></td>\n<td style=\"text-align:left\">æ— è¿è¡Œæ—¶å¼€é”€ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"ä¸»è¦ç”¨é€”-4\"><a class=\"anchor\" href=\"#ä¸»è¦ç”¨é€”-4\">#</a> ä¸»è¦ç”¨é€”</h4>\n<p>åªåœ¨éå¸¸åº•å±‚çš„ç¼–ç¨‹ä¸­æ‰éœ€è¦å®ƒï¼Œæ¯”å¦‚ï¼š</p>\n<ul>\n<li><strong>æŒ‡é’ˆä¸æ•´æ•°ä¹‹é—´çš„è½¬æ¢</strong>ï¼šå¦‚å°†æŒ‡é’ˆåœ°å€å­˜ä¸ºä¸€ä¸ªæ•´æ•°ã€‚</li>\n<li><strong>ä¸åŒç±»å‹çš„æŒ‡é’ˆè½¬æ¢</strong>ï¼šåœ¨ä¸ç›¸å…³çš„ç±»å‹ä¹‹é—´è¿›è¡ŒæŒ‡é’ˆè½¬æ¢ï¼Œä¾‹å¦‚å°†ä¸€ä¸ª <code>int*</code> è½¬æ¢ä¸º <code>MyClass*</code>ã€‚</li>\n<li><strong>ä¸ç¡¬ä»¶äº¤äº’</strong>ï¼šå°†ä¸€ä¸ªç‰¹å®šçš„æ•´æ•°åœ°å€è½¬æ¢ä¸ºè®¾å¤‡å¯„å­˜å™¨çš„æŒ‡é’ˆã€‚</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// åœºæ™¯ï¼šå°†ä¸€ä¸ªå¯¹è±¡åœ°å€å­˜ä¸ºæ•´æ•°ï¼Œä¹‹åå†è½¬å›æ¥</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">class</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyClass</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyClass obj</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å°†æŒ‡é’ˆåœ°å€è½¬æ¢ä¸ºæ•´æ•°ç±»å‹ uintptr_t</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">uintptr_t</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> addr </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> reinterpret_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">uintptr_t</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">obj</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ... åœ¨æŸä¸ªæ—¶åˆ» ...</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å°†æ•´æ•°åœ°å€è½¬å›åŸå§‹æŒ‡é’ˆç±»å‹</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyClass</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> obj_ptr </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> reinterpret_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyClass</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">addr</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// åœºæ™¯ï¼šå­—èŠ‚æµçš„é‡æ–°è§£é‡Š</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">char</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> buffer</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">sizeof</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyClass</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ... ä»ç½‘ç»œæˆ–æ–‡ä»¶è¯»å–å­—èŠ‚åˆ° buffer ...</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyClass</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> p_obj_from_buffer </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> reinterpret_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyClass</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">buffer</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span></code></pre>\n<h2 id=\"å››ç§è½¬æ¢æ€»ç»“\"><a class=\"anchor\" href=\"#å››ç§è½¬æ¢æ€»ç»“\">#</a> å››ç§è½¬æ¢æ€»ç»“</h2>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">è½¬æ¢ç±»å‹</th>\n<th style=\"text-align:left\">è½¬æ¢æ—¶æœº</th>\n<th style=\"text-align:left\">å®‰å…¨æ€§</th>\n<th style=\"text-align:left\">ä¸»è¦ç”¨é€”</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong><code>static_cast</code></strong></td>\n<td style=\"text-align:left\">ç¼–è¯‘æœŸ</td>\n<td style=\"text-align:left\">éƒ¨åˆ†å®‰å…¨</td>\n<td style=\"text-align:left\">ç›¸å…³ç±»å‹è½¬æ¢ï¼ˆæ•°å€¼ã€ç»§æ‰¿ã€void*ï¼‰</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><code>dynamic_cast</code></strong></td>\n<td style=\"text-align:left\">è¿è¡Œæ—¶</td>\n<td style=\"text-align:left\">å®‰å…¨</td>\n<td style=\"text-align:left\">å¤šæ€ç±»å±‚æ¬¡ç»“æ„ä¸­çš„å®‰å…¨å‘ä¸‹è½¬å‹</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><code>const_cast</code></strong></td>\n<td style=\"text-align:left\">ç¼–è¯‘æœŸ</td>\n<td style=\"text-align:left\">ä¸å®‰å…¨</td>\n<td style=\"text-align:left\">æ·»åŠ æˆ–ç§»é™¤ <code>const</code> / <code>volatile</code> å±æ€§</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><code>reinterpret_cast</code></strong></td>\n<td style=\"text-align:left\">ç¼–è¯‘æœŸ</td>\n<td style=\"text-align:left\">æåº¦ä¸å®‰å…¨</td>\n<td style=\"text-align:left\">åº•å±‚ã€æ— å…³ç±»å‹çš„ä½æ¨¡å¼é‡æ–°è§£é‡Š</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "Programming",
                "C",
                "C++"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/09/07/Programming/C++/%E5%AD%97%E8%8A%82%E5%BA%8F%E4%B8%8E%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/",
            "url": "https://haoruanwn.github.io/2025/09/07/Programming/C++/%E5%AD%97%E8%8A%82%E5%BA%8F%E4%B8%8E%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/",
            "title": "å­—èŠ‚åºä¸å†…å­˜å¯¹é½",
            "date_published": "2025-09-06T16:12:51.000Z",
            "content_html": "<h3 id=\"1-å­—èŠ‚åº-endianness-å¤§å°ç«¯æ¨¡å¼\"><a class=\"anchor\" href=\"#1-å­—èŠ‚åº-endianness-å¤§å°ç«¯æ¨¡å¼\">#</a> 1. å­—èŠ‚åº (Endianness / å¤§å°ç«¯æ¨¡å¼)</h3>\n<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šå­—èŠ‚åºå®šä¹‰äº†<strong>å¤šå­—èŠ‚æ•°æ®ç±»å‹</strong>ï¼ˆä¾‹å¦‚ <code>int</code>, <code>short</code>, <code>double</code> ç­‰ï¼‰åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨å…¶å­—èŠ‚çš„é¡ºåºã€‚</p>\n<p>ä¸€ä¸ª32ä½çš„æ•´æ•° <code>0x01020304</code> ç”±4ä¸ªå­—èŠ‚ç»„æˆï¼š<code>0x01</code>, <code>0x02</code>, <code>0x03</code>, <code>0x04</code>ã€‚</p>\n<ul>\n<li><code>0x01</code> æ˜¯<strong>æœ€é«˜æœ‰æ•ˆå­—èŠ‚ (Most Significant Byte, MSB)</strong></li>\n<li><code>0x04</code> æ˜¯<strong>æœ€ä½æœ‰æ•ˆå­—èŠ‚ (Least Significant Byte, LSB)</strong></li>\n</ul>\n<p>å†…å­˜åœ°å€æ€»æ˜¯ä»ä½åˆ°é«˜å¢é•¿ã€‚æ ¹æ®å°† MSB è¿˜æ˜¯ LSB å­˜æ”¾åœ¨ä½åœ°å€ï¼Œäº§ç”Ÿäº†ä¸¤ç§æ¨¡å¼ï¼š</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">æ¨¡å¼</th>\n<th style=\"text-align:left\">æè¿°</th>\n<th style=\"text-align:left\">å­˜å‚¨ç¤ºä¾‹ (int 0x01020304)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>å¤§ç«¯æ¨¡å¼ (Big-Endian)</strong></td>\n<td style=\"text-align:left\"><strong>æœ€é«˜æœ‰æ•ˆå­—èŠ‚ (MSB)</strong> å­˜æ”¾åœ¨ <strong>æœ€ä½çš„å†…å­˜åœ°å€</strong>ã€‚ç¬¦åˆäººç±»é˜…è¯»ä¹ æƒ¯ã€‚</td>\n<td style=\"text-align:left\"><code>01</code> <code>02</code> <code>03</code> <code>04</code></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å°ç«¯æ¨¡å¼ (Little-Endian)</strong></td>\n<td style=\"text-align:left\"><strong>æœ€ä½æœ‰æ•ˆå­—èŠ‚ (LSB)</strong> å­˜æ”¾åœ¨ <strong>æœ€ä½çš„å†…å­˜åœ°å€</strong>ã€‚ç¬¦åˆè®¡ç®—æœºå¤„ç†é€»è¾‘ã€‚</td>\n<td style=\"text-align:left\"><code>04</code> <code>03</code> <code>02</code> <code>01</code></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"a-å¤§ç«¯æ¨¡å¼-big-endian\"><a class=\"anchor\" href=\"#a-å¤§ç«¯æ¨¡å¼-big-endian\">#</a> a. å¤§ç«¯æ¨¡å¼ (Big-Endian)</h4>\n<p>å¯¹äº <code>int num = 0x01020304;</code>ï¼Œå…¶åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-text\"><span class=\"line\"><span>å†…å­˜åœ°å€ (ä½ ---> é«˜)</span></span>\n<span class=\"line\"><span>+--------+--------+--------+--------+</span></span>\n<span class=\"line\"><span>|  0x01  |  0x02  |  0x03  |  0x04  |</span></span>\n<span class=\"line\"><span>+--------+--------+--------+--------+</span></span>\n<span class=\"line\"><span> 0x1000   0x1001   0x1002   0x1003</span></span></code></pre>\n<ul>\n<li><strong>å¸¸è§æ¶æ„</strong>ï¼šPowerPC, SPARC, ç½‘ç»œå­—èŠ‚åº (Network Byte Order)ã€‚</li>\n</ul>\n<h4 id=\"b-å°ç«¯æ¨¡å¼-little-endian\"><a class=\"anchor\" href=\"#b-å°ç«¯æ¨¡å¼-little-endian\">#</a> b. å°ç«¯æ¨¡å¼ (Little-Endian)</h4>\n<p>å¯¹äº <code>int num = 0x01020304;</code>ï¼Œå…¶åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼å¦‚ä¸‹ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-text\"><span class=\"line\"><span>å†…å­˜åœ°å€ (ä½ ---> é«˜)</span></span>\n<span class=\"line\"><span>+--------+--------+--------+--------+</span></span>\n<span class=\"line\"><span>|  0x04  |  0x03  |  0x02  |  0x01  |</span></span>\n<span class=\"line\"><span>+--------+--------+--------+--------+</span></span>\n<span class=\"line\"><span> 0x1000   0x1001   0x1002   0x1003</span></span></code></pre>\n<ul>\n<li><strong>å¸¸è§æ¶æ„</strong>ï¼šx86, x86-64, ARM (å¤§éƒ¨åˆ†æ¨¡å¼ä¸‹)ã€‚</li>\n</ul>\n<h4 id=\"c-å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿçš„å­—èŠ‚åº\"><a class=\"anchor\" href=\"#c-å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿçš„å­—èŠ‚åº\">#</a> c. å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿçš„å­—èŠ‚åºï¼Ÿ</h4>\n<p>å¯ä»¥é€šè¿‡æ£€æŸ¥ä¸€ä¸ªæ•´æ•°çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ¥åˆ¤æ–­ã€‚æ•´æ•° <code>1</code> åœ¨å†…å­˜ä¸­è¡¨ç¤ºä¸º <code>0x00000001</code>ã€‚</p>\n<ul>\n<li>åœ¨å°ç«¯ç³»ç»Ÿä¸­ï¼Œæœ€ä½åœ°å€å­˜æ”¾çš„æ˜¯ <code>0x01</code>ã€‚</li>\n<li>åœ¨å¤§ç«¯ç³»ç»Ÿä¸­ï¼Œæœ€ä½åœ°å€å­˜æ”¾çš„æ˜¯ <code>0x00</code>ã€‚</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> check_endianness</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    int</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> num </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å°†intæŒ‡é’ˆå¼ºåˆ¶è½¬æ¢ä¸ºcharæŒ‡é’ˆï¼ŒæŒ‡å‘numçš„æœ€ä½åœ°å€</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    char*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> ptr </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> reinterpret_cast</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">char*</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">num</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    if</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">*</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">ptr </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">==</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æœ¬ç³»ç»Ÿæ˜¯ å°ç«¯æ¨¡å¼ (Little-Endian)</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æœ¬ç³»ç»Ÿæ˜¯ å¤§ç«¯æ¨¡å¼ (Big-Endian)</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<hr />\n<h3 id=\"2-å†…å­˜å¯¹é½-memory-alignment\"><a class=\"anchor\" href=\"#2-å†…å­˜å¯¹é½-memory-alignment\">#</a> 2. å†…å­˜å¯¹é½ (Memory Alignment)</h3>\n<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šCPUè®¿é—®å†…å­˜ä¸æ˜¯é€å­—èŠ‚è¿›è¡Œçš„ï¼Œè€Œæ˜¯ä»¥å—ï¼ˆé€šå¸¸æ˜¯2, 4, 8å­—èŠ‚ï¼‰ä¸ºå•ä½ã€‚ä¸ºäº†è®©CPUé«˜æ•ˆåœ°è¯»å–æ•°æ®ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†æ•°æ®å­˜æ”¾åœ¨ç‰¹å®šåœ°å€ï¼Œè¿™ä¸ªåœ°å€é€šå¸¸æ˜¯å…¶æ•°æ®ç±»å‹å¤§å°çš„æ•´æ•°å€ã€‚</p>\n<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¯¹é½ï¼Ÿ</strong></p>\n<ul>\n<li><strong>æ€§èƒ½</strong>ï¼šå¯¹é½çš„æ•°æ®å¯ä»¥è¢«CPUåœ¨ä¸€ä¸ªæ€»çº¿å‘¨æœŸå†…è¯»å–ã€‚å¦‚æœæ•°æ®æœªå¯¹é½ï¼ŒCPUå¯èƒ½éœ€è¦ä¸¤æ¬¡è¯»å–å†æ‹¼æ¥æ•°æ®ï¼Œé™ä½æ€§èƒ½ã€‚</li>\n<li><strong>ç¡¬ä»¶è¦æ±‚</strong>ï¼šæŸäº›ç¡¬ä»¶å¹³å°ï¼ˆå°¤å…¶æ˜¯RISCæ¶æ„ï¼Œå¦‚ARMï¼‰<strong>ä¸å…è®¸</strong>è®¿é—®æœªå¯¹é½çš„æ•°æ®ï¼Œå¼ºè¡Œè®¿é—®ä¼šè§¦å‘ç¡¬ä»¶å¼‚å¸¸ã€‚</li>\n</ul>\n<h4 id=\"a-å¯¹é½è§„åˆ™\"><a class=\"anchor\" href=\"#a-å¯¹é½è§„åˆ™\">#</a> a. å¯¹é½è§„åˆ™</h4>\n<ol>\n<li><strong>æˆå‘˜å¯¹é½</strong>ï¼šç»“æ„ä½“(<code>struct</code>)æˆ–ç±»(<code>class</code>)çš„æ¯ä¸ªæˆå‘˜ï¼Œå…¶å­˜æ”¾çš„èµ·å§‹åœ°å€ç›¸å¯¹äºç»“æ„ä½“èµ·å§‹åœ°å€çš„åç§»é‡ï¼Œå¿…é¡»æ˜¯å…¶è‡ªèº«å¤§å°ï¼ˆæˆ–æŒ‡å®šå¯¹é½å€¼ï¼‰çš„æ•´æ•°å€ã€‚</li>\n<li><strong>æ•´ä½“å¯¹é½</strong>ï¼šç»“æ„ä½“æˆ–ç±»çš„æ€»å¤§å°ï¼Œå¿…é¡»æ˜¯å…¶<strong>æœ€å®½çš„æˆå‘˜</strong>ï¼ˆæˆ–æŒ‡å®šå¯¹é½å€¼ï¼‰å¤§å°çš„æ•´æ•°å€ã€‚</li>\n</ol>\n<p><strong>ç¤ºä¾‹åˆ†æ</strong>ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyStruct</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    char</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> a</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // 1å­—èŠ‚</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    int</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> b</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">     // 4å­—èŠ‚</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    short</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> c</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">   // 2å­—èŠ‚</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // é¢„æœŸå¤§å°: 1 + 4 + 2 = 7</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å®é™…å¤§å°: 12</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">sizeof(MyStruct) = </span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> sizeof</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyStruct</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p><strong>å†…å­˜å¸ƒå±€</strong>ï¼š</p>\n<p><img loading=\"lazy\" src=\"https://markdownforyuanhao.oss-cn-hangzhou.aliyuncs.com/img1/20250907001714517.png\" alt=\"Snipaste_2025-09-07_00-16-45\" /></p>\n<ul>\n<li><code>char a</code>: ä½äºåç§»é‡ <code>0</code>ã€‚</li>\n<li><code>int b</code>: å¤§å°ä¸º4ï¼Œå…¶åç§»é‡å¿…é¡»æ˜¯4çš„å€æ•°ã€‚å› æ­¤ç¼–è¯‘å™¨åœ¨ <code>a</code> åå¡«å……3å­—èŠ‚ï¼Œä½¿ <code>b</code> ä»åç§»é‡ <code>4</code> å¼€å§‹ã€‚</li>\n<li><code>short c</code>: å¤§å°ä¸º2ï¼Œ<code>b</code> ç»“æŸååç§»é‡ä¸º <code>8</code>ï¼Œæ˜¯2çš„å€æ•°ï¼Œå¯ä»¥ç›´æ¥å­˜æ”¾ã€‚</li>\n<li><strong>æ•´ä½“å¯¹é½</strong>: ç»“æ„ä½“æœ€å®½æˆå‘˜æ˜¯ <code>int b</code> (4å­—èŠ‚)ï¼Œæ€»å¤§å°å¿…é¡»æ˜¯4çš„å€æ•°ã€‚å½“å‰å¤§å°ä¸º <code>1 (a) + 3 (pad) + 4 (b) + 2 (c) = 10</code> å­—èŠ‚ã€‚ä¸ºæ»¡è¶³4çš„å€æ•°è¦æ±‚ï¼Œæœ«å°¾å†å¡«å……2å­—èŠ‚ï¼Œæœ€ç»ˆå¤§å°ä¸º12å­—èŠ‚ã€‚</li>\n</ul>\n<h4 id=\"b-å¦‚ä½•æ§åˆ¶å¯¹é½-pragma-packn\"><a class=\"anchor\" href=\"#b-å¦‚ä½•æ§åˆ¶å¯¹é½-pragma-packn\">#</a> b. å¦‚ä½•æ§åˆ¶å¯¹é½ <code>#pragma pack(n)</code></h4>\n<p>å¯ä»¥ä½¿ç”¨é¢„å¤„ç†æŒ‡ä»¤ <code>#pragma pack(n)</code> æ¥æ”¹å˜ç¼–è¯‘å™¨çš„é»˜è®¤å¯¹é½ç³»æ•°ã€‚<code>n</code> å¯ä»¥æ˜¯ <code>1</code>, <code>2</code>, <code>4</code>, <code>8</code> ç­‰ã€‚æˆå‘˜å¯¹é½æ—¶ï¼Œå°†æŒ‰ç…§ <code>n</code> å’Œæˆå‘˜è‡ªèº«å¤§å°ä¸­ <strong>è¾ƒå°</strong> çš„å€¼è¿›è¡Œå¯¹é½ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pragma</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> pack</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è®¾ç½®å¯¹é½ç³»æ•°ä¸º1ï¼Œå³æ— å¡«å……</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyStructPacked</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    char</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> a</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // 1å­—èŠ‚</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    int</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> b</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">     // 4å­—èŠ‚</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    short</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> c</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">   // 2å­—èŠ‚</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pragma</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> pack</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // æ¢å¤é»˜è®¤å¯¹é½</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// sizeof(MyStructPacked) çš„ç»“æœå°†æ˜¯ 1 + 4 + 2 = 7</span></span></code></pre>\n<hr />\n<h3 id=\"3-å¸¸è§å¯¼è‡´é—®é¢˜çš„åœºæ™¯\"><a class=\"anchor\" href=\"#3-å¸¸è§å¯¼è‡´é—®é¢˜çš„åœºæ™¯\">#</a> 3. å¸¸è§å¯¼è‡´é—®é¢˜çš„åœºæ™¯</h3>\n<h4 id=\"a-ç½‘ç»œé€šä¿¡-å­—èŠ‚åºé—®é¢˜\"><a class=\"anchor\" href=\"#a-ç½‘ç»œé€šä¿¡-å­—èŠ‚åºé—®é¢˜\">#</a> a. ç½‘ç»œé€šä¿¡ (å­—èŠ‚åºé—®é¢˜)</h4>\n<p>ä¸åŒæ¶æ„çš„è®¡ç®—æœºå­—èŠ‚åºå¯èƒ½ä¸åŒã€‚è€Œ<strong>ç½‘ç»œåè®®è§„å®šå­—èŠ‚åºä¸ºå¤§ç«¯æ¨¡å¼ (Network Byte Order)</strong>ã€‚</p>\n<ul>\n<li>\n<p><strong>é—®é¢˜</strong>ï¼šå°ç«¯æœºå™¨ (x86) å‘é€ <code>0x01020304</code> (å†…å­˜ä¸­ä¸º <code>04 03 02 01</code>)ï¼Œå¤§ç«¯æœåŠ¡å™¨æ¥æ”¶åä¼šè¯¯è¯»ä¸º <code>0x04030201</code>ã€‚</p>\n</li>\n<li>\n<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå‘é€å‰ï¼Œç»Ÿä¸€å°†æ•°æ®ä»ä¸»æœºå­—èŠ‚åº (Host Order) è½¬æ¢åˆ°ç½‘ç»œå­—èŠ‚åº (Big-Endian)ï¼›æ¥æ”¶ååå‘è½¬æ¢ã€‚</p>\n<ul>\n<li><strong>å¸¸ç”¨å‡½æ•°</strong>ï¼š<code>htons()</code>, <code>htonl()</code>, <code>ntohs()</code>, <code>ntohl()</code>\n<ul>\n<li><code>h</code> ä»£è¡¨ host, <code>to</code> ä»£è¡¨ to, <code>n</code> ä»£è¡¨ network, <code>s</code> ä»£è¡¨ short, <code>l</code> ä»£è¡¨ longã€‚</li>\n</ul>\n</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">arpa/inet.h</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // åœ¨Linux/macOSä¸­</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// #include &#x3C;winsock2.h></span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // åœ¨Windowsä¸­</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">uint32_t</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> num </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> 0x</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">01020304</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">uint32_t</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> net_num </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> htonl</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">num</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è½¬æ¢ä¸ºä¸»æœºåºåˆ°ç½‘ç»œåº</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// send(socket, &#x26;net_num, sizeof(net_num), 0);</span></span></code></pre>\n</li>\n</ul>\n<h4 id=\"b-æ–‡ä»¶è¯»å†™ä¸æ•°æ®æŒä¹…åŒ–-å­—èŠ‚åºä¸å¯¹é½é—®é¢˜\"><a class=\"anchor\" href=\"#b-æ–‡ä»¶è¯»å†™ä¸æ•°æ®æŒä¹…åŒ–-å­—èŠ‚åºä¸å¯¹é½é—®é¢˜\">#</a> b. æ–‡ä»¶è¯»å†™ä¸æ•°æ®æŒä¹…åŒ– (å­—èŠ‚åºä¸å¯¹é½é—®é¢˜)</h4>\n<p>ç›´æ¥å°†ç»“æ„ä½“çš„äºŒè¿›åˆ¶å†…å­˜å†™å…¥æ–‡ä»¶ï¼Œä¼šåŒæ—¶å†™å…¥å­—èŠ‚åºå’Œå†…å­˜å¯¹é½äº§ç”Ÿçš„å¡«å……å­—èŠ‚ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">MyStruct data</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// file.write(reinterpret_cast&#x3C;char*>(&#x26;data), sizeof(MyStruct));</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // é”™è¯¯åšæ³•</span></span></code></pre>\n<ul>\n<li><strong>é—®é¢˜</strong>:\n<ol>\n<li><strong>å­—èŠ‚åº</strong>ï¼šåœ¨å°ç«¯æœºå™¨ä¸Šå†™çš„æ–‡ä»¶ï¼Œç”¨å¤§ç«¯æœºå™¨è¯»ä¼šå‡ºé”™ã€‚</li>\n<li><strong>å¯¹é½</strong>ï¼šä¸åŒç¼–è¯‘å™¨æˆ–ç¼–è¯‘é€‰é¡¹å¯èƒ½å¯¼è‡´å¡«å……æ–¹å¼ä¸åŒï¼Œé€ æˆè·¨å¹³å°/ç‰ˆæœ¬è§£æå¤±è´¥ã€‚</li>\n</ol>\n</li>\n<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šé‡‡ç”¨<strong>åºåˆ—åŒ– (Serialization)</strong>ã€‚é€ä¸ªæˆå‘˜åœ°è¿›è¡Œè¯»å†™ï¼Œå¹¶ä¸ºæ–‡ä»¶æ ¼å¼å®šä¹‰ç»Ÿä¸€çš„å­—èŠ‚åºï¼ˆé€šå¸¸æ¨èå¤§ç«¯ï¼‰ã€‚</li>\n</ul>\n<h4 id=\"c-åµŒå…¥å¼å¼€å‘ä¸ç¡¬ä»¶äº¤äº’-å­—èŠ‚åºä¸å¯¹é½é—®é¢˜\"><a class=\"anchor\" href=\"#c-åµŒå…¥å¼å¼€å‘ä¸ç¡¬ä»¶äº¤äº’-å­—èŠ‚åºä¸å¯¹é½é—®é¢˜\">#</a> c. åµŒå…¥å¼å¼€å‘ä¸ç¡¬ä»¶äº¤äº’ (å­—èŠ‚åºä¸å¯¹é½é—®é¢˜)</h4>\n<p>ç›´æ¥è¯»å†™ç¡¬ä»¶å¯„å­˜å™¨æ—¶ï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆç¡¬ä»¶æ‰‹å†Œçš„è§„å®šã€‚</p>\n<ul>\n<li><strong>å­—èŠ‚åº</strong>ï¼šç¡¬ä»¶å¯„å­˜å™¨é€šå¸¸æ˜¯å¤§ç«¯æ¨¡å¼ã€‚å°ç«¯CPUåœ¨å†™å…¥æ—¶å¿…é¡»æ‰‹åŠ¨è½¬æ¢å­—èŠ‚åºã€‚</li>\n<li><strong>å¯¹é½</strong>ï¼šè®¿é—®ç¡¬ä»¶å¯„å­˜å™¨å¿…é¡»ä¸¥æ ¼å¯¹é½ã€‚ä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ª32ä½(4å­—èŠ‚)å¯„å­˜å™¨ï¼Œå…¶è®¿é—®åœ°å€å¿…é¡»æ˜¯4çš„å€æ•°ï¼Œå¦åˆ™åœ¨å¾ˆå¤šåµŒå…¥å¼å¤„ç†å™¨ä¸Šå°†å¯¼è‡´ç¡¬ä»¶å¼‚å¸¸ã€‚</li>\n</ul>\n",
            "tags": [
                "Programming",
                "C",
                "C++"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/09/03/Programming/C++/Conan-CMake%E5%9F%BA%E6%9C%AC%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B/",
            "url": "https://haoruanwn.github.io/2025/09/03/Programming/C++/Conan-CMake%E5%9F%BA%E6%9C%AC%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B/",
            "title": "Conan+CMakeåŸºæœ¬ç¼–è¯‘æµç¨‹",
            "date_published": "2025-09-03T14:53:54.000Z",
            "content_html": "<h1 id=\"conancmakeåŸºæœ¬ç¼–è¯‘æµç¨‹\"><a class=\"anchor\" href=\"#conancmakeåŸºæœ¬ç¼–è¯‘æµç¨‹\">#</a> Conan+CMakeåŸºæœ¬ç¼–è¯‘æµç¨‹</h1>\n<h2 id=\"æœ¬åœ°ç¼–è¯‘\"><a class=\"anchor\" href=\"#æœ¬åœ°ç¼–è¯‘\">#</a> æœ¬åœ°ç¼–è¯‘</h2>\n<h3 id=\"1-conan-å®‰è£…ä¾èµ–\"><a class=\"anchor\" href=\"#1-conan-å®‰è£…ä¾èµ–\">#</a> 1. Conan å®‰è£…ä¾èµ–</h3>\n<p>é¦–å…ˆï¼Œä½¿ç”¨ Conan å®‰è£…é¡¹ç›®æ‰€éœ€çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚Conan ä¼šæ ¹æ®æ„å»ºç±»å‹ï¼ˆDebug/Releaseï¼‰å°†ç”Ÿæˆçš„æ–‡ä»¶æ”¾ç½®åœ¨ä¸åŒçš„ç›®å½•ä¸­ã€‚</p>\n<ul>\n<li>\n<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒConan ä¼šåˆ›å»º <code>build/Release/generators</code> ç›®å½•æ¥å­˜æ”¾ç”Ÿæˆæ–‡ä»¶ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">conan</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build=missing</span></span></code></pre>\n</li>\n<li>\n<p>å¯ä»¥æ˜ç¡®æŒ‡å®šæ„å»ºç±»å‹ï¼Œä¾‹å¦‚ <code>Debug</code>ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">conan</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build=missing</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build_type=Debug</span></span></code></pre>\n</li>\n<li>\n<p><code>--output-folder</code> å‚æ•°å¯ä»¥æŒ‡å®šè¾“å‡ºç›®å½•ï¼Œä½†é€šå¸¸ä¸æ˜¯å¿…éœ€çš„ï¼Œå› ä¸º Conan ä¼šæ ¹æ®é…ç½®è‡ªåŠ¨ç®¡ç†è·¯å¾„ã€‚</p>\n</li>\n</ul>\n<h3 id=\"2-cmake-é…ç½®ä¸ç¼–è¯‘\"><a class=\"anchor\" href=\"#2-cmake-é…ç½®ä¸ç¼–è¯‘\">#</a> 2. CMake é…ç½®ä¸ç¼–è¯‘</h3>\n<p>Conan åœ¨å®‰è£…ä¾èµ–åï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª CMake é¢„è®¾æ–‡ä»¶ (<code>CMakeUserPresets.json</code>)ï¼Œå…¶ä¸­åŒ…å«äº†é…ç½®å’Œç¼–è¯‘æ‰€éœ€çš„å…¨éƒ¨ä¿¡æ¯ã€‚å› æ­¤ï¼Œæ¨èç›´æ¥ä½¿ç”¨é¢„è®¾æ¥ç®€åŒ–æ“ä½œã€‚</p>\n<h4 id=\"ä½¿ç”¨-cmake-é¢„è®¾æ¨è\"><a class=\"anchor\" href=\"#ä½¿ç”¨-cmake-é¢„è®¾æ¨è\">#</a> ä½¿ç”¨ CMake é¢„è®¾ï¼ˆæ¨èï¼‰</h4>\n<ul>\n<li>\n<p><strong>é…ç½® CMake</strong></p>\n<p>ä½¿ç”¨ <code>conan-debug</code> æˆ– <code>conan-release</code> é¢„è®¾æ¥é…ç½®é¡¹ç›®ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é…ç½® Debug ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-debug</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é…ç½® Release ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-release</span></span></code></pre>\n</li>\n<li>\n<p><strong>ç¼–è¯‘</strong></p>\n<p>åŒæ ·ä½¿ç”¨é¢„è®¾æ¥æ‰§è¡Œç¼–è¯‘ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¼–è¯‘ Debug ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-debug</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¼–è¯‘ Release ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-release</span></span></code></pre>\n</li>\n</ul>\n<h4 id=\"æ‰‹åŠ¨é…ç½®\"><a class=\"anchor\" href=\"#æ‰‹åŠ¨é…ç½®\">#</a> æ‰‹åŠ¨é…ç½®</h4>\n<p>å¦‚æœä¸ä½¿ç”¨é¢„è®¾ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨æŒ‡å®šå·¥å…·é“¾æ–‡ä»¶å’Œæ„å»ºç±»å‹ã€‚</p>\n<ul>\n<li>\n<p><strong>é…ç½® CMake</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é…ç½® Release ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -B</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build/Release</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Ninja</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">      -DCMAKE_TOOLCHAIN_FILE=build/Release/generators/conan_toolchain.cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">      -DCMAKE_BUILD_TYPE=Release</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">      </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># é…ç½® Debug ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -S</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -B</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build/Debug</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -G</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Ninja</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">      -DCMAKE_TOOLCHAIN_FILE=build/Debug/generators/conan_toolchain.cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> \\</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">      -DCMAKE_BUILD_TYPE=Debug</span></span></code></pre>\n</li>\n<li>\n<p><strong>ç¼–è¯‘</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¼–è¯‘ Release ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build/Release</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ç¼–è¯‘ Debug ç‰ˆæœ¬</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build/Debug</span></span></code></pre>\n</li>\n</ul>\n<h2 id=\"äº¤å‰ç¼–è¯‘\"><a class=\"anchor\" href=\"#äº¤å‰ç¼–è¯‘\">#</a> äº¤å‰ç¼–è¯‘</h2>\n<h3 id=\"1-åˆ›å»º-profile-æ–‡ä»¶\"><a class=\"anchor\" href=\"#1-åˆ›å»º-profile-æ–‡ä»¶\">#</a> 1. åˆ›å»º Profile æ–‡ä»¶</h3>\n<p>é¦–å…ˆï¼Œéœ€è¦ä¸ºç›®æ ‡å¹³å°åˆ›å»ºä¸€ä¸ª Conan Profile æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä¸º aarch64 æ¶æ„åˆ›å»ºä¸€ä¸ª <code>profiles/aarch64_profile</code> æ–‡ä»¶ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-toml\"><span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#59873A;--shiki-dark:#80A665\">settings</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">os</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">L</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">inux</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">arch</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">a</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">rmv8</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">compiler</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">g</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">cc</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">compiler</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">version</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">15.2</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">compiler</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">libcxx</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">l</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">ibstdc++11</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">compiler</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">cppstd</span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">20</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#59873A;--shiki-dark:#80A665\">conf</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å‘Šè¯‰ Conan åŠ è½½æˆ‘ä»¬è‡ªå®šä¹‰çš„ CMake å·¥å…·é“¾æ–‡ä»¶</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ä½¿ç”¨ tools.cmake.cmaketoolchain:user_toolchain æ¥æŒ‡å®š</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># æ³¨æ„: $&#123;profile_dir&#125; æ˜¯ Conan å˜é‡ï¼Œä½†å®è·µä¸­å»ºè®®ä½¿ç”¨ç»å¯¹è·¯å¾„ä»¥ç¡®ä¿æ­£ç¡®è¯†åˆ«</span></span>\n<span class=\"line\"><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">tools.cmake.cmaketoolchain:user_toolchain=</span><span style=\"color:#2993a3;--shiki-light-font-style:italic;--shiki-dark:#5eaab5;--shiki-dark-font-style:italic\">[</span><span style=\"color:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic\">\"/path/to/your/project/cmake/aarch64-toolchain.cmake\"</span><span style=\"color:#2993a3;--shiki-light-font-style:italic;--shiki-dark:#5eaab5;--shiki-dark-font-style:italic\">]</span></span></code></pre>\n<p>åœ¨å¯¹åº”çš„ <code>.cmake</code> å·¥å…·é“¾æ–‡ä»¶ä¸­ï¼Œä½ éœ€è¦è®¾ç½®äº¤å‰ç¼–è¯‘æ‰€éœ€çš„ç¼–è¯‘å™¨ã€ç³»ç»Ÿæ ¹ç›®å½•ç­‰ç¯å¢ƒå˜é‡ã€‚</p>\n<h3 id=\"2-æ‰§è¡Œç¼–è¯‘æµç¨‹\"><a class=\"anchor\" href=\"#2-æ‰§è¡Œç¼–è¯‘æµç¨‹\">#</a> 2. æ‰§è¡Œç¼–è¯‘æµç¨‹</h3>\n<p>äº¤å‰ç¼–è¯‘çš„æµç¨‹ä¸æœ¬åœ°ç¼–è¯‘éå¸¸ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºéœ€è¦åœ¨ <code>conan install</code> å‘½ä»¤ä¸­é€šè¿‡ <code>-pr:h</code> å‚æ•°æŒ‡å®š Host å¹³å°çš„ Profile æ–‡ä»¶ã€‚</p>\n<ul>\n<li>\n<p><strong>Conan å®‰è£…ä¾èµ–</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">conan</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build=missing</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> build_type=Debug</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -pr:h</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> profiles/aarch64_profile</span></span></code></pre>\n</li>\n<li>\n<p><strong>é…ç½® CMake</strong></p>\n<p>Conan åŒæ ·ä¼šç”Ÿæˆé€‚ç”¨äºäº¤å‰ç¼–è¯‘çš„ CMake é¢„è®¾ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-debug</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-release</span></span></code></pre>\n</li>\n<li>\n<p><strong>ç¼–è¯‘</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-debug</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">cmake</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --build</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --preset</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> conan-release</span></span></code></pre>\n</li>\n</ul>\n",
            "tags": [
                "Programming",
                "CMake",
                "Conan"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/28/Programming/Rust/Rust%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/",
            "url": "https://haoruanwn.github.io/2025/08/28/Programming/Rust/Rust%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/",
            "title": "Rustçš„é”™è¯¯å¤„ç†",
            "date_published": "2025-08-28T15:46:25.000Z",
            "content_html": "<h1 id=\"rust-é”™è¯¯å¤„ç†æœºåˆ¶\"><a class=\"anchor\" href=\"#rust-é”™è¯¯å¤„ç†æœºåˆ¶\">#</a> Rust é”™è¯¯å¤„ç†æœºåˆ¶</h1>\n<h2 id=\"ä¸€-é”™è¯¯åˆ†ç±»å¯æ¢å¤ä¸ä¸å¯æ¢å¤\"><a class=\"anchor\" href=\"#ä¸€-é”™è¯¯åˆ†ç±»å¯æ¢å¤ä¸ä¸å¯æ¢å¤\">#</a> ä¸€ã€ é”™è¯¯åˆ†ç±»ï¼šå¯æ¢å¤ä¸ä¸å¯æ¢å¤</h2>\n<p>åœ¨ Rust ä¸­ï¼Œé”™è¯¯è¢«åˆ†ä¸ºä¸¤å¤§ç±»ï¼šä¸å¯æ¢å¤çš„é”™è¯¯å’Œå¯æ¢å¤çš„é”™è¯¯ã€‚ç³»ç»Ÿä¸ºè¿™ä¸¤ç§é”™è¯¯æä¾›äº†ä¸åŒçš„å¤„ç†æœºåˆ¶ã€‚</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\"><code>panic!</code> (ä¸å¯æ¢å¤é”™è¯¯)</th>\n<th style=\"text-align:left\"><code>Result&lt;T, E&gt;</code> (å¯æ¢å¤é”™è¯¯)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>æ ¸å¿ƒç”¨é€”</strong></td>\n<td style=\"text-align:left\">å¤„ç†ç¨‹åºç¼ºé™·ï¼ˆBugï¼‰ï¼Œè¡¨ç¤ºç¨‹åºè¿›å…¥äº†æ— æ³•å®‰å…¨ç»§ç»­æ‰§è¡Œçš„çŠ¶æ€ã€‚</td>\n<td style=\"text-align:left\">å¤„ç†å¯é¢„æœŸçš„ã€èƒ½å¤Ÿè¢«åˆç†å“åº”çš„è¿è¡Œæ—¶é”™è¯¯ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å…¸å‹åœºæ™¯</strong></td>\n<td style=\"text-align:left\">è®¿é—®æ•°ç»„è¶Šç•Œã€æ–­è¨€å¤±è´¥ç­‰ã€‚</td>\n<td style=\"text-align:left\">æ–‡ä»¶æœªæ‰¾åˆ°ã€ç½‘ç»œè¿æ¥ä¸­æ–­ã€è¾“å…¥è§£æå¤±è´¥ç­‰ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>ç¨‹åºè¡Œä¸º</strong></td>\n<td style=\"text-align:left\">ç«‹å³ç»ˆæ­¢å½“å‰çº¿ç¨‹ï¼Œå±•å¼€è°ƒç”¨æ ˆå¹¶æ¸…ç†æ•°æ®ã€‚</td>\n<td style=\"text-align:left\">è¿”å›ä¸€ä¸ªåŒ…å«æˆåŠŸå€¼æˆ–é”™è¯¯å€¼çš„æšä¸¾ï¼Œç”±è°ƒç”¨è€…å†³å®šå¦‚ä½•å¤„ç†ã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>è§¦å‘æ–¹å¼</strong></td>\n<td style=\"text-align:left\">1. æ˜¾å¼è°ƒç”¨ <code>panic!(&quot;message&quot;);</code> 2. ä»£ç æ‰§è¡Œäº†è‡´å‘½é”™è¯¯æ“ä½œã€‚</td>\n<td style=\"text-align:left\">å‡½æ•°æ˜¾å¼åœ°è¿”å› <code>Ok(value)</code> æˆ– <code>Err(error)</code>ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"äºŒ-resultt-e-æšä¸¾æ˜¾å¼å¤„ç†é”™è¯¯\"><a class=\"anchor\" href=\"#äºŒ-resultt-e-æšä¸¾æ˜¾å¼å¤„ç†é”™è¯¯\">#</a> äºŒã€ <code>Result&lt;T, E&gt;</code> æšä¸¾ï¼šæ˜¾å¼å¤„ç†é”™è¯¯</h2>\n<p><code>Result&lt;T, E&gt;</code> æ˜¯ä¸€ä¸ªæ ‡å‡†åº“å®šä¹‰çš„æšä¸¾ï¼Œä¸“é—¨ç”¨äºå¤„ç†å¯æ¢å¤çš„é”™è¯¯ã€‚å®ƒæœ‰ä¸¤ä¸ªå˜ä½“ï¼š</p>\n<ul>\n<li><code>Ok(T)</code>: è¡¨ç¤ºæ“ä½œæˆåŠŸï¼Œå¹¶åŒ…å«æˆåŠŸæ—¶è¿”å›çš„å€¼ï¼Œå…¶ç±»å‹ä¸ºæ³›å‹ <code>T</code>ã€‚</li>\n<li><code>Err(E)</code>: è¡¨ç¤ºæ“ä½œå¤±è´¥ï¼Œå¹¶åŒ…å«ä¸€ä¸ªæè¿°é”™è¯¯çš„å€¼ï¼Œå…¶ç±»å‹ä¸ºæ³›å‹ <code>E</code>ã€‚</li>\n</ul>\n<h3 id=\"1-ç¤ºä¾‹è§£æå­—ç¬¦ä¸²\"><a class=\"anchor\" href=\"#1-ç¤ºä¾‹è§£æå­—ç¬¦ä¸²\">#</a> 1. ç¤ºä¾‹ï¼šè§£æå­—ç¬¦ä¸²</h3>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">num</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">ParseIntError</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å‡½æ•°å°è¯•å°†å­—ç¬¦ä¸²è§£æä¸º i32</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æˆåŠŸæ—¶è¿”å› Ok(i32)ï¼Œå¤±è´¥æ—¶è¿”å› Err(ParseIntError)</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> parse_number</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">s</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">str</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Result</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">i32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> ParseIntError</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    s</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">parse</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">i32</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> success</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> parse_number</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> failure</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> parse_number</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">abc</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">å°è¯•è§£æ '123': </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> success</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">å°è¯•è§£æ 'abc': </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> failure</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">å°è¯•è§£æ</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">123</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Ok</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">123</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">å°è¯•è§£æ</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">abc</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Err</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#59873A;--shiki-dark:#80A665\">ParseIntError</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> &#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> kind:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> InvalidDigit</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> &#125;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span></code></pre>\n<h3 id=\"2-ä½¿ç”¨-match-è¡¨è¾¾å¼å¤„ç†\"><a class=\"anchor\" href=\"#2-ä½¿ç”¨-match-è¡¨è¾¾å¼å¤„ç†\">#</a> 2. ä½¿ç”¨ <code>match</code> è¡¨è¾¾å¼å¤„ç†</h3>\n<p><code>match</code> æ˜¯å¤„ç† <code>Result</code> æœ€åŸºç¡€ã€æœ€æ˜ç¡®çš„æ–¹å¼ã€‚Rust çš„ <code>match</code> æ˜¯ç©·å°½çš„ï¼ˆexhaustiveï¼‰ï¼Œç¼–è¯‘å™¨ä¼šå¼ºåˆ¶ä½ å¤„ç†æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼ˆ<code>Ok</code> å’Œ <code>Err</code>ï¼‰ï¼Œç¡®ä¿é”™è¯¯ä¸ä¼šè¢«æ„å¤–å¿½ç•¥ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> number_str</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">42</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    match</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">42</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">parse</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">i32</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // å¦‚æœç»“æœæ˜¯ Okï¼Œ`n` ä¼šç»‘å®šåˆ° Ok å†…éƒ¨çš„å€¼</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        Ok</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">n</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">è§£ææˆåŠŸï¼æ•°å­—æ˜¯: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // å¦‚æœç»“æœæ˜¯ Errï¼Œ`e` ä¼šç»‘å®šåˆ° Err å†…éƒ¨çš„é”™è¯¯</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        Err</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">è§£æå¤±è´¥ï¼é”™è¯¯æ˜¯: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> e</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    match</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">hello</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">parse</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">i32</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        Ok</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">n</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">è§£ææˆåŠŸï¼æ•°å­—æ˜¯: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        Err</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">e</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> =</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">è§£æå¤±è´¥ï¼é”™è¯¯æ˜¯: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> e</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h2 id=\"ä¸‰-è¿ç®—ç¬¦ç®€æ´çš„é”™è¯¯ä¼ æ’­\"><a class=\"anchor\" href=\"#ä¸‰-è¿ç®—ç¬¦ç®€æ´çš„é”™è¯¯ä¼ æ’­\">#</a> ä¸‰ã€ <code>?</code> è¿ç®—ç¬¦ï¼šç®€æ´çš„é”™è¯¯ä¼ æ’­</h2>\n<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå‡½æ•°å†…éƒ¨å¸¸å¸¸ä¼šè°ƒç”¨å¤šä¸ªå¯èƒ½å¤±è´¥çš„æ“ä½œã€‚å¦‚æœæ¯ä¸ªæ“ä½œéƒ½ä½¿ç”¨ <code>match</code> å¤„ç†ï¼Œä»£ç ä¼šå˜å¾—å†—é•¿å’ŒåµŒå¥—ã€‚<code>?</code> è¿ç®—ç¬¦å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„ï¼Œå®ƒç”¨äºå®ç°é”™è¯¯çš„ <strong>ä¼ æ’­ï¼ˆPropagationï¼‰</strong>ï¼Œå³å¦‚æœå†…éƒ¨è°ƒç”¨å¤±è´¥ï¼Œåˆ™ç«‹å³å°†é”™è¯¯è¿”å›ç»™å½“å‰å‡½æ•°çš„è°ƒç”¨è€…ã€‚</p>\n<ul>\n<li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šå½“ <code>Result</code> çš„å€¼ä¸º <code>Ok(T)</code> æ—¶ï¼Œå®ƒä¼šè§£åŒ…å‡º <code>T</code> å¹¶è®©ç¨‹åºç»§ç»­ï¼›å¦‚æœå€¼ä¸º <code>Err(E)</code>ï¼Œå®ƒä¼šç«‹åˆ»ä¸­æ–­å½“å‰å‡½æ•°çš„æ‰§è¡Œï¼Œå¹¶å°† <code>Err(E)</code> ä½œä¸ºå½“å‰å‡½æ•°çš„è¿”å›å€¼ã€‚</li>\n<li><strong>é“¾å¼è°ƒç”¨</strong>ï¼š<code>?</code> è¿ç®—ç¬¦å¯ä»¥ä½¿ä¸€ç³»åˆ—å¯èƒ½å¤±è´¥çš„æ“ä½œä»£ç ä¿æŒçº¿æ€§ã€æ¸…æ™°å’Œæ˜“è¯»ã€‚</li>\n</ul>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fs</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">File</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">io</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Read</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// é“¾å¼è°ƒç”¨ç¤ºä¾‹ï¼šæ‰“å¼€æ–‡ä»¶å¹¶è¯»å–å…¶æ‰€æœ‰å†…å®¹</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> read_username_from_file</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Result</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> io</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Error</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> username</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">new</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // 1. File::open è¿”å› Result&#x3C;File, io::Error></span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    //    `?` åœ¨æˆåŠŸæ—¶è¿”å› File å®ä¾‹ï¼Œå¤±è´¥æ—¶å°† io::Error è¿”å›</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // 2. .read_to_string è¿”å› Result&#x3C;usize, io::Error></span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    //    `?` åœ¨æˆåŠŸæ—¶è¿”å›è¯»å–çš„å­—èŠ‚æ•°ï¼Œå¤±è´¥æ—¶å°† io::Error è¿”å›</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    File</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">open</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">username.txt</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">?.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">read_to_string</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;mut</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> username</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    Ok</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">username</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h2 id=\"å››-è¿ç®—ç¬¦çš„å·¥ä½œæœºåˆ¶\"><a class=\"anchor\" href=\"#å››-è¿ç®—ç¬¦çš„å·¥ä½œæœºåˆ¶\">#</a> å››ã€ <code>?</code> è¿ç®—ç¬¦çš„å·¥ä½œæœºåˆ¶</h2>\n<h3 id=\"1-ä½¿ç”¨å‰æå‡½æ•°çš„è¿”å›ç±»å‹\"><a class=\"anchor\" href=\"#1-ä½¿ç”¨å‰æå‡½æ•°çš„è¿”å›ç±»å‹\">#</a> 1. ä½¿ç”¨å‰æï¼šå‡½æ•°çš„è¿”å›ç±»å‹</h3>\n<p><code>?</code> è¿ç®—ç¬¦åªèƒ½åœ¨è¿”å›ç±»å‹ä¸º <code>Result&lt;T, E&gt;</code>ã€<code>Option&lt;T&gt;</code> æˆ–å…¶ä»–å®ç°äº†å†…éƒ¨ <code>FromResidual</code> Trait çš„å‡½æ•°ä¸­ä½¿ç”¨ã€‚è¿™æ˜¯å› ä¸º <code>?</code> çš„æ ¸å¿ƒè¡Œä¸ºæ˜¯â€œæå‰è¿”å›ä¸€ä¸ª <code>Err</code> æˆ– <code>None</code>â€ï¼Œå¦‚æœå½“å‰å‡½æ•°çš„ç­¾åä¸å…è®¸è¿”å›è¿™æ ·çš„ç±»å‹ï¼Œç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ã€‚</p>\n<p><strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼š <code>main</code> å‡½æ•°é»˜è®¤è¿”å› <code>()</code>ï¼Œä¸èƒ½ä½¿ç”¨ <code>?</code>ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fs</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">File</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ç¼–è¯‘é”™è¯¯ï¼</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // error[E0277]: the `?` operator can only be used in a function that returns `Result` or `Option`</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> f</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> File</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">open</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">hello.txt</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">?</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h3 id=\"2-é”™è¯¯ç±»å‹çš„è‡ªåŠ¨è½¬æ¢\"><a class=\"anchor\" href=\"#2-é”™è¯¯ç±»å‹çš„è‡ªåŠ¨è½¬æ¢\">#</a> 2. é”™è¯¯ç±»å‹çš„è‡ªåŠ¨è½¬æ¢</h3>\n<p><code>?</code> è¿ç®—ç¬¦è¿˜æœ‰ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼šå¦‚æœå®ƒé‡åˆ°çš„é”™è¯¯ç±»å‹ <code>E1</code> ä¸å½“å‰å‡½æ•°ç­¾åçš„é”™è¯¯ç±»å‹ <code>E2</code> ä¸åŒï¼Œå®ƒä¼šå°è¯•ä½¿ç”¨ <code>From</code> Trait å°† <code>E1</code> è‡ªåŠ¨è½¬æ¢ä¸º <code>E2</code>ã€‚è¿™æ˜¯é€šè¿‡ <code>E2::from(E1)</code> å®ç°çš„ã€‚è¿™åœ¨å¤„ç†æ¥è‡ªä¸åŒåº“çš„å¤šç§é”™è¯¯ç±»å‹æ—¶éå¸¸æœ‰ç”¨ã€‚</p>\n<h2 id=\"äº”-åº”ç”¨ç¨‹åºé¡¶å±‚çš„é”™è¯¯å¤„ç†\"><a class=\"anchor\" href=\"#äº”-åº”ç”¨ç¨‹åºé¡¶å±‚çš„é”™è¯¯å¤„ç†\">#</a> äº”ã€ åº”ç”¨ç¨‹åºé¡¶å±‚çš„é”™è¯¯å¤„ç†</h2>\n<p>ä» Rust 1.26 ç‰ˆæœ¬å¼€å§‹ï¼Œ<code>main</code> å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ª <code>Result</code>ï¼Œåªè¦å…¶é”™è¯¯ç±»å‹å®ç°äº† <code>std::process::Termination</code> Traitï¼ˆ<code>std::error::Error</code> Trait çš„å®ç°è€…é€šå¸¸ä¹Ÿæ»¡è¶³è¦æ±‚ï¼‰ã€‚æœ€å¸¸è§çš„å®è·µæ˜¯è®© <code>main</code> è¿”å› <code>Result&lt;(), Box&lt;dyn Error&gt;&gt;</code>ã€‚</p>\n<ul>\n<li><code>()</code> ä½œä¸ºæˆåŠŸç±»å‹ï¼šè¡¨ç¤ºç¨‹åºæˆåŠŸè¿è¡Œåˆ°ç»“æŸï¼Œæ²¡æœ‰ç‰¹å®šçš„è¿”å›å€¼ã€‚</li>\n<li><code>Box&lt;dyn Error&gt;</code> ä½œä¸ºé”™è¯¯ç±»å‹ï¼šè¿™æ˜¯ä¸€ä¸ª <strong>Trait å¯¹è±¡</strong>ï¼Œå¯ä»¥å®¹çº³ä»»ä½•å®ç°äº† <code>std::error::Error</code> Trait çš„é”™è¯¯ç±»å‹ã€‚</li>\n</ul>\n<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong><br />\nä¸€ä¸ªå¤æ‚çš„ç¨‹åºå¯èƒ½ä¼šé‡åˆ°å¤šç§é”™è¯¯ï¼Œä¾‹å¦‚ <code>io::Error</code>ï¼ˆæ–‡ä»¶æ“ä½œï¼‰ã€<code>serde_json::Error</code>ï¼ˆJSON è§£æï¼‰æˆ– <code>reqwest::Error</code>ï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ã€‚</p>\n<p>å€ŸåŠ© <code>?</code> è¿ç®—ç¬¦çš„è‡ªåŠ¨ç±»å‹è½¬æ¢èƒ½åŠ›ï¼Œä»»ä½•å…·ä½“çš„é”™è¯¯ç±»å‹ï¼ˆå¦‚ <code>io::Error</code>ï¼‰éƒ½å¯ä»¥è¢«è‡ªåŠ¨è½¬æ¢å¹¶è£…ç®±ï¼ˆBoxï¼‰æˆä¸€ä¸ª <code>Box&lt;dyn Error&gt;</code>ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ <code>main</code> å‡½æ•°ä¸­ä½¿ç”¨ <code>?</code> æ¥ç»Ÿä¸€å¤„ç†æ¥è‡ªä¸åŒæ¨¡å—çš„å¼‚æ„é”™è¯¯ï¼Œæå¤§åœ°ç®€åŒ–äº†é¡¶å±‚é”™è¯¯å¤„ç†é€»è¾‘ã€‚</p>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/28/Programming/Rust/Trait%E4%B8%8E%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E7%AE%80%E5%8C%96%EF%BC%88%E4%B8%89%EF%BC%89/",
            "url": "https://haoruanwn.github.io/2025/08/28/Programming/Rust/Trait%E4%B8%8E%E5%87%BD%E6%95%B0%E7%AD%BE%E5%90%8D%E7%AE%80%E5%8C%96%EF%BC%88%E4%B8%89%EF%BC%89/",
            "title": "Traitä¸å‡½æ•°ç­¾åç®€åŒ–ï¼ˆä¸‰ï¼‰",
            "date_published": "2025-08-28T15:14:45.000Z",
            "content_html": "<h1 id=\"æŒ‡å®šè¿”å›ç±»å‹impl-trait-è¯­æ³•\"><a class=\"anchor\" href=\"#æŒ‡å®šè¿”å›ç±»å‹impl-trait-è¯­æ³•\">#</a> æŒ‡å®šè¿”å›ç±»å‹ï¼š<code>impl Trait</code> è¯­æ³•</h1>\n<h3 id=\"æ ¸å¿ƒé—®é¢˜\"><a class=\"anchor\" href=\"#æ ¸å¿ƒé—®é¢˜\">#</a> æ ¸å¿ƒé—®é¢˜</h3>\n<p>å½“å‡½æ•°è¿”å›ä¸€ä¸ªå¤æ‚ä½†å®ç°äº†æŸä¸ª trait çš„ç±»å‹æ—¶ï¼Œå¦‚ä½•ç®€åŒ–å‡½æ•°ç­¾åï¼ŒåŒæ—¶åˆä¸ä¸¢å¤±å¿…è¦çš„ç±»å‹ä¿¡æ¯ï¼Ÿ</p>\n<p>è¿™åœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¸­å°¤ä¸ºçªå‡ºï¼š</p>\n<ol>\n<li>\n<p><strong>è¿”å›ç±»å‹æå…¶å¤æ‚</strong>ï¼šå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç”±æ³›å‹å’Œé—­åŒ…ç­‰ç»„åˆè€Œæˆçš„å…·ä½“ç±»å‹ï¼Œå…¶åç§°å¯èƒ½éå¸¸é•¿ï¼Œç”šè‡³åœ¨è¯­æ³•ä¸Šæ— æ³•ç›´æ¥å†™å‡ºã€‚è¿™åœ¨ Rust çš„è¿­ä»£å™¨é€‚é…å™¨é“¾ä¸­å°¤ä¸ºå¸¸è§ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢çš„å‡½æ•°ï¼Œå…¶è¿”å›å€¼çš„å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> get_even_plus_one</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">numbers</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">u32</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ???</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    numbers</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">into_iter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> %</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">map</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>å…¶å…·ä½“çš„è¿”å›ç±»å‹æ˜¯ <code>std::iter::Map&lt;std::iter::Filter&lt;std::vec::IntoIter&lt;u32&gt;, _&gt;, _&gt;</code>ã€‚è¿™ç§ç±»å‹æ—¢å†—é•¿åˆæš´éœ²äº†å®ç°ç»†èŠ‚ï¼Œå¹¶ä¸”ç”±äºé—­åŒ…çš„å­˜åœ¨ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä»£ç ä¸­æ˜¾å¼åœ°å†™å‡ºå®ƒã€‚</p>\n</li>\n<li>\n<p><strong>è¿”å›ç±»å‹æ˜¯å®ç°ç»†èŠ‚</strong>ï¼šä½œä¸º API çš„è®¾è®¡è€…ï¼Œæˆ‘ä»¬å¯èƒ½ä¸å¸Œæœ›å°†è¿”å›å€¼çš„å…·ä½“ç±»å‹æš´éœ²ç»™è°ƒç”¨è€…ã€‚æˆ‘ä»¬åªæƒ³æ‰¿è¯ºè¿”å›ä¸€ä¸ªâ€œå…·å¤‡æŸç§èƒ½åŠ›â€çš„å¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„å…·ä½“å®ç°å¯èƒ½ä¼šåœ¨æœªæ¥ç‰ˆæœ¬ä¸­æ›´æ”¹ï¼Œåªè¦å®ƒä»ç„¶å…·å¤‡æ‰¿è¯ºçš„èƒ½åŠ›å³å¯ã€‚</p>\n</li>\n</ol>\n<h3 id=\"impl-traitåªæè¿°èƒ½åŠ›ä¸æš´éœ²ç±»å‹\"><a class=\"anchor\" href=\"#impl-traitåªæè¿°èƒ½åŠ›ä¸æš´éœ²ç±»å‹\">#</a> <code>impl Trait</code>ï¼šåªæè¿°èƒ½åŠ›ï¼Œä¸æš´éœ²ç±»å‹</h3>\n<p><code>impl Trait</code> è¯­æ³•å…è®¸æˆ‘ä»¬åœ¨å‡½æ•°ç­¾åä¸­æŒ‡å®šä¸€ä¸ªæŠ½è±¡çš„è¿”å›ç±»å‹ï¼Œè¯¥ç±»å‹æ˜¯é™æ€åˆ†å‘çš„ï¼ˆåœ¨ç¼–è¯‘æœŸç¡®å®šï¼‰ã€‚æˆ‘ä»¬ä¸å…³å¿ƒè¿”å›å€¼çš„å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆï¼Œåªå…³å¿ƒå®ƒå®ç°äº†å“ªä¸ª <code>Trait</code>ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æˆ‘ä»¬æ‰¿è¯ºè¿”å›ä¸€ä¸ªâ€œå®ç°äº† Iterator trait çš„ä¸œè¥¿â€ï¼Œå…¶è¿­ä»£çš„å…ƒç´ ç±»å‹æ˜¯ u32</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> get_even_plus_one</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">numbers</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">u32</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Iterator</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Item</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    numbers</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">into_iter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> %</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">map</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> my_numbers</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 6</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // a_special_iterator çš„å…·ä½“ç±»å‹è¢«ç¼–è¯‘å™¨éšè—äº†</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // æˆ‘ä»¬åªçŸ¥é“å®ƒå¯ä»¥åƒä»»ä½•è¿­ä»£å™¨ä¸€æ ·è¢«ä½¿ç”¨</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> a_special_iterator</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> get_even_plus_one</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">my_numbers</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> num</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> in</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> a_special_iterator</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> num</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¾“å‡º 3, 5, 7</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p><strong>ä¼˜åŠ¿æ€»ç»“</strong>ï¼š</p>\n<ul>\n<li><strong>ç®€åŒ–ç­¾å</strong>ï¼šéšè—äº†å¤æ‚çš„å…·ä½“ç±»å‹ã€‚</li>\n<li><strong>å°è£…å®ç°</strong>ï¼šå…è®¸åº“ä½œè€…åœ¨ä¸ç ´åå…¼å®¹æ€§çš„å‰æä¸‹æ”¹å˜å†…éƒ¨å®ç°ã€‚</li>\n<li><strong>é›¶æˆæœ¬æŠ½è±¡</strong>ï¼š<code>impl Trait</code> æ˜¯é™æ€åˆ†å‘çš„ï¼Œæ²¡æœ‰è¿è¡Œæ—¶å¼€é”€ã€‚</li>\n</ul>\n<h3 id=\"ä¸-c-çš„å¯¹æ¯”\"><a class=\"anchor\" href=\"#ä¸-c-çš„å¯¹æ¯”\">#</a> ä¸ C++ çš„å¯¹æ¯”</h3>\n<p><code>impl Trait</code> çš„æ¦‚å¿µåœ¨ C++ ä¸­å¯ä»¥æ‰¾åˆ°ä¸€äº›ç±»ä¼¼çš„æ¨¡å¼ï¼Œä½† Rust æä¾›äº†æ›´å¼ºçš„ç¼–è¯‘æœŸä¿è¯ã€‚</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">C++ æ–¹å¼</th>\n<th style=\"text-align:left\">æè¿°</th>\n<th style=\"text-align:left\">ä¼˜ç‚¹</th>\n<th style=\"text-align:left\">ç¼ºç‚¹</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><code>auto</code> è¿”å›ç±»å‹</td>\n<td style=\"text-align:left\">ä½¿ç”¨ <code>auto</code> å…³é”®å­—è®©ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼è¿”å›ç±»å‹ï¼Œä»è€Œéšè—å¤æ‚æ€§ã€‚</td>\n<td style=\"text-align:left\">éšè—äº†å¤æ‚çš„æ¨¡æ¿ç±»å‹åï¼Œç®€åŒ–äº†å‡½æ•°ç­¾åã€‚</td>\n<td style=\"text-align:left\"><code>auto</code> åªéšè—äº†ç±»å‹ï¼Œæ²¡æœ‰æä¾›ä»»ä½•å…³äºâ€œè¿”å›å€¼èƒ½åŠ›â€çš„å¥‘çº¦æˆ–æ¥å£ä¿¡æ¯ã€‚è°ƒç”¨è€…å¿…é¡»é˜…è¯»æ–‡æ¡£æˆ–æºç æ‰èƒ½çŸ¥é“è¿”å›çš„å¯¹è±¡èƒ½åšä»€ä¹ˆã€‚</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">è¿”å›åŸºç±»æŒ‡é’ˆ/å¼•ç”¨</td>\n<td style=\"text-align:left\">è¿”å›ä¸€ä¸ªæŒ‡å‘åŸºç±»ï¼ˆæ¥å£ç±»ï¼‰çš„æŒ‡é’ˆæˆ–å¼•ç”¨ï¼Œä»¥å®ç°å¤šæ€ã€‚</td>\n<td style=\"text-align:left\">åœ¨å‡½æ•°ç­¾åä¸­æ˜ç¡®äº†æ¥å£ä¿¡æ¯ã€‚</td>\n<td style=\"text-align:left\">é€šå¸¸æ¶‰åŠåŠ¨æ€åˆ†å‘ï¼ˆè™šå‡½æ•°ï¼‰å’Œå †å†…å­˜åˆ†é…ï¼ˆå¦‚ <code>std::unique_ptr</code>ï¼‰ï¼Œä¼šå¸¦æ¥è¿è¡Œæ—¶å¼€é”€ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"c-auto-ç¤ºä¾‹\"><a class=\"anchor\" href=\"#c-auto-ç¤ºä¾‹\">#</a> C++ <code>auto</code> ç¤ºä¾‹</h4>\n<p>ä¸‹é¢çš„ä»£ç ä½¿ç”¨ <code>auto</code> éšè—äº† C++20 ranges åº“ç”Ÿæˆçš„å¤æ‚ç±»å‹ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">vector</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">ranges</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä½¿ç”¨ autoï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨å†™å‡º ranges ç”Ÿæˆçš„é‚£ä¸ªå¤æ‚ç±»å‹å</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">auto</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> get_even_plus_one</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">vector</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> numbers</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    return</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> numbers</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">         |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">views</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> return</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> n </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">%</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">         |</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">views</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">transform</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">[</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">]</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> n</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> return</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> n </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">+</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">vector</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> my_numbers </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">1</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 4</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 6</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    auto</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> a_special_range </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> get_even_plus_one</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">my_numbers</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    for</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> num </span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> a_special_range</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> num </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¾“å‡º 3, 5, 7</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>ç›¸è¾ƒäº C++ çš„ <code>auto</code>ï¼ŒRust çš„ <code>impl Trait</code> ä¸ä»…éšè—äº†ç±»å‹ï¼Œè¿˜æ˜ç¡®åœ°åœ¨ç¼–è¯‘æœŸå¼ºåˆ¶çº¦æŸäº†è¯¥ç±»å‹å¿…é¡»æ»¡è¶³çš„ <code>Trait</code> å¥‘çº¦ï¼Œæä¾›äº†æ›´å¥½çš„ç±»å‹å®‰å…¨å’Œä»£ç æ¸…æ™°åº¦ã€‚</p>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/27/Programming/Rust/Trait%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F%EF%BC%88%E4%BA%8C%EF%BC%89/",
            "url": "https://haoruanwn.github.io/2025/08/27/Programming/Rust/Trait%E4%B8%8E%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F%EF%BC%88%E4%BA%8C%EF%BC%89/",
            "title": "Traitä¸æ³›å‹çº¦æŸï¼ˆäºŒï¼‰",
            "date_published": "2025-08-27T13:54:39.000Z",
            "content_html": "<h1 id=\"trait-ä¸æ³›å‹çº¦æŸtrait-bounds\"><a class=\"anchor\" href=\"#trait-ä¸æ³›å‹çº¦æŸtrait-bounds\">#</a> Trait ä¸æ³›å‹çº¦æŸï¼šTrait Bounds</h1>\n<p><code>Trait</code> çº¦æŸï¼ˆTrait Boundsï¼‰æ˜¯ Rust æ³›å‹ç³»ç»Ÿä¸­çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå®ƒå…è®¸æˆ‘ä»¬å¯¹æ³›å‹å‚æ•°å¯ä»¥ä½¿ç”¨çš„ç±»å‹è¿›è¡Œé™åˆ¶ã€‚å…¶åŠŸèƒ½å’Œè®¾è®¡å“²å­¦ä¸ C++20 ä¸­å¼•å…¥çš„ <code>Concepts</code> éå¸¸ç›¸ä¼¼ï¼Œä¸»è¦è§£å†³äº†ä¼ ç»Ÿ C++ æ¨¡æ¿ï¼ˆTemplatesï¼‰å› â€œé¸­å­ç±»å‹â€è€Œå¯¼è‡´çš„ç¼–è¯‘é”™è¯¯ä¿¡æ¯æ™¦æ¶©éš¾æ‡‚çš„é—®é¢˜ã€‚</p>\n<h3 id=\"ä¸€-c-æ¨¡æ¿çš„å†å²é—®é¢˜é¸­å­ç±»å‹\"><a class=\"anchor\" href=\"#ä¸€-c-æ¨¡æ¿çš„å†å²é—®é¢˜é¸­å­ç±»å‹\">#</a> ä¸€ã€C++ æ¨¡æ¿çš„å†å²é—®é¢˜ï¼šé¸­å­ç±»å‹</h3>\n<p>åœ¨ C++20 å¼•å…¥ <code>Concepts</code> ä¹‹å‰ï¼ŒC++ æ¨¡æ¿éµå¾ªâ€œé¸­å­ç±»å‹â€åŸåˆ™ï¼šâ€œå¦‚æœä¸€ä¸ªä¸œè¥¿èµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥ä¹Ÿåƒé¸­å­ï¼Œé‚£å®ƒå°±æ˜¯ä¸€åªé¸­å­â€ã€‚ç¼–è¯‘å™¨ä¸ä¼šåœ¨å®šä¹‰æ¨¡æ¿æ—¶æ£€æŸ¥ç±»å‹çš„åˆæ³•æ€§ï¼Œè€Œæ˜¯åœ¨æ¨¡æ¿è¢«å…·ä½“ç±»å‹å®ä¾‹åŒ–æ—¶ï¼Œæ‰å»æ£€æŸ¥æ¨¡æ¿å†…çš„ä»£ç æ˜¯å¦å¯¹è¯¥ç±»å‹æœ‰æ•ˆã€‚</p>\n<p>è¿™ç§æœºåˆ¶å¯¼è‡´ï¼Œå¦‚æœä¼ å…¥çš„ç±»å‹ä¸æ»¡è¶³æ¨¡æ¿å†…éƒ¨çš„éšå¼è¦æ±‚ï¼ˆä¾‹å¦‚ç¼ºå°‘æŸä¸ªæˆå‘˜å‡½æ•°ï¼‰ï¼Œç¼–è¯‘å™¨ä¸ä¼šç›´æ¥æç¤ºâ€œç±»å‹ä¸æ»¡è¶³çº¦æŸâ€ï¼Œè€Œæ˜¯ä¼šæ·±å…¥æ¨¡æ¿å†…éƒ¨ï¼ŒæŠ¥å‘Šä¸€ä¸ªå…·ä½“ä½†è„±ç¦»ä¸Šä¸‹æ–‡çš„ã€å¾€å¾€éå¸¸å†—é•¿çš„ç¼–è¯‘é”™è¯¯ï¼Œå¢åŠ äº†è°ƒè¯•éš¾åº¦ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">string</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æ­¤æ¨¡æ¿å‡½æ•°éšå¼åœ°æœŸæœ›ç±»å‹ T æœ‰ä¸€ä¸ª .summarize() æˆå‘˜å‡½æ•°</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> print_summary</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">string</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> const</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> return</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">This is an article.</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">int</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    Article article</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    print_summary</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">article</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // OKï¼ŒArticle å®ç°äº† .summarize()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    int</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> my_number </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ç¼–è¯‘å¤±è´¥ï¼šint ç±»å‹æ²¡æœ‰ .summarize() æˆå‘˜å‡½æ•°</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ç¼–è¯‘å™¨ä¼šäº§ç”Ÿä¸€å¤§å †æ™¦æ¶©éš¾æ‡‚çš„æ¨¡æ¿é”™è¯¯ä¿¡æ¯</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // print_summary(my_number); </span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h3 id=\"äºŒ-åŸºæœ¬çš„-trait-bound-è¯­æ³•\"><a class=\"anchor\" href=\"#äºŒ-åŸºæœ¬çš„-trait-bound-è¯­æ³•\">#</a> äºŒã€åŸºæœ¬çš„ Trait Bound è¯­æ³•</h3>\n<p>Rust é€šè¿‡ Trait Bounds åœ¨ç¼–è¯‘æ—¶å°±å¯¹æ³›å‹å‚æ•°è¿›è¡Œçº¦æŸï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚åŸºæœ¬è¯­æ³•æ˜¯ <code>&lt;T: Trait&gt;</code>ï¼Œå®ƒæ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ï¼šä»»ä½•ç”¨äºå®ä¾‹åŒ–æ³›å‹å‚æ•° <code>T</code> çš„ç±»å‹ï¼Œéƒ½<strong>å¿…é¡»</strong>å®ç°äº†æŒ‡å®šçš„ <code>Trait</code>ã€‚</p>\n<p>è¿™æ ·ï¼Œç¼–è¯‘å™¨å°±å¯ä»¥åœ¨å‡½æ•°å®šä¹‰å±‚é¢è¿›è¡Œæ£€æŸ¥ã€‚å¦‚æœä¸€ä¸ªç±»å‹ä¸æ»¡è¶³çº¦æŸï¼Œç¼–è¯‘å™¨ä¼šç«‹å³ç»™å‡ºä¸€ä¸ªæ¸…æ™°ã€å‡†ç¡®çš„é”™è¯¯æç¤ºï¼ŒæŒ‡å‡ºå“ªä¸ª Trait æœªè¢«å®ç°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å®šä¹‰ä¸€ä¸ª Summary Trait</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">trait</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    headline</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä¸º Article å®ç° Summary Trait</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        format!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Article: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">headline</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// &#x3C;T: Summary> å°±æ˜¯ Trait Bound</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å®ƒçº¦æŸäº† T å¿…é¡»æ˜¯å®ç°äº† Summary Trait çš„ç±»å‹</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ç¼–è¯‘å™¨å› æ­¤å¯ä»¥ä¿è¯ item.summarize() è°ƒç”¨æ˜¯åˆæ³•çš„</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> notify</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">item</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Breaking News! </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">summarize</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> article</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> headline</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Rust is Awesome</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">to_string</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    notify</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">article</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // OK</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> my_number</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ç¼–è¯‘å¤±è´¥ï¼šç¼–è¯‘å™¨ä¼šæ˜ç¡®æç¤º a trait bound was not satisfied:</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // the trait `Summary` is not implemented for `&#123;integer&#125;`</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // notify(&#x26;my_number);</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>è¿™ä¸ C++20 <code>Concepts</code> çš„ä½œç”¨å®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯å°†éšå¼è¦æ±‚æ˜ç¡®åŒ–ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// C++20 Concepts</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">string</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">concepts</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">concept</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> HasSummary </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> requires</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> t</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> t</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">summarize</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">convertible_to</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#59873A;--shiki-dark:#80A665\">std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">string</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// çº¦æŸ T å¿…é¡»æ»¡è¶³ HasSummary</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">HasSummary</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> notify</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">cout </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#999999;--shiki-dark:#666666\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">endl</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æ­¤æ—¶ï¼Œç”¨ int è°ƒç”¨ notify ä¼šå¾—åˆ°ä¸€ä¸ªå…³äº Concept ä¸æ»¡è¶³çš„æ¸…æ™°é”™è¯¯</span></span></code></pre>\n<h3 id=\"ä¸‰-æŒ‡å®šå¤šä¸ª-trait-bound-è¯­æ³•\"><a class=\"anchor\" href=\"#ä¸‰-æŒ‡å®šå¤šä¸ª-trait-bound-è¯­æ³•\">#</a> ä¸‰ã€æŒ‡å®šå¤šä¸ª Trait Bound: <code>+</code> è¯­æ³•</h3>\n<p>å½“æ³›å‹å‚æ•°éœ€è¦æ»¡è¶³å¤šä¸ªçº¦æŸæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>+</code> è¯­æ³•å°†å¤šä¸ª Trait Bound ç»„åˆèµ·æ¥ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Display</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Debug</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">trait</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> headline</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> format!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Article: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">headline</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Display</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> f</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;mut</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Formatter</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">_</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Result</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> write!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">f</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">headline</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Debug</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> f</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;mut</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Formatter</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">_</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Result</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> write!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">f</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Article &#x3C;!--swigï¿¼0--></span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">headline</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// T å¿…é¡»åŒæ—¶å®ç° Summary å’Œ Display ä¸¤ä¸ª Trait</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> notify_and_print</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Display</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">item</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Summary: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">summarize</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // item å¯ä»¥ç›´æ¥ç”¨ &#123;&#125; æ‰“å°ï¼Œå› ä¸º T å®ç°äº† Display</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Displaying item: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> article</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Article</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> headline</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Rust is Awesome</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">to_string</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    notify_and_print</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">article</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>è¿™ç±»ä¼¼äº C++20 <code>Concepts</code> ä¸­ä½¿ç”¨ <code>&amp;&amp;</code> æ¥ç»„åˆå¤šä¸ªçº¦æŸã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä¼ªä»£ç ç¤ºä¾‹</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">concept</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> IsDisplayable </span><span style=\"color:#999999;--shiki-dark:#666666\">=</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> requires</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> t</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> /* ... */</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// è¦æ±‚ T åŒæ—¶æ»¡è¶³ HasSummary å’Œ IsDisplayable</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    requires</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> HasSummary</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> IsDisplayable</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> some_function</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> item</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> /* ... */</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h3 id=\"å››-ä½¿ç”¨-where-å­å¥å¤„ç†å¤æ‚çº¦æŸ\"><a class=\"anchor\" href=\"#å››-ä½¿ç”¨-where-å­å¥å¤„ç†å¤æ‚çº¦æŸ\">#</a> å››ã€ä½¿ç”¨ <code>where</code> å­å¥å¤„ç†å¤æ‚çº¦æŸ</h3>\n<p>å½“æ³›å‹å‚æ•°è¾ƒå¤šï¼Œæˆ–è€…æ¯ä¸ªå‚æ•°çš„ Trait Bound åˆ—è¡¨å¾ˆé•¿æ—¶ï¼Œå‡½æ•°ç­¾åä¼šå˜å¾—éå¸¸è‡ƒè‚¿å’Œéš¾ä»¥é˜…è¯»ã€‚æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>where</code> å­å¥æ¥å£°æ˜çº¦æŸï¼Œå°†å‡½æ•°ç­¾åï¼ˆåšä»€ä¹ˆï¼‰å’Œæ³›å‹çº¦æŸï¼ˆå¯¹è°åšï¼‰åˆ†ç¦»å¼€ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</p>\n<p><strong>æœªä½¿ç”¨ <code>where</code> çš„å†™æ³•ï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"># </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Display</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Debug</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"># </span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">cmp</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">PartialEq</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> some_function</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Display</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Clone</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> U</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Clone</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Debug</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">t</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> u</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">U</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> i32</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p><strong>ä½¿ç”¨ <code>where</code> å­å¥çš„å†™æ³•ï¼š</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Display</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Debug</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">cmp</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">PartialEq</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä½¿ç”¨ where å­å¥å°†å¤æ‚çš„çº¦æŸæ•´ç†åˆ°å‡½æ•°ç­¾åä¹‹å</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> compare_and_print</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> U</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">a</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> b</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">U</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">where</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Display</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> PartialEq</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">U</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // T å¿…é¡»èƒ½æ‰“å°ï¼Œä¸”èƒ½ä¸ç±»å‹ U è¿›è¡Œç›¸ç­‰æ¯”è¾ƒ</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">    U</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Display</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> +</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Debug</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // U å¿…é¡»èƒ½æ‰“å°ï¼Œä¸”æ”¯æŒè°ƒè¯•æ‰“å°</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">a: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> a</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">b: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> b</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Are they equal? </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> a</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">eq</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">b</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Debug info for b: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">:?</span><span style=\"color:#999999;--shiki-dark:#666666\">&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> b</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>C++20 çš„ <code>requires</code> å­å¥ä¹Ÿæä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œç”¨äºå°†å¤æ‚çš„çº¦æŸæ¡ä»¶æ•´ç†åœ¨å‡½æ•°ç­¾åä¹‹åã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-cpp\"><span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">concepts</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">#</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\">include</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> &#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">iostream</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">></span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä¼ªä»£ç ï¼Œä»…ä¸ºæ¼”ç¤ºç»“æ„</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> concept</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> IsDisplayable </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> /* ... */</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> concept</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> IsDebuggable </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> /* ... */</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">template</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> typename</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> U</span><span style=\"color:#999999;--shiki-dark:#666666\">></span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">void</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> compare_and_print</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">const</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> a</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> const</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> U</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> b</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    requires</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#999999;--shiki-dark:#666666\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">equality_comparable_with</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">T</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> U</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">             IsDisplayable</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">T</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">             IsDisplayable</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">U</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;&#x26;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">             IsDebuggable</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">U</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // å‡½æ•°ä½“</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/27/Programming/Rust/Trait%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%80%EF%BC%89/",
            "url": "https://haoruanwn.github.io/2025/08/27/Programming/Rust/Trait%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%88%E4%B8%80%EF%BC%89/",
            "title": "Traitçš„åŸºæœ¬ä½¿ç”¨ï¼ˆä¸€ï¼‰",
            "date_published": "2025-08-27T13:54:13.000Z",
            "content_html": "<h2 id=\"ä¸€-trait-çš„æœ¬è´¨å®šä¹‰å…±äº«è¡Œä¸º\"><a class=\"anchor\" href=\"#ä¸€-trait-çš„æœ¬è´¨å®šä¹‰å…±äº«è¡Œä¸º\">#</a> ä¸€ã€<strong>Trait çš„æœ¬è´¨ï¼šå®šä¹‰å…±äº«è¡Œä¸º</strong></h2>\n<ul>\n<li><strong>æ ¸å¿ƒç±»æ¯” (C++)</strong>: <code>trait</code> â‰ˆ æŠ½è±¡åŸºç±» (Abstract Base Class) / çº¯è™šæ¥å£ (Interface)ã€‚</li>\n<li><strong>å…³é”®åŒºåˆ«</strong>: Rust çš„ <code>trait</code> æ˜¯ç¼–è¯‘æœŸæŠ½è±¡ï¼Œä¸”æ›´ä¾§é‡äºè¡Œä¸ºçš„â€œç»„åˆâ€è€Œéç±»å‹çš„â€œç»§æ‰¿â€ã€‚</li>\n<li><strong>è¦ç‚¹</strong>:\n<ul>\n<li>å¦‚ä½•å®šä¹‰ä¸€ä¸ª <code>trait</code>ï¼Ÿ</li>\n<li>å¦‚ä½•ä¸ºä¸€ä¸ªç±»å‹å®ç° (<code>impl</code>) <code>trait</code>ï¼Ÿ</li>\n<li>æä¾›é»˜è®¤å®ç° (Default Implementation) -&gt; å¯¹æ¯” C++ æŠ½è±¡åŸºç±»ä¸­çš„è™šå‡½æ•°å®ç°ã€‚</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"1-c-ä¸­çš„ç±»æ¯”æŠ½è±¡åŸºç±»\"><a class=\"anchor\" href=\"#1-c-ä¸­çš„ç±»æ¯”æŠ½è±¡åŸºç±»\">#</a> 1. C++ ä¸­çš„ç±»æ¯”ï¼šæŠ½è±¡åŸºç±»</h3>\n<p>åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€å¦‚ C++ ä¸­ï¼Œå®ç°å…±äº«è¡Œä¸ºé€šå¸¸é€šè¿‡å®šä¹‰ä¸€ä¸ªæŠ½è±¡åŸºç±»æ¥å®Œæˆã€‚è¯¥åŸºç±»åŒ…å«çº¯è™šå‡½æ•°ï¼Œå…¶ä»–ç±»é€šè¿‡ç»§æ‰¿è¿™ä¸ªæŠ½è±¡åŸºç±»å¹¶å®ç°è¿™äº›çº¯è™šå‡½æ•°æ¥è·å¾—å…±äº«çš„è¡Œä¸ºã€‚</p>\n<h4 id=\"2-å®šä¹‰å’Œå®ç°trait\"><a class=\"anchor\" href=\"#2-å®šä¹‰å’Œå®ç°trait\">#</a> 2ã€å®šä¹‰å’Œå®ç°trait</h4>\n<p>åœ¨ Rust ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å®šä¹‰ <code>trait</code> å’Œä¸ºç±»å‹ <code>impl</code> è¿™ä¸ª <code>trait</code> æ¥å®ç°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 1. å®šä¹‰ä¸€ä¸ª Traitï¼Œå°±åƒå®šä¹‰ä¸€ä¸ªæ¥å£</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å®ƒåªåŒ…å«æ–¹æ³•çš„ç­¾åï¼Œä¸åŒ…å«å…·ä½“å®ç°ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pub</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> trait</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å®šä¹‰ä¸¤ä¸ªä¸åŒçš„ç»“æ„ä½“</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pub</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> NewsArticle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    pub</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> headline</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    pub</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> author</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    pub</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> content</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pub</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Tweet</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    pub</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> username</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    pub</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> content</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 2. ä¸º NewsArticle ç±»å‹å®ç° (impl) Summary trait</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// è¿™å‘Šè¯‰ç¼–è¯‘å™¨ï¼ŒNewsArticle å®ä¾‹ç°åœ¨å…·å¤‡äº† summarize çš„èƒ½åŠ›ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> NewsArticle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        format!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">, by </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">headline</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">author</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 3. ä¸º Tweet ç±»å‹ä¹Ÿå®ç° Summary trait</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Tweet</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        format!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">@</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> tweeted: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">username</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">content</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> article</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> NewsArticle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        headline</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Rust wins another award!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        author</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Rustacean</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        content</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">...</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> tweet</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Tweet</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        username</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">johndoe</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        content</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">I really love Rust's trait system!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">New article: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> article</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">summarize</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">New tweet: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> tweet</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">summarize</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<h4 id=\"3-æä¾›é»˜è®¤å®ç°\"><a class=\"anchor\" href=\"#3-æä¾›é»˜è®¤å®ç°\">#</a> 3ã€æä¾›é»˜è®¤å®ç°</h4>\n<p>Trait ä¸­çš„æ–¹æ³•å¯ä»¥æ‹¥æœ‰é»˜è®¤å®ç°ã€‚è¿™æ„å‘³ç€å®ç°è¯¥ Trait çš„ç±»å‹å¯ä»¥æ— éœ€è¦†ç›–è¿™äº›æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤è¡Œä¸ºã€‚è¿™ç±»ä¼¼äº C++ ä¸­æ‹¥æœ‰å‡½æ•°ä½“çš„è™šå‡½æ•°ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">pub</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> trait</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // æä¾›ä¸€ä¸ªæœ‰é»˜è®¤å®ç°çš„æ–¹æ³•</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // ä»»ä½•å®ç° Summary çš„ç±»å‹éƒ½ä¼šè‡ªåŠ¨è·å¾—è¿™ä¸ªæ–¹æ³•</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> read_more</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">(Read more...)</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // é»˜è®¤è¡Œä¸º</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ä¸º NewsArticle å®ç°æ—¶ï¼Œæˆ‘ä»¬åªå…³å¿ƒå¿…é¡»å®ç°çš„ summarize</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> NewsArticle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        format!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">, by </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">headline</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">author</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // æˆ‘ä»¬å¯ä»¥é€‰æ‹©è¦†ç›–(override)é»˜è®¤å®ç°</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> read_more</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        format!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Read more from </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">...</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">author</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Summary</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Tweet</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // Tweet åªå®ç°å¿…é¡»çš„ summarizeï¼Œå®ƒå°†å…è´¹è·å¾—é»˜è®¤çš„ read_more</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> summarize</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        format!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">@</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> tweeted: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">username</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">content</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> article</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> NewsArticle</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        headline</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Rust wins another award!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        author</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Rustacean</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        content</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">...</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> tweet</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Tweet</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        username</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">johndoe</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">        content</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">I really love Rust's trait system!</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> article</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">read_more</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¾“å‡º: \"Read more from Rustacean...\"</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> tweet</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">read_more</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">   // è¾“å‡º: \"(Read more...)\"</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>ç±»ä¼¼äºc++ä¸­çš„æ™®é€šè™šå‡½æ•°ï¼Œè€Œä¸æ˜¯çº¯è™šå‡½æ•°</p>\n<h4 id=\"é—®é¢˜\"><a class=\"anchor\" href=\"#é—®é¢˜\">#</a> é—®é¢˜</h4>\n<ol>\n<li>\n<p><strong>å¿…é¡»å®ç° Trait ä¸­çš„æ‰€æœ‰æ–¹æ³•å—ï¼Ÿ</strong></p>\n<p>ä¸æ˜¯ã€‚åªéœ€è¦å®ç°é‚£äº›æ²¡æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æ˜¯å¼ºåˆ¶å¿…é¡»å®ç°çš„ã€‚</p>\n</li>\n<li>\n<p><strong>å¤§éƒ¨åˆ† Trait çš„æ–¹æ³•éƒ½æ˜¯é»˜è®¤æ–¹æ³•å—ï¼Ÿ</strong></p>\n<p>æ˜¯çš„ï¼ŒRust æ ‡å‡†åº“éµå¾ªä¸€ç§â€œæœ€å°åŒ– <code>trait</code>â€çš„è®¾è®¡æ¨¡å¼ã€‚è¯¥æ¨¡å¼è¦æ±‚å®ç°è€…ä»…éœ€æä¾›ä¸€ä¸¤ä¸ªæœ€æ ¸å¿ƒçš„æ–¹æ³•ï¼Œ<code>trait</code> ä¼šåŸºäºè¿™äº›æ ¸å¿ƒæ–¹æ³•ï¼Œé€šè¿‡é»˜è®¤å®ç°æä¾›å¤§é‡ä¾¿æ·çš„é«˜çº§åŠŸèƒ½ã€‚</p>\n<p>å…¸å‹çš„ä¾‹å­æ˜¯ <code>Iterator</code> traitã€‚è¦ä½¿è‡ªå®šä¹‰ç±»å‹æˆä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œ<strong>å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•å°±æ˜¯ <code>next()</code></strong>ã€‚ä¸€æ—¦å®ç°äº† <code>next()</code>ï¼Œç±»å‹å°±è‡ªåŠ¨è·å¾—äº†æ•°åä¸ªå¼ºå¤§çš„æ–¹æ³•ï¼Œå¦‚ <code>map()</code>ã€<code>filter()</code>ã€<code>fold()</code>ã€<code>collect()</code> ç­‰ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// ç¤ºä¾‹ï¼šä¸€ä¸ªä» 1 æ•°åˆ° 5 çš„ç®€å•è¿­ä»£å™¨</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Counter</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    current</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    max</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// æˆ‘ä»¬åªéœ€è¦å®ç° Iterator trait</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Iterator</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Counter</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    type</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Item</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // å…³è”ç±»å‹ï¼ŒæŒ‡å®šè¿­ä»£å™¨è¿”å›çš„å…ƒç´ ç±»å‹</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // è¿™æ˜¯æˆ‘ä»¬å”¯ä¸€éœ€è¦æ‰‹å†™çš„æ ¸å¿ƒæ–¹æ³•ï¼</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> next</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;mut</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Option</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">Self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Item</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">        if</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">current </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">max </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">            self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">current </span><span style=\"color:#999999;--shiki-dark:#666666\">+=</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            Some</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">(</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">current</span><span style=\"color:#a13865;--shiki-dark:#d9739f\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> else</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">            None</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> counter</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Counter</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> current</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> max</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 5</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    // åŸºäº next() è·å¾—çš„å…è´¹åŠŸèƒ½</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> sum_of_squares_of_even_numbers</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> u32</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> counter</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">filter</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|&#x26;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">num</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> num</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> %</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> ==</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // filter æ˜¯é»˜è®¤æ–¹æ³•</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">map</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">num</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">|</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> num</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> *</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> num</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">       // map æ˜¯é»˜è®¤æ–¹æ³•</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">        .</span><span style=\"color:#59873A;--shiki-dark:#80A665\">sum</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">                     // sum ä¹Ÿæ˜¯é»˜è®¤æ–¹æ³•</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">        </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Sum: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> sum_of_squares_of_even_numbers</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¾“å‡º: Sum: 20 (å³ 2*2 + 4*4)</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n<p>è¿™äº›é»˜è®¤æ–¹æ³•å†…éƒ¨çš„å®ç°ï¼Œå…¨éƒ½æ˜¯é€šè¿‡åå¤è°ƒç”¨ä½ æä¾›çš„é‚£ä¸ª <code>next()</code> æ–¹æ³•æ¥å®Œæˆçš„ã€‚</p>\n<ul>\n<li><strong>ä¸C++çš„åŒºåˆ«</strong>: C++ æ ‡å‡†åº“ä¸æŠŠ <code>map</code>, <code>filter</code> ç­‰åŠŸèƒ½æ”¾åœ¨è¿­ä»£å™¨åŸºç±»ä¸­ï¼Œè€Œæ˜¯æä¾›å¤§é‡çš„<strong>å…¨å±€ç®—æ³•å‡½æ•°</strong>ï¼ˆå¦‚ <code>std::transform</code>, <code>std::copy_if</code>ï¼‰ï¼Œè¿™äº›å‡½æ•°æ¥å—ä¸€å¯¹è¿­ä»£å™¨ä½œä¸ºå‚æ•°ã€‚Rust çš„æ–¹æ³•é“¾è°ƒç”¨æ–¹å¼é€šå¸¸è¢«è®¤ä¸ºå¯è¯»æ€§æ›´é«˜ã€‚</li>\n</ul>\n</li>\n<li>\n<p><strong>å¦‚æœ Trait å…¨æ˜¯é»˜è®¤æ–¹æ³•ï¼Œç¼–è¯‘å™¨å¦‚ä½•çŸ¥é“ç±»å‹å®ç°äº†å®ƒï¼Ÿ</strong></p>\n<p>Rust éµå¾ªâ€œæ˜¾å¼ä¼˜äºéšå¼â€çš„åŸåˆ™ã€‚å³ä½¿ä¸€ä¸ª <code>trait</code> çš„æ‰€æœ‰æ–¹æ³•éƒ½æœ‰é»˜è®¤å®ç°ï¼Œä½ <strong>ä»ç„¶å¿…é¡»ä¸ºè¿™ä¸ªç±»å‹å†™ä¸€ä¸ªç©ºçš„ <code>impl</code> å—</strong>æ¥æ˜¾å¼åœ°å‘Šè¯‰ç¼–è¯‘å™¨è¯¥ç±»å‹å®ç°äº†è¿™ä¸ª <code>trait</code>ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å‡è®¾ MyTrait çš„æ‰€æœ‰æ–¹æ³•éƒ½æœ‰é»˜è®¤å®ç°</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">trait</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyTrait</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> do_something</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> println!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Default action</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyType</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å¿…é¡»æœ‰è¿™ä¸ªç©ºçš„ impl å—</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyTrait</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyType</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> instance</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> MyType</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    instance</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">do_something</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // å¯ä»¥è°ƒç”¨</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n</li>\n</ol>\n<h2 id=\"äºŒ-trait-çš„å®ç°è§„åˆ™ä¸€è‡´æ€§ä¸å­¤å„¿è§„åˆ™\"><a class=\"anchor\" href=\"#äºŒ-trait-çš„å®ç°è§„åˆ™ä¸€è‡´æ€§ä¸å­¤å„¿è§„åˆ™\">#</a> äºŒã€<strong>Trait çš„å®ç°è§„åˆ™ï¼šä¸€è‡´æ€§ä¸å­¤å„¿è§„åˆ™</strong></h2>\n<ul>\n<li><strong>æ ¸å¿ƒé—®é¢˜</strong>: è°æœ‰æƒä¸ºå“ªä¸ªç±»å‹å®ç°å“ªä¸ª <code>trait</code>ï¼Ÿ</li>\n<li><strong>C++ å¯¹æ¯”</strong>: C++ æ²¡æœ‰è¿™ä¸ªæ¦‚å¿µï¼Œä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä¸ºä»»ä½•ç±»å†™ä¸€ä¸ªè‡ªç”±å‡½æ•°ï¼Œè¿™æœ‰æ—¶ä¼šå¯¼è‡´æ··ä¹±ã€‚å­¤å„¿è§„åˆ™ç³»ç»Ÿæ€§åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¿è¯äº†ä»£ç åº“çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>\n<li><strong>è¦ç‚¹</strong>: è§„åˆ™è¯¦è§£ï¼šâ€œåªè¦ <code>trait</code> æˆ–è€…ç±»å‹å…¶ä¸­ä¹‹ä¸€å±äºå½“å‰ <code>crate</code>ï¼Œå°±å¯ä»¥ä¸ºå…¶å®ç° <code>trait</code>â€ã€‚</li>\n</ul>\n<h4 id=\"1-cä¸­çš„å¯¹åº”æ“ä½œ\"><a class=\"anchor\" href=\"#1-cä¸­çš„å¯¹åº”æ“ä½œ\">#</a> 1ã€C++ä¸­çš„å¯¹åº”æ“ä½œ</h4>\n<p>åœ¨ C++ ä¸­ï¼Œå…è®¸ä»»ä½•äººåœ¨ä»»ä½•åœ°æ–¹ä¸ºä»»ä½•ç±»å‹å®ç°è‡ªç”±å‡½æ•°æˆ–é‡è½½æ“ä½œç¬¦ï¼ˆåªè¦èƒ½è®¿é—®å…¶å®šä¹‰ï¼‰ã€‚è¿™ç§çµæ´»æ€§å¯èƒ½å¯¼è‡´ä¸å¯é¢„çŸ¥çš„æ··ä¹±ï¼Œä¾‹å¦‚ä¸¤ä¸ªä¸åŒçš„ç¬¬ä¸‰æ–¹åº“å¯èƒ½ä¸ºåŒä¸€ä¸ªæ ‡å‡†åº“ç±»å‹é‡è½½äº†ç›¸åŒçš„æ“ä½œç¬¦ï¼Œä»è€Œå¼•å‘å†²çªå’Œä¸ç¡®å®šæ€§ã€‚</p>\n<h4 id=\"2-å­¤å„¿åŸåˆ™\"><a class=\"anchor\" href=\"#2-å­¤å„¿åŸåˆ™\">#</a> 2ã€å­¤å„¿åŸåˆ™</h4>\n<p>è¦ä¸ºä¸€ä¸ªç±»å‹ <code>T</code> å®ç°ä¸€ä¸ª <code>trait Tr</code>ï¼Œé‚£ä¹ˆ<strong>ç±»å‹ <code>T</code></strong> æˆ– <strong><code>trait Tr</code></strong>ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªå¿…é¡»æ˜¯åœ¨å½“å‰ <code>crate</code>ï¼ˆå¯ç†è§£ä¸ºå½“å‰é¡¹ç›®æˆ–åº“ï¼‰ä¸­å®šä¹‰çš„ã€‚</p>\n<p>æ¢è¨€ä¹‹ï¼Œ<strong>ä¸èƒ½ä¸ºä¸€ä¸ªå¤–éƒ¨çš„ç±»å‹å®ç°ä¸€ä¸ªå¤–éƒ¨çš„ <code>trait</code></strong>ã€‚è¿™æ ·çš„å®ç°ä¼šåƒä¸€ä¸ªæ²¡æœ‰å½’å±çš„â€œå­¤å„¿â€ï¼Œå› ä¸ºå®ƒæ—¢ä¸å±äºç±»å‹ <code>T</code> çš„ç»´æŠ¤è€…ï¼Œä¹Ÿä¸å±äº <code>trait Tr</code> çš„ç»´æŠ¤è€…ã€‚</p>\n<p><strong>å…è®¸çš„æƒ…å†µ</strong></p>\n<ul>\n<li>\n<p><strong>ä¸º â€œå¤–éƒ¨ç±»å‹â€ å®ç° â€œæœ¬åœ° Traitâ€</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 1. å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„ traitï¼Œè¿™æ˜¯â€œæœ¬åœ°çš„â€ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">trait</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> CsvDisplay</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> to_csv</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 2. ä¸ºæ ‡å‡†åº“çš„ Vec&#x3C;String> (å¤–éƒ¨ç±»å‹) å®ç°æˆ‘ä»¬æœ¬åœ°çš„ CsvDisplay traitã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//    è¿™æ˜¯åˆæ³•çš„ï¼Œå› ä¸º `CsvDisplay` trait æ˜¯åœ¨æˆ‘ä»¬å½“å‰çš„ crate ä¸­å®šä¹‰çš„ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> CsvDisplay</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">String</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> to_csv</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> String</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A65E2B;--shiki-dark:#C99076\">        self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">join</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> data</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> vec!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">[</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">name</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">age</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">        String</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#59873A;--shiki-dark:#80A665\">from</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">city</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">]</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> data</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#59873A;--shiki-dark:#80A665\">to_csv</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¾“å‡º: name,age,city</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n</li>\n<li>\n<p><strong>ä¸º â€œæœ¬åœ°ç±»å‹â€ å®ç° â€œå¤–éƒ¨ Traitâ€</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// my_crate/src/main.rs</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">fmt</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 1. å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„ structï¼Œè¿™æ˜¯â€œæœ¬åœ°çš„â€ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">struct</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Point</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> i32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#B07D48;--shiki-dark:#BD976A\">    y</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> i32</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// 2. ä¸ºæˆ‘ä»¬æœ¬åœ°çš„ Point ç±»å‹å®ç°æ ‡å‡†åº“çš„ `Display` trait (å¤–éƒ¨ trait)ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">//    è¿™æ˜¯åˆæ³•çš„ï¼Œå› ä¸º `Point` ç±»å‹æ˜¯åœ¨æˆ‘ä»¬å½“å‰çš„ crate ä¸­å®šä¹‰çš„ã€‚</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Display</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Point</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> f</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;mut</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Formatter</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">_</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Result</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        write!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">f</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">(</span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">, </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">)</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">x</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> self</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">.</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">y</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> main</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">    let</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> p</span><span style=\"color:#999999;--shiki-dark:#666666\"> =</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Point</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> x</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 10</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> y</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\">5</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">    println!</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">The point is at: </span><span style=\"color:#999999;--shiki-dark:#666666\">&#123;&#125;</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> p</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> // è¾“å‡º: The point is at: (10, -5)</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n</li>\n</ul>\n<p><strong>è¿åå­¤å„¿åŸåˆ™çš„æƒ…å†µ</strong></p>\n<p>ä½ ä¸èƒ½ä¸ºæ ‡å‡†åº“çš„ <code>Vec&lt;i32&gt;</code>ï¼ˆå¤–éƒ¨ç±»å‹ï¼‰å®ç°æ ‡å‡†åº“çš„ <code>fmt::Display</code>ï¼ˆå¤–éƒ¨ traitï¼‰ï¼Œå› ä¸ºç±»å‹å’Œ trait éƒ½å®šä¹‰åœ¨å½“å‰ <code>crate</code> ä¹‹å¤–ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-rust\"><span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// my_crate/src/main.rs</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">use</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> std</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">fmt</span><span style=\"color:#999999;--shiki-dark:#666666\">;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// å°è¯•ä¸ºå¤–éƒ¨ç±»å‹ `Vec&#x3C;i32>` å®ç°å¤–éƒ¨ trait `Display`</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">// è¿™æ®µä»£ç æ— æ³•é€šè¿‡ç¼–è¯‘ï¼</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">impl</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Display</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> for</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\"> Vec</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">i32</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">    fn</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">(</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x26;</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">self</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\"> f</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">:</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> &#x26;mut</span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Formatter</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x3C;</span><span style=\"color:#999999;--shiki-dark:#666666\">'</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">_</span><span style=\"color:#999999;--shiki-dark:#666666\">></span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">)</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> -</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span><span style=\"color:#59873A;--shiki-dark:#80A665\"> fmt</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">::</span><span style=\"color:#2E8F82;--shiki-dark:#5DA994\">Result</span><span style=\"color:#999999;--shiki-dark:#666666\"> </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#123;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">        // ... å®ç°é€»è¾‘ ...</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        write!</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">(</span><span style=\"color:#B07D48;--shiki-dark:#BD976A\">f</span><span style=\"color:#999999;--shiki-dark:#666666\">,</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> \"</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">A vector of integers</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">\"</span><span style=\"color:#a65e2b;--shiki-dark:#d4976c\">)</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">    </span><span style=\"color:#1e754f;--shiki-dark:#4d9375\">&#125;</span></span>\n<span class=\"line\"><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">&#125;</span></span></code></pre>\n",
            "tags": [
                "Programming",
                "Rust"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/24/Linux/%E5%AF%B9CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%9A%84%E7%90%86%E8%A7%A3/",
            "url": "https://haoruanwn.github.io/2025/08/24/Linux/%E5%AF%B9CPU%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E7%9A%84%E7%90%86%E8%A7%A3/",
            "title": "å¯¹CPUé«˜é€Ÿç¼“å­˜çš„ç†è§£",
            "date_published": "2025-08-24T15:38:07.000Z",
            "content_html": "<h3 id=\"ä¸€-ç¼“å­˜å¤±æ•ˆçš„èƒŒåä¸‰å¤§æ ¸å¿ƒæœºåˆ¶\"><a class=\"anchor\" href=\"#ä¸€-ç¼“å­˜å¤±æ•ˆçš„èƒŒåä¸‰å¤§æ ¸å¿ƒæœºåˆ¶\">#</a> <strong>ä¸€ã€ç¼“å­˜å¤±æ•ˆçš„èƒŒåï¼šä¸‰å¤§æ ¸å¿ƒæœºåˆ¶</strong></h3>\n<p><strong>ä¸ºä½•CPUé«˜é€Ÿç¼“å­˜ä¸­çš„æ•°æ®ä¼šâ€œå¤±æ•ˆâ€ï¼Œå…¶èƒŒåçš„ä¸»è¦æœºåˆ¶æœ‰å“ªäº›ï¼Ÿ</strong></p>\n<blockquote>\n<p>CPUé«˜é€Ÿç¼“å­˜æ˜¯æå‡æ€§èƒ½çš„å…³é”®ï¼Œä½†å®ƒå¹¶éä¸€ä¸ªé™æ€çš„å­˜å‚¨åŒºåŸŸã€‚ç¼“å­˜ä¸­çš„æ•°æ®ä¼šå› ä¸ºå®¹é‡é™åˆ¶ã€å¤šæ ¸é—´çš„æ•°æ®åŒæ­¥ä»¥åŠä¸å¤–éƒ¨è®¾å¤‡äº¤äº’ç­‰å¤šç§åŸå› è¢«æ›¿æ¢æˆ–å®£å‘Šæ— æ•ˆï¼Œç†è§£è¿™äº›æœºåˆ¶æ˜¯ä¼˜åŒ–æ€§èƒ½çš„åŸºç¡€ã€‚</p>\n</blockquote>\n<p>CPUç¼“å­˜ä¸­çš„æ•°æ®â€œå¤±æ•ˆâ€ï¼Œé€šå¸¸æŒ‡æ•°æ®è¢«æ›¿æ¢æˆ–è¢«æ ‡è®°ä¸ºæ— æ•ˆï¼Œä½¿å…¶æ— æ³•å†è¢«CPUä½¿ç”¨ã€‚è¿™ä¸€è¿‡ç¨‹ä¸»è¦ç”±ä»¥ä¸‹ä¸‰ç§æœºåˆ¶é©±åŠ¨ï¼š</p>\n<ol>\n<li><strong>å®¹é‡ç«äº‰ä¸æ›¿æ¢</strong>ï¼šCPUç¼“å­˜çš„å®¹é‡éå¸¸æœ‰é™ã€‚å½“ç¼“å­˜å·²æ»¡æ—¶ï¼Œè‹¥è¦è½½å…¥æ–°çš„æ•°æ®ï¼Œå°±å¿…é¡»æŒ‰ç…§æŸç§æ›¿æ¢ç®—æ³•ï¼ˆå¦‚ <strong>LRU - æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•</strong>ï¼‰ä¸¢å¼ƒä¸€äº›ç°æœ‰çš„æ•°æ®ã€‚è¿™æ˜¯æœ€å¸¸è§å’ŒåŸºæœ¬çš„â€œå¤±æ•ˆâ€å½¢å¼ï¼Œç”±ç¼“å­˜è‡ªèº«çš„ç‰©ç†é™åˆ¶å¯¼è‡´ã€‚</li>\n<li><strong>å¤šæ ¸ä¸€è‡´æ€§åè®®</strong>ï¼šåœ¨å¤šæ ¸å¤„ç†å™¨ä¸­ï¼ŒåŒä¸€ä»½å†…å­˜æ•°æ®å¯èƒ½è¢«å¤šä¸ªæ ¸å¿ƒåŒæ—¶åŠ è½½åˆ°å„è‡ªçš„ç¼“å­˜ä¸­ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæ ¸å¿ƒä¿®æ”¹äº†è¿™ä»½æ•°æ®ï¼Œå…¶ä»–æ ¸å¿ƒç¼“å­˜ä¸­çš„å‰¯æœ¬å°±å˜æˆäº†è¿‡æ—¶çš„â€œè„æ•°æ®â€ã€‚ä¸ºäº†ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œç¡¬ä»¶å±‚é¢çš„ç¼“å­˜ä¸€è‡´æ€§åè®®ï¼ˆå¦‚ <strong>MESIåè®®</strong>ï¼‰ä¼šå¼ºåˆ¶å°†å…¶ä»–æ ¸å¿ƒçš„è¿™ä»½æ•°æ®å‰¯æœ¬æ ‡è®°ä¸ºâ€œæ— æ•ˆâ€ï¼Œè¿«ä½¿å®ƒä»¬åœ¨éœ€è¦æ—¶é‡æ–°ä»å†…å­˜æˆ–å·²æ›´æ–°çš„æ ¸å¿ƒè·å–æœ€æ–°ç‰ˆæœ¬ã€‚</li>\n<li><strong>å¤–éƒ¨I/Oæ“ä½œ</strong>ï¼šå½“å¤–éƒ¨è®¾å¤‡ï¼ˆå¦‚ç½‘å¡ã€ç¡¬ç›˜æ§åˆ¶å™¨ï¼‰é€šè¿‡ <strong>DMA (ç›´æ¥å†…å­˜è®¿é—®)</strong> æŠ€æœ¯ç»•è¿‡CPUç›´æ¥å‘ä¸»å†…å­˜å†™å…¥æ•°æ®æ—¶ï¼ŒCPUç¼“å­˜ä¸­å¯èƒ½è¿˜ä¿ç•™ç€è¿™å—å†…å­˜åŒºåŸŸçš„æ—§å‰¯æœ¬ã€‚ç”±äºCPUå¯¹æ­¤æ“ä½œæ— æ„ŸçŸ¥ï¼Œå…¶ç¼“å­˜æ•°æ®å·²ç„¶è¿‡æœŸã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»ç”±è½¯ä»¶ï¼ˆé€šå¸¸æ˜¯é©±åŠ¨ç¨‹åºï¼‰æ˜¾å¼åœ°æ‰§è¡Œç¼“å­˜æ— æ•ˆåŒ–æŒ‡ä»¤ï¼Œæ‰èƒ½é¿å…CPUè¯»åˆ°è„æ•°æ®ã€‚</li>\n</ol>\n<hr />\n<h3 id=\"äºŒ-æ‰“ç ´äº²å’Œæ€§ä»»åŠ¡è¿ç§»çš„é©±åŠ¨åŠ›\"><a class=\"anchor\" href=\"#äºŒ-æ‰“ç ´äº²å’Œæ€§ä»»åŠ¡è¿ç§»çš„é©±åŠ¨åŠ›\">#</a> <strong>äºŒã€æ‰“ç ´äº²å’Œæ€§ï¼šä»»åŠ¡è¿ç§»çš„é©±åŠ¨åŠ›</strong></h3>\n<p><strong>åœ¨è°ƒåº¦å™¨å€¾å‘äºç»´æŒâ€œCPUäº²å’Œæ€§â€çš„æƒ…å†µä¸‹ï¼Œç©¶ç«Ÿæ˜¯å“ªäº›æ›´é«˜ä¼˜å…ˆçº§çš„è€ƒé‡ä¼šä¿ƒä½¿ä¸€ä¸ªä»»åŠ¡è¢«ä¸»åŠ¨è¿ç§»åˆ°å…¶ä»–CPUæ ¸å¿ƒä¸Šæ‰§è¡Œï¼Ÿ</strong></p>\n<blockquote>\n<p>ä¸ºäº†æœ€å¤§åŒ–åˆ©ç”¨ç¼“å­˜ï¼Œæ“ä½œç³»ç»Ÿè°ƒåº¦å™¨ä¼šå°½é‡è®©ä¸€ä¸ªä»»åŠ¡ä¿æŒåœ¨åŒä¸€ä¸ªCPUæ ¸å¿ƒä¸Šè¿è¡Œã€‚ç„¶è€Œï¼Œä¸ºäº†ä¿è¯æ•´ä¸ªç³»ç»Ÿçš„å“åº”é€Ÿåº¦å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œè°ƒåº¦å™¨åœ¨æŸäº›ç‰¹å®šæƒ…å¢ƒä¸‹ï¼Œä¸å¾—ä¸æ‰“ç ´è¿™ç§â€œäº²å’Œæ€§â€ï¼Œä¸»åŠ¨è¿›è¡Œè·¨æ ¸å¿ƒçš„ä»»åŠ¡è¿ç§»ã€‚</p>\n</blockquote>\n<p>å°½ç®¡ç»´æŒCPUäº²å’Œæ€§å¯ä»¥å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œä½†æ“ä½œç³»ç»Ÿè°ƒåº¦å™¨ä¸ºäº†æ›´å®è§‚çš„ç›®æ ‡ï¼Œä¼šåœ¨ä»¥ä¸‹å‡ ç§ä¸»è¦æƒ…å¢ƒä¸‹ä¸»åŠ¨è¿›è¡Œä»»åŠ¡è¿ç§»ï¼š</p>\n<ol>\n<li><strong>è´Ÿè½½å‡è¡¡ (Load Balancing)</strong>ï¼šè¿™æ˜¯ä»»åŠ¡è¿ç§»æœ€ä¸»è¦çš„åŸå› ã€‚å¦‚æœç³»ç»Ÿä¸­çš„ä»»åŠ¡éƒ½é›†ä¸­åœ¨å°‘æ•°å‡ ä¸ªæ ¸å¿ƒä¸Šï¼Œå¯¼è‡´å®ƒä»¬ä¸å ªé‡è´Ÿï¼Œè€Œå…¶ä»–æ ¸å¿ƒå´å¤„äºç©ºé—²ï¼Œä¼šé€ æˆå·¨å¤§çš„èµ„æºæµªè´¹ã€‚è°ƒåº¦å™¨çš„è´Ÿè½½å‡è¡¡æ¨¡å—ä¼šå‘¨æœŸæ€§åœ°æ£€æŸ¥å„æ ¸å¿ƒçš„è´Ÿè½½ï¼Œå¹¶åœ¨å‘ç°ä¸¥é‡å¤±è¡¡æ—¶ï¼Œå°†ä»»åŠ¡ä»ç¹å¿™çš„æ ¸å¿ƒè¿ç§»åˆ°ç©ºé—²çš„æ ¸å¿ƒï¼Œä»¥å®ç°æ‰€æœ‰è®¡ç®—èµ„æºçš„å……åˆ†åˆ©ç”¨ã€‚</li>\n<li><strong>æå‡ä»»åŠ¡å“åº”é€Ÿåº¦</strong>ï¼šå½“ä¸€ä¸ªå› I/Oç­‰å¾…è€Œä¼‘çœ çš„ä»»åŠ¡è¢«å”¤é†’æ—¶ï¼Œå®ƒåŸæœ¬æ‰€åœ¨çš„â€œäº²å’Œâ€æ ¸å¿ƒå¯èƒ½æ­£åœ¨å¤„ç†ä¸€ä¸ªé«˜ä¼˜å…ˆçº§çš„é•¿è€—æ—¶ä»»åŠ¡ã€‚ä¸ºäº†è®©è¢«å”¤é†’çš„ä»»åŠ¡èƒ½å°½å¿«å¾—åˆ°æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨åŸæ ¸å¿ƒä¸Šæ’é˜Ÿç­‰å¾…ï¼Œè°ƒåº¦å™¨å¯èƒ½ä¼šé€‰æ‹©å°†å®ƒè¿ç§»åˆ°ä¸€ä¸ªå½“å‰è´Ÿè½½è¾ƒä½æˆ–ç©ºé—²çš„æ ¸å¿ƒä¸Šã€‚</li>\n<li><strong>åŠŸè€—ä¸æ€§èƒ½ç­–ç•¥</strong>ï¼šç°ä»£CPUçš„åŠŸè€—ç®¡ç†éå¸¸å¤æ‚ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†èŠ‚çœèƒ½æºï¼ŒæŸäº›æ ¸å¿ƒå¯èƒ½å¤„äºæ·±åº¦ç¡çœ çŠ¶æ€ã€‚æ­¤æ—¶ï¼Œå°†ä¸€ä¸ªæ–°ä»»åŠ¡è¿ç§»åˆ°å·²ç»å¤„äºæ´»è·ƒçŠ¶æ€çš„æ ¸å¿ƒä¸Šï¼Œå¯èƒ½æ¯”èŠ±è´¹æ—¶é—´å’ŒåŠŸè€—å»å”¤é†’ä¸€ä¸ªç¡çœ æ ¸å¿ƒæ›´å…·æ•ˆç‡ã€‚</li>\n</ol>\n<hr />\n<h3 id=\"ä¸‰-ç¼“å­˜æ•°æ®çš„å¯¿å‘½ç”±ç«äº‰å†³å®š\"><a class=\"anchor\" href=\"#ä¸‰-ç¼“å­˜æ•°æ®çš„å¯¿å‘½ç”±ç«äº‰å†³å®š\">#</a> <strong>ä¸‰ã€ç¼“å­˜æ•°æ®çš„â€œå¯¿å‘½â€ï¼šç”±ç«äº‰å†³å®š</strong></h3>\n<p><strong>ç¼“å­˜ä¸­æŸä¸ªä»»åŠ¡çš„â€œçƒ­æ•°æ®â€èƒ½å¤Ÿä¿å­˜å¤šä¹…ï¼Œæ˜¯ç”±æ—¶é—´å†³å®šçš„ï¼Œè¿˜æ˜¯ç”±CPUæ ¸å¿ƒçš„ç«äº‰å’Œè®¿é—®æ¨¡å¼å†³å®šçš„ï¼Ÿ</strong></p>\n<blockquote>\n<p>å½“ä¸€ä¸ªä»»åŠ¡è¢«æ¢ä¸‹CPUæ—¶ï¼Œå®ƒç•™åœ¨ç¼“å­˜ä¸­çš„â€œçƒ­æ•°æ®â€å¹¶ä¸ä¼šç«‹åˆ»æ¶ˆå¤±ï¼Œä½†å…¶â€œå¯¿å‘½â€å´éš¾ä»¥é¢„æµ‹ã€‚è¿™ä»½æ•°æ®çš„å­˜ç•™æ—¶é—´å¹¶éç”±ä¸€ä¸ªå›ºå®šçš„è®¡æ—¶å™¨æ¥ç®¡ç†ï¼Œè€Œæ˜¯å–å†³äºåç»­åœ¨è¯¥CPUæ ¸å¿ƒä¸Šè¿è¡Œçš„å…¶ä»–ä»»åŠ¡å¯¹å…¶é€ æˆçš„å½±å“ã€‚</p>\n</blockquote>\n<p>ç¼“å­˜ä¸­æ•°æ®çš„â€œå¯¿å‘½â€<strong>å¹¶éç”±æ—¶é—´å†³å®šï¼Œè€Œæ˜¯å®Œå…¨ç”±è¯¥CPUæ ¸å¿ƒä¸Šå‘ç”Ÿçš„ç¼“å­˜ç©ºé—´ç«äº‰æ¿€çƒˆç¨‹åº¦æ‰€å†³å®š</strong>ã€‚ä¸å­˜åœ¨ä¸€ä¸ªâ€œæ•°æ®è¿‡æœŸè®¡æ—¶å™¨â€ã€‚</p>\n<p>æ•°æ®çš„å­˜ç•™æƒ…å†µå–å†³äºåç»­åœ¨è¯¥æ ¸å¿ƒä¸Šè¿è¡Œçš„å…¶ä»–ä»»åŠ¡çš„å†…å­˜è®¿é—®æ¨¡å¼ã€‚æˆ‘ä»¬å¯ä»¥è®¾æƒ³ä¸¤ç§æç«¯æƒ…å†µï¼š</p>\n<ul>\n<li><strong>ä½ç«äº‰ç¯å¢ƒ</strong>ï¼šå¦‚æœä¸€ä¸ªæ ¸å¿ƒåœ¨æ¥ä¸‹æ¥çš„å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œè¿è¡Œçš„ä»»åŠ¡æ‰€è®¿é—®çš„æ•°æ®é›†å¾ˆå°ï¼Œæˆ–è€…ä¸ä¹‹å‰ä»»åŠ¡çš„æ•°æ®åœ¨ç¼“å­˜ä¸­å ç”¨çš„ä½ç½®ä¸å†²çªï¼Œé‚£ä¹ˆä¹‹å‰ä»»åŠ¡çš„â€œçƒ­æ•°æ®â€å°±æœ‰å¯èƒ½åœ¨ç¼“å­˜ä¸­å­˜ç•™å¾ˆé•¿æ—¶é—´ã€‚</li>\n<li><strong>é«˜ç«äº‰ç¯å¢ƒ</strong>ï¼šå¦‚æœåç»­è¿è¡Œçš„ä»»åŠ¡æ˜¯ä¸€ä¸ªéœ€è¦å¤§é‡å†…å­˜çš„ <strong>â€œç¼“å­˜ç ´åè€…â€ (Cache Buster)</strong>ï¼Œå®ƒä¼šå¤§é‡åŠ è½½è‡ªå·±çš„æ•°æ®ï¼Œè¿…é€Ÿåœ°å°†å‰ä¸€ä¸ªä»»åŠ¡ç•™ä¸‹çš„æ•°æ®ä»ç¼“å­˜ä¸­æ›¿æ¢å‡ºå»ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‰ä¸€ä¸ªä»»åŠ¡çš„æ•°æ®å¯èƒ½åœ¨çŸ­çŸ­å‡ å¾®ç§’æˆ–å‡ æ¯«ç§’å†…å°±å®Œå…¨â€œè’¸å‘â€äº†ã€‚</li>\n</ul>\n<p>å› æ­¤ï¼Œç¼“å­˜æ•°æ®çš„å­˜ç•™æœŸæ˜¯ä¸€ä¸ªåŠ¨æ€å˜åŒ–çš„è¿‡ç¨‹ï¼Œç›´æ¥åæ˜ äº†CPUæ ¸å¿ƒä¸Šä»»åŠ¡åˆ‡æ¢å’Œå†…å­˜è®¿é—®çš„å®æ—¶çŠ¶å†µã€‚</p>\n<hr />\n<h3 id=\"å››-ç¼“å­˜å‘½ä¸­é«˜é€Ÿå…¬è·¯çš„å…¥å£\"><a class=\"anchor\" href=\"#å››-ç¼“å­˜å‘½ä¸­é«˜é€Ÿå…¬è·¯çš„å…¥å£\">#</a> <strong>å››ã€â€œç¼“å­˜å‘½ä¸­â€ï¼šé«˜é€Ÿå…¬è·¯çš„å…¥å£</strong></h3>\n<p><strong>â€œç¼“å­˜å‘½ä¸­â€è¿™ä¸€æ¦‚å¿µçš„å‡†ç¡®å®šä¹‰æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä¸ä»»åŠ¡ä¸Šä¸‹æ–‡åˆ‡æ¢åæœŸæœ›çš„â€œçƒ­æ•°æ®â€é‡ç”¨ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</strong></p>\n<blockquote>\n<p>â€œç¼“å­˜å‘½ä¸­â€æ˜¯è¡¡é‡ç¼“å­˜æ•ˆç‡çš„æ ¸å¿ƒæŒ‡æ ‡ã€‚å®ƒæè¿°äº†ä¸€ä¸ªåŸºç¡€è€Œå…³é”®çš„äº‹ä»¶ï¼šCPUéœ€è¦çš„æ•°æ®æ°å¥½åœ¨é«˜é€Ÿç¼“å­˜ä¸­è¢«æ‰¾åˆ°ã€‚ç†è§£å…¶å‡†ç¡®å®šä¹‰ï¼Œæœ‰åŠ©äºæˆ‘ä»¬å¼„æ¸…ä¸ºä½•CPUäº²å’Œæ€§ç­‰è°ƒåº¦ç­–ç•¥å¯¹äºæå‡å¤šä»»åŠ¡ç³»ç»Ÿçš„æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>\n</blockquote>\n<p><strong>â€œç¼“å­˜å‘½ä¸­â€ (Cache Hit)</strong> çš„å‡†ç¡®å®šä¹‰æ˜¯ï¼šCPUåœ¨å°è¯•ä»æŸä¸ªå†…å­˜åœ°å€è¯»å–æ•°æ®æˆ–æŒ‡ä»¤æ—¶ï¼Œåœ¨é«˜é€Ÿç¼“å­˜ä¸­ç›´æ¥æ‰¾åˆ°äº†æ‰€éœ€çš„å†…å®¹ï¼Œæ— éœ€å†è®¿é—®æ›´ä½é€Ÿçš„ä¸»å†…å­˜ã€‚è¿™æ˜¯ä¸€æ¬¡æˆåŠŸçš„ã€é«˜æ•ˆçš„å†…å­˜è®¿é—®ã€‚åä¹‹ï¼Œå¦‚æœåœ¨ç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œå¿…é¡»å»ä¸»å†…å­˜è¯»å–ï¼Œåˆ™ç§°ä¸º <strong>â€œç¼“å­˜æœªå‘½ä¸­â€ (Cache Miss)</strong>ã€‚</p>\n<p>å®ƒä¸ä»»åŠ¡ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å…³ç³»ä½“ç°åœ¨ï¼š</p>\n<p>ä¸Šä¸‹æ–‡åˆ‡æ¢åï¼Œä»»åŠ¡èƒ½å¦å¿«é€Ÿæ¢å¤é«˜æ€§èƒ½ï¼Œå…³é”®å°±åœ¨äºå…¶é‡æ–°æ‰§è¡Œæ—¶ç¼“å­˜å‘½ä¸­çš„æ¦‚ç‡æœ‰å¤šé«˜ã€‚</p>\n<ul>\n<li><strong>CPUäº²å’Œæ€§ç­–ç•¥</strong>çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºäº†è®©ä¸€ä¸ªä»»åŠ¡åœ¨è¢«åˆ‡æ¢å‡ºå»åˆåˆ‡æ¢å›æ¥åï¼Œèƒ½å¤Ÿå¤§æ¦‚ç‡åœ°åœ¨ <strong>åŒä¸€ä¸ªCPUæ ¸å¿ƒ</strong> ä¸Šè¿è¡Œã€‚</li>\n<li>è¿™æ ·åšçš„<strong>æœ€ç»ˆç›®æ ‡</strong>ï¼Œæ˜¯ä¸ºäº†è®©è¿™ä¸ªä»»åŠ¡èƒ½å¤Ÿé‡ç”¨ä¸Šæ¬¡è¿è¡Œæ—¶ç•™åœ¨è¯¥æ ¸å¿ƒç¼“å­˜ä¸­çš„ <strong>â€œçƒ­æ•°æ®â€</strong>ã€‚</li>\n<li>å½“ä»»åŠ¡æˆåŠŸé‡ç”¨è¿™äº›æ•°æ®æ—¶ï¼Œå°±è¡¨ç°ä¸º<strong>å¤§é‡çš„ç¼“å­˜å‘½ä¸­</strong>ï¼Œä»è€Œé¿å…äº†å› ç¼“å­˜æœªå‘½ä¸­è€Œå»è®¿é—®æ…¢é€Ÿä¸»å†…å­˜æ‰€å¸¦æ¥çš„å·¨å¤§æ€§èƒ½æŸå¤±ã€‚</li>\n</ul>\n<p>ç®€è€Œè¨€ä¹‹ï¼ŒCPUäº²å’Œæ€§æ˜¯ä¸€ç§<strong>ç­–ç•¥</strong>ï¼Œè€Œç¼“å­˜å‘½ä¸­æ˜¯è¯¥ç­–ç•¥æˆåŠŸæ—¶æ‰€è·å¾—çš„<strong>æ”¶ç›Š</strong>ã€‚</p>\n<hr />\n<h3 id=\"äº”-å•ç‰‡æœºä¸­çš„ç¼“å­˜æƒè´£åˆ†æ˜\"><a class=\"anchor\" href=\"#äº”-å•ç‰‡æœºä¸­çš„ç¼“å­˜æƒè´£åˆ†æ˜\">#</a> <strong>äº”ã€å•ç‰‡æœºä¸­çš„ç¼“å­˜ï¼šæƒè´£åˆ†æ˜</strong></h3>\n<p><strong>å¯¹äºå¸¦æœ‰ç¼“å­˜çš„å•ç‰‡æœºï¼ˆå¦‚Cortex-M7ï¼‰ï¼Œå…¶ç¼“å­˜å·¥ä½œæœºåˆ¶ä¸é€šç”¨å¤„ç†å™¨ç›¸æ¯”ï¼Œåœ¨å†…å­˜æ¨¡å‹å’Œå¼€å‘è€…è´£ä»»æ–¹é¢æœ€æ ¸å¿ƒçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>\n<blockquote>\n<p>ç¼“å­˜å¹¶éå¤§å‹CPUçš„ä¸“åˆ©ï¼Œè¯¸å¦‚STM32H7ç³»åˆ—çš„é«˜æ€§èƒ½å•ç‰‡æœºä¹Ÿé…å¤‡äº†ç¼“å­˜ã€‚ç„¶è€Œï¼Œç”±äºå…¶ç¡¬ä»¶æ¶æ„å’Œåº”ç”¨åœºæ™¯çš„å·®å¼‚ï¼Œè¿™ç±»åµŒå…¥å¼ç³»ç»Ÿä¸­çš„ç¼“å­˜å·¥ä½œåŸç†ã€å°¤å…¶æ˜¯åœ¨ä¸RTOSå’ŒDMAäº¤äº’æ—¶ï¼Œä¸æˆ‘ä»¬ç†Ÿæ‚‰çš„Linuxç³»ç»Ÿå­˜åœ¨ç€æ ¹æœ¬æ€§çš„ä¸åŒã€‚</p>\n</blockquote>\n<p>å…¶æ ¸å¿ƒåŒºåˆ«æºäºæœ‰æ—  <strong>MMU (å†…å­˜ç®¡ç†å•å…ƒ)</strong>ï¼Œè¿™ç›´æ¥å¯¼è‡´äº†å†…å­˜æ¨¡å‹å’Œå¼€å‘è€…è´£ä»»çš„å·¨å¤§å·®å¼‚ã€‚</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">ç‰¹æ€§</th>\n<th style=\"text-align:left\">é€šç”¨å¤„ç†å™¨ (å¦‚Linuxç³»ç»Ÿ)</th>\n<th style=\"text-align:left\">é«˜æ€§èƒ½å•ç‰‡æœº (å¦‚Cortex-M7)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\"><strong>æ ¸å¿ƒç¡¬ä»¶</strong></td>\n<td style=\"text-align:left\">æ‹¥æœ‰ <strong>MMU (å†…å­˜ç®¡ç†å•å…ƒ)</strong></td>\n<td style=\"text-align:left\">é€šå¸¸<strong>æ— MMU</strong></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å†…å­˜æ¨¡å‹</strong></td>\n<td style=\"text-align:left\"><strong>è™šæ‹Ÿå†…å­˜</strong>ï¼Œè¿›ç¨‹æ‹¥æœ‰ç‹¬ç«‹åœ°å€ç©ºé—´</td>\n<td style=\"text-align:left\"><strong>ç‰©ç†å†…å­˜</strong>ï¼Œæ‰€æœ‰ä»»åŠ¡å…±äº«åŒä¸€åœ°å€ç©ºé—´</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>ç¼“å­˜ä¸€è‡´æ€§</strong></td>\n<td style=\"text-align:left\">ç”±<strong>æ“ä½œç³»ç»Ÿå’Œé©±åŠ¨</strong>è‡ªåŠ¨å¤„ç†</td>\n<td style=\"text-align:left\">è´£ä»»è½åœ¨<strong>åµŒå…¥å¼å¼€å‘è€…</strong>èº«ä¸Š</td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong>å¼€å‘è€…æ“ä½œ</strong></td>\n<td style=\"text-align:left\">æ— éœ€å…³å¿ƒåº•å±‚ç¼“å­˜ç»†èŠ‚</td>\n<td style=\"text-align:left\">å¿…é¡»<strong>æ‰‹åŠ¨è°ƒç”¨</strong> <code>SCB_CleanDCache</code> ç­‰å‡½æ•°è¿›è¡Œç¼“å­˜ç»´æŠ¤</td>\n</tr>\n</tbody>\n</table>\n",
            "tags": [
                "Linux",
                "CPUç¼“å­˜"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/24/Linux/%E5%AF%B9Linux%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E7%9A%84%E7%90%86%E8%A7%A3/",
            "url": "https://haoruanwn.github.io/2025/08/24/Linux/%E5%AF%B9Linux%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E7%9A%84%E7%90%86%E8%A7%A3/",
            "title": "å¯¹Linuxä»»åŠ¡è°ƒåº¦çš„ç†è§£",
            "date_published": "2025-08-24T15:13:29.000Z",
            "content_html": "<h3 id=\"ä¸€-ç»Ÿä¸€çš„è°ƒåº¦å•å…ƒä»»åŠ¡task\"><a class=\"anchor\" href=\"#ä¸€-ç»Ÿä¸€çš„è°ƒåº¦å•å…ƒä»»åŠ¡task\">#</a> <strong>ä¸€ã€ç»Ÿä¸€çš„è°ƒåº¦å•å…ƒï¼šä»»åŠ¡ï¼ˆTaskï¼‰</strong></h3>\n<p><strong>Linuxè°ƒåº¦å™¨è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„åŸºæœ¬å•ä½ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Œå®ƒåˆæ˜¯å¦‚ä½•ç»Ÿä¸€è¿›ç¨‹ä¸çº¿ç¨‹è¿™ä¸¤ä¸ªæ¦‚å¿µçš„å‘¢ï¼Ÿ</strong></p>\n<blockquote>\n<p>æ“ä½œç³»ç»Ÿä¸­åŒæ—¶å­˜åœ¨è¿›ç¨‹å’Œçº¿ç¨‹ï¼Œå®ƒä»¬éƒ½éœ€è¦CPUèµ„æºä¸”éƒ½ä¼šå‘ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ä¸ºäº†é«˜æ•ˆç®¡ç†ï¼Œè°ƒåº¦å™¨å¹¶éåœ¨ä¸¤ç§ä¸åŒç±»å‹çš„å®ä½“é—´åšé€‰æ‹©ï¼Œè€Œæ˜¯å°†å®ƒä»¬æŠ½è±¡æˆä¸€ä¸ªç»Ÿä¸€çš„è°ƒåº¦å•å…ƒã€‚</p>\n</blockquote>\n<p>åœ¨Linuxå†…æ ¸çš„è§†è§’ä¸­ï¼Œè¿›è¡Œè°ƒåº¦å’Œä¸Šä¸‹æ–‡åˆ‡æ¢çš„åŸºæœ¬å•ä½æ˜¯<strong>ä»»åŠ¡ï¼ˆtaskï¼‰</strong>ï¼Œå®ƒç”±ä¸€ä¸ªåä¸º <code>task_struct</code> çš„æ•°æ®ç»“æ„æ¥æè¿°ã€‚è¿™ç§è®¾è®¡å·§å¦™åœ°ç»Ÿä¸€äº†è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µã€‚</p>\n<p>å…·ä½“æ¥è¯´ï¼Œä¸€ä¸ª<strong>è¿›ç¨‹</strong>è¢«è§†ä¸ºä¸€ä¸ªèµ„æºçš„é›†åˆï¼ˆå¦‚è™šæ‹Ÿå†…å­˜ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦ç­‰ï¼‰ï¼Œä»¥åŠè‡³å°‘ä¸€ä¸ªæ‰§è¡Œæµã€‚å½“ä¸€ä¸ªè¿›ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œå†…æ ¸ä¼šåˆ›å»ºä¸€ä¸ªä»£è¡¨å…¶ä¸»æ‰§è¡Œæµçš„â€œä»»åŠ¡â€ï¼Œè¿™ä¸ªä»»åŠ¡å°±æ˜¯ä¸»çº¿ç¨‹ã€‚</p>\n<p>å¦‚æœè¿™ä¸ªè¿›ç¨‹é€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼ˆå¦‚ <code>clone()</code>ï¼‰åˆ›å»ºäº†æ–°çš„<strong>çº¿ç¨‹</strong>ï¼Œå†…æ ¸æ‰€åšçš„ä»…ä»…æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„â€œä»»åŠ¡â€ã€‚è¿™ä¸ªæ–°ä»»åŠ¡ä¼šå…±äº«å…¶çˆ¶è¿›ç¨‹çš„èµ„æºï¼ˆå¦‚å†…å­˜ç©ºé—´ï¼‰ï¼Œä½†æ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„CPUçŠ¶æ€ã€å¯„å­˜å™¨å’Œæ ˆï¼Œå› æ­¤å¯ä»¥è¢«ç‹¬ç«‹è°ƒåº¦ã€‚</p>\n<p>å› æ­¤ï¼Œè°ƒåº¦å™¨æ— éœ€å…³å¿ƒå®ƒæ­£åœ¨å¤„ç†çš„æ˜¯â€œè¿›ç¨‹â€è¿˜æ˜¯â€œçº¿ç¨‹â€ã€‚å®ƒåªç»´æŠ¤ä¸€ä¸ªæ‰€æœ‰å¯è¿è¡Œâ€œä»»åŠ¡â€çš„åˆ—è¡¨ï¼Œå¹¶ä»ä¸­é€‰æ‹©ä¸‹ä¸€ä¸ªæ¥æ‰§è¡Œã€‚è¿™ç§ç»Ÿä¸€çš„æŠ½è±¡å¤§å¤§ç®€åŒ–äº†è°ƒåº¦å™¨çš„è®¾è®¡å’Œå®ç°ã€‚</p>\n<h3 id=\"äºŒ-åˆ‡æ¢çš„ä»£ä»·è½»é‡çº§ä¸é‡é‡çº§\"><a class=\"anchor\" href=\"#äºŒ-åˆ‡æ¢çš„ä»£ä»·è½»é‡çº§ä¸é‡é‡çº§\">#</a> <strong>äºŒã€åˆ‡æ¢çš„ä»£ä»·ï¼šè½»é‡çº§ä¸é‡é‡çº§</strong></h3>\n<p><strong>åŒæ ·æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œä¸ºä½•åœ¨åŒä¸€è¿›ç¨‹å†…çš„æˆæœ¬ä¼šè¿œä½äºè·¨è¿›ç¨‹åˆ‡æ¢ï¼Œå…¶èƒŒåæœ€ä¸»è¦çš„å¼€é”€å·®å¼‚ä½“ç°åœ¨å“ªé‡Œï¼Ÿ</strong></p>\n<blockquote>\n<p>ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬å¹¶éä¸€æˆä¸å˜ã€‚å½“CPUçš„æ§åˆ¶æƒä»ä¸€ä¸ªçº¿ç¨‹è½¬ç§»åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œå¦‚æœä¸¤ä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œåˆ‡æ¢å°±ç›¸å¯¹è½»å¿«ï¼›åä¹‹ï¼Œå¦‚æœå®ƒä»¬åˆ†å±ä¸åŒè¿›ç¨‹ï¼Œåˆ‡æ¢è¿‡ç¨‹å°±éœ€è¦å¤„ç†æ›´å¤æ‚çš„é‡é‡çº§èµ„æºï¼Œå¯¼è‡´å¼€é”€å‰§å¢ã€‚</p>\n</blockquote>\n<p>è¿™ä¸¤ç§åˆ‡æ¢æˆæœ¬å·®å¼‚çš„æ ¹æºåœ¨äºæ˜¯å¦éœ€è¦æ›´æ¢<strong>è™šæ‹Ÿå†…å­˜ç©ºé—´</strong>ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>ç‰¹æ€§</th>\n<th>åŒè¿›ç¨‹å†…åˆ‡æ¢ (è½»é‡çº§)</th>\n<th>è·¨è¿›ç¨‹åˆ‡æ¢ (é‡é‡çº§)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>å…±äº«èµ„æº</strong></td>\n<td>å…±äº«åŒä¸€è™šæ‹Ÿå†…å­˜ç©ºé—´ã€æ–‡ä»¶æè¿°ç¬¦ç­‰</td>\n<td>æ‹¥æœ‰ç‹¬ç«‹çš„è™šæ‹Ÿå†…å­˜ç©ºé—´å’Œèµ„æº</td>\n</tr>\n<tr>\n<td><strong>æ ¸å¿ƒæ“ä½œ</strong></td>\n<td>ä¿å­˜/æ¢å¤çº¿ç¨‹ç§æœ‰çš„CPUå¯„å­˜å™¨ã€æ ˆæŒ‡é’ˆç­‰</td>\n<td>é™¤çº¿ç¨‹ç§æœ‰çŠ¶æ€å¤–ï¼Œè¿˜éœ€åˆ‡æ¢æ•´ä¸ªé¡µè¡¨</td>\n</tr>\n<tr>\n<td><strong>ä¸»è¦å¼€é”€</strong></td>\n<td>ä»…CPUçŠ¶æ€åˆ‡æ¢ï¼Œé€Ÿåº¦å¿«</td>\n<td>å†…å­˜ç®¡ç†å•å…ƒ(MMU)ç›¸å…³æ“ä½œï¼Œå¼€é”€å¤§</td>\n</tr>\n<tr>\n<td><strong>ç¼“å­˜å½±å“</strong></td>\n<td>å¯¹ <strong>TLB</strong> (è½¬è¯‘åå¤‡ç¼“å†²å™¨) æ— å½±å“</td>\n<td>å¯¼è‡´ <strong>TLB</strong> å¤§éƒ¨åˆ†å¤±æ•ˆï¼Œå¼•èµ·æ€§èƒ½ä¸‹é™</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ä¸‰-å®Œå…¨å…¬å¹³çš„å®ç°è™šæ‹Ÿè¿è¡Œæ—¶é—´vruntime\"><a class=\"anchor\" href=\"#ä¸‰-å®Œå…¨å…¬å¹³çš„å®ç°è™šæ‹Ÿè¿è¡Œæ—¶é—´vruntime\">#</a> <strong>ä¸‰ã€å®Œå…¨å…¬å¹³çš„å®ç°ï¼šè™šæ‹Ÿè¿è¡Œæ—¶é—´ï¼ˆvruntimeï¼‰</strong></h3>\n<p><strong>Linuxçš„CFSè°ƒåº¦å™¨æ˜¯å¦‚ä½•é€šè¿‡â€œè™šæ‹Ÿè¿è¡Œæ—¶é—´â€ï¼ˆvruntimeï¼‰è¿™ä¸€æ ¸å¿ƒæœºåˆ¶ï¼Œæ¥å®ç°å…¶â€œå®Œå…¨å…¬å¹³â€çš„è°ƒåº¦ç­–ç•¥çš„ï¼Ÿ</strong></p>\n<blockquote>\n<p>ä¸ºäº†åœ¨å¤šä»»åŠ¡ç¯å¢ƒä¸­å®ç°å…¬å¹³ï¼Œè°ƒåº¦å™¨ä¸èƒ½ç®€å•åœ°è½®æµåˆ†é…æ—¶é—´ã€‚CFSï¼ˆå®Œå…¨å…¬å¹³è°ƒåº¦å™¨ï¼‰å¼•å…¥äº†ä¸€ä¸ªç²¾å·§çš„æœºåˆ¶ï¼Œå®ƒè¿½è¸ªæ¯ä¸ªä»»åŠ¡â€œåº”å¾—â€çš„è¿è¡Œæ—¶é—´ï¼Œå¹¶æ€»æ˜¯ä¼˜å…ˆé€‰æ‹©é‚£ä¸ªâ€œå—å§”å±ˆæœ€å¤šâ€çš„ä»»åŠ¡ï¼Œä»è€Œåœ¨å®è§‚ä¸Šè¾¾åˆ°å…¬å¹³ã€‚</p>\n</blockquote>\n<p>CFS (Completely Fair Scheduler) çš„æ ¸å¿ƒç›®æ ‡å¹¶éè®©æ¯ä¸ªä»»åŠ¡è·å¾—ç»å¯¹ç›¸ç­‰çš„æ—¶é—´ç‰‡ï¼Œè€Œæ˜¯è®©æ¯ä¸ªä»»åŠ¡è·å¾—ä¸å…¶æƒé‡ï¼ˆä¼˜å…ˆçº§ï¼‰ç›¸ç§°çš„<strong>CPUä½¿ç”¨æ¯”ä¾‹</strong>ã€‚å®ƒé€šè¿‡<strong>è™šæ‹Ÿè¿è¡Œæ—¶é—´ (<code>vruntime</code>)</strong> è¿™ä¸€æœºåˆ¶æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚</p>\n<p>æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ª <code>vruntime</code> è®¡æ•°å™¨ã€‚å½“ä»»åŠ¡åœ¨CPUä¸Šè¿è¡Œæ—¶ï¼Œå®ƒçš„ <code>vruntime</code> ä¼šä¸æ–­å¢é•¿ã€‚è¿™ä¸ªå¢é•¿çš„é€Ÿåº¦ä¼šæ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§è¿›è¡ŒåŠ æƒï¼šé«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„ <code>vruntime</code> å¢é•¿å¾—<em>æ…¢</em>ï¼Œä½ä¼˜å…ˆçº§ä»»åŠ¡çš„ <code>vruntime</code> å¢é•¿å¾—<em>å¿«</em>ã€‚</p>\n<p>CFSè°ƒåº¦å™¨çš„è°ƒåº¦è§„åˆ™åªæœ‰ä¸€æ¡ï¼š<strong>åœ¨æ‰€æœ‰å¯è¿è¡Œçš„ä»»åŠ¡ä¸­ï¼Œæ°¸è¿œé€‰æ‹© vruntime å€¼æœ€å°çš„é‚£ä¸ªä»»åŠ¡æ¥æ‰§è¡Œã€‚</strong></p>\n<p>è¿™ä¸ªç®€å•çš„è§„åˆ™ç¡®ä¿äº†é‚£ä¸ªåœ¨â€œè™šæ‹Ÿæ—¶é—´â€ä¸Šç­‰å¾…æœ€ä¹…ï¼ˆå³â€œå—å§”å±ˆæœ€å¤šâ€ï¼‰çš„ä»»åŠ¡èƒ½å¤Ÿä¼˜å…ˆè·å¾—CPUã€‚å› ä¸ºé«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„ <code>vruntime</code> è·‘å¾—æ…¢ï¼Œæ‰€ä»¥å®ƒèƒ½è·å¾—æ›´å¤šçš„å®é™…è¿è¡Œæ—¶é—´ï¼Œæ‰èƒ½è®©è‡ªå·±çš„ <code>vruntime</code> è¿½ä¸Šå…¶ä»–ä»»åŠ¡ã€‚è¿™æ ·ï¼ŒCFSå°±å°†å¤æ‚çš„è°ƒåº¦é—®é¢˜è½¬åŒ–ä¸ºäº†ä¸€ä¸ªç®€å•çš„â€œè°æœ€å°ï¼Œè°è¿è¡Œâ€çš„é—®é¢˜ï¼Œä»è€Œå®ç°äº†å¯¹æ‰€æœ‰ä»»åŠ¡çš„å…¬å¹³è°ƒåº¦ã€‚</p>\n<h3 id=\"å››-å…¬å¹³ä¸æ•ˆç‡çš„å¹³è¡¡æœ¯\"><a class=\"anchor\" href=\"#å››-å…¬å¹³ä¸æ•ˆç‡çš„å¹³è¡¡æœ¯\">#</a> <strong>å››ã€å…¬å¹³ä¸æ•ˆç‡çš„å¹³è¡¡æœ¯</strong></h3>\n<p><strong>æ—¢ç„¶è°ƒåº¦å™¨çš„é¦–è¦åŸåˆ™æ˜¯å…¬å¹³ï¼Œé‚£ä¹ˆå®ƒé‡‡ç”¨äº†å“ªäº›ç­–ç•¥æ¥é—´æ¥ç¼“è§£é«˜æ˜‚çš„è·¨è¿›ç¨‹åˆ‡æ¢å¼€é”€å¯¹ç³»ç»Ÿæ•´ä½“ååé‡çš„å½±å“ï¼Œä»è€Œåœ¨å…¬å¹³ä¸æ•ˆç‡ä¹‹é—´å–å¾—å¹³è¡¡ï¼Ÿ</strong></p>\n<blockquote>\n<p>ä¸€ä¸ªç†æƒ³çš„è°ƒåº¦å™¨ä¸ä»…è¦å…¬å¹³ï¼Œè¿˜è¦é«˜æ•ˆã€‚å¦‚æœä¸ºäº†ç»å¯¹å…¬å¹³è€Œé¢‘ç¹åœ°è¿›è¡Œé«˜æˆæœ¬çš„è¿›ç¨‹åˆ‡æ¢ï¼Œç³»ç»Ÿæ€»æ€§èƒ½ä¼šä¸‹é™ã€‚å› æ­¤ï¼Œè°ƒåº¦å™¨åœ¨åšå®ˆå…¶å…¬å¹³åŸåˆ™çš„åŒæ—¶ï¼Œä¹Ÿå¿…é¡»å†…å»ºä¸€äº›æœºåˆ¶æ¥æ‘Šè–„å’Œä¼˜åŒ–è¿™äº›åˆ‡æ¢å¸¦æ¥çš„å¼€é”€ã€‚</p>\n</blockquote>\n<p>è°ƒåº¦å™¨åœ¨åšå®ˆâ€œå…¬å¹³â€ï¼ˆ<code>vruntime</code>ä¼˜å…ˆï¼‰è¿™ä¸€é¦–è¦åŸåˆ™çš„åŒæ—¶ï¼Œé€šè¿‡ä»¥ä¸‹å‡ ç§ç­–ç•¥æ¥å…¼é¡¾æ•ˆç‡ï¼Œç¼“è§£é«˜æ˜‚åˆ‡æ¢æˆæœ¬å¸¦æ¥çš„å½±å“ï¼š</p>\n<ol>\n<li><strong>æœ€å°è°ƒåº¦ç²’åº¦ (Minimum Granularity)</strong>ï¼šè°ƒåº¦å™¨ä¼šç¡®ä¿ä»»ä½•ä¸€ä¸ªä»»åŠ¡ä¸€æ—¦è¢«è°ƒåº¦ä¸ŠCPUï¼Œè‡³å°‘ä¼šè¿è¡Œä¸€ä¸ªæœ€å°çš„æ—¶é—´ï¼ˆä¾‹å¦‚1-2æ¯«ç§’ï¼‰ã€‚è¿™å°±é¿å…äº†å› ä»»åŠ¡è¿‡å¤šå¯¼è‡´æ—¶é—´ç‰‡è¢«æ— é™ç»†åˆ†ï¼Œä»è€Œä½¿å¾—CPUæŠŠå¤§é‡æ—¶é—´æµªè´¹åœ¨â€œåˆ‡æ¢â€è€Œéâ€œæ‰§è¡Œâ€ä¸Šçš„æƒ…å†µã€‚è¿™ä¸ªæœºåˆ¶ç›¸å½“äºä¸ºæ¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬è®¾ç½®äº†ä¸€ä¸ªâ€œä¿åº•â€çš„æœ‰æ•ˆå·¥ä½œæ—¶é—´ï¼Œä»è€Œæ‘Šè–„äº†å¼€é”€ã€‚</li>\n<li><strong>ç›®æ ‡å»¶è¿Ÿ (Target Latency)</strong>ï¼šCFSä¼šå°è¯•åœ¨ä¸€ä¸ªå¯é…ç½®çš„æ—¶é—´å‘¨æœŸï¼ˆç›®æ ‡å»¶è¿Ÿï¼Œå¦‚20æ¯«ç§’ï¼‰å†…ï¼Œè®©æ‰€æœ‰å¯è¿è¡Œçš„ä»»åŠ¡éƒ½è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚å®ƒä¼šæ ¹æ®å½“å‰å¯è¿è¡Œä»»åŠ¡çš„æ•°é‡æ¥åŠ¨æ€è®¡ç®—æ¯ä¸ªä»»åŠ¡åº”å¾—çš„æ—¶é—´ç‰‡ã€‚è¿™åœ¨ä»»åŠ¡æ•°é‡è¾ƒå°‘æ—¶ï¼Œå¯ä»¥æä¾›æ›´é•¿çš„æ‰§è¡Œæ—¶é—´ï¼Œå‡å°‘åˆ‡æ¢é¢‘ç‡ï¼›åœ¨ä»»åŠ¡æ•°é‡å¤šæ—¶ï¼Œåˆèƒ½ä¿è¯è¾ƒä½çš„å“åº”å»¶è¿Ÿã€‚</li>\n<li><strong>æ™ºèƒ½å”¤é†’ç­–ç•¥</strong>ï¼šå½“ä¸€ä¸ªä»»åŠ¡ä»ç¡çœ ä¸­è¢«å”¤é†’æ—¶ï¼Œè°ƒåº¦å™¨ä¼šæ™ºèƒ½åœ°å†³å®šå°†å®ƒæ”¾åˆ°å“ªä¸ªCPUçš„è¿è¡Œé˜Ÿåˆ—ä¸­ã€‚å®ƒé€šå¸¸ä¼šä¼˜å…ˆé€‰æ‹©ä»»åŠ¡ä¸Šæ¬¡è¿è¡Œçš„CPUï¼Œæˆ–è€…å”¤é†’å®ƒçš„ä»»åŠ¡æ‰€åœ¨çš„CPUï¼Œä»¥æœŸæé«˜ç¼“å­˜çš„åˆ©ç”¨ç‡ï¼Œè¿™ä¸ä¸‹ä¸€èŠ‚çš„CPUäº²å’Œæ€§ç´§å¯†ç›¸å…³ã€‚</li>\n</ol>\n<h3 id=\"äº”-ç¼“å­˜çš„ä»·å€¼cpuäº²å’Œæ€§\"><a class=\"anchor\" href=\"#äº”-ç¼“å­˜çš„ä»·å€¼cpuäº²å’Œæ€§\">#</a> <strong>äº”ã€ç¼“å­˜çš„ä»·å€¼ï¼šCPUäº²å’Œæ€§</strong></h3>\n<p><strong>CPUäº²å’Œæ€§ç­–ç•¥å…·ä½“æ˜¯å¦‚ä½•é€šè¿‡æå‡ç¼“å­˜å‘½ä¸­ç‡ï¼Œæ¥æ˜¾è‘—é™ä½ä»»åŠ¡å› ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆå°¤å…¶æ˜¯åœ¨CPUæ ¸å¿ƒé—´è¿ç§»ï¼‰è€Œå¯¼è‡´çš„æ€§èƒ½æŸå¤±çš„ï¼Ÿ</strong></p>\n<blockquote>\n<p>ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ä»£ä»·ä¸ä»…åœ¨äºåˆ‡æ¢æ“ä½œæœ¬èº«ï¼Œæ›´åœ¨äºå…¶å¯¹CPUé«˜é€Ÿç¼“å­˜çš„ç ´åæ€§å½±å“ã€‚è°ƒåº¦å™¨é€šè¿‡ä¸€ç§åä¸ºâ€œCPUäº²å’Œæ€§â€çš„ç­–ç•¥ï¼Œè¯•å›¾è®©ä»»åŠ¡â€œè®°ä½â€å®ƒä¸Šæ¬¡è¿è¡Œçš„æ ¸å¿ƒï¼Œä»è€Œæœ€å¤§åŒ–åœ°é‡ç”¨ç¼“å­˜ä¸­çš„â€œçƒ­â€æ•°æ®ï¼Œé¿å…æ˜‚è´µçš„å†…å­˜è®¿é—®ã€‚</p>\n</blockquote>\n<p><strong>CPUäº²å’Œæ€§ (Cache Affinity)</strong> å¹¶ä¸å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢æœ¬èº«çš„ç›´æ¥å¼€é”€ï¼ˆå¦‚ä¿å­˜å¯„å­˜å™¨ï¼‰ï¼Œä½†å®ƒèƒ½æå¤§åœ°ç¼“è§£åˆ‡æ¢å¸¦æ¥çš„<strong>é—´æ¥æ€§èƒ½æŸå¤±</strong>ï¼Œè¿™ä¸ªæŸå¤±ä¸»è¦æ¥æºäºCPUé«˜é€Ÿç¼“å­˜çš„å¤±æ•ˆã€‚</p>\n<p>å…¶å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p>\n<p>å½“ä¸€ä¸ªä»»åŠ¡åœ¨æŸä¸ªCPUæ ¸å¿ƒä¸Šè¿è¡Œæ—¶ï¼Œå®ƒæ‰€éœ€è¦çš„æ•°æ®å’ŒæŒ‡ä»¤ä¼šè¢«åŠ è½½åˆ°è¯¥æ ¸å¿ƒçš„ <code>L1</code>ã€<code>L2</code> ç”šè‡³ <code>L3</code> ç¼“å­˜ä¸­ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªç¼“å­˜æ˜¯<strong>çƒ­çš„ (hot)</strong>ã€‚ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®çš„é€Ÿåº¦æ¯”ä»ä¸»å†…å­˜è¯»å–è¦å¿«å‡ ä¸ªæ•°é‡çº§ã€‚</p>\n<p>å¦‚æœè¯¥ä»»åŠ¡è¢«åˆ‡æ¢å‡ºå»ï¼Œç¨ååˆè¢«è°ƒåº¦å™¨æ”¾å›<strong>åŒä¸€ä¸ªCPUæ ¸å¿ƒ</strong>ä¸Šè¿è¡Œï¼Œé‚£ä¹ˆå®ƒä¹‹å‰ç•™åœ¨ç¼“å­˜ä¸­çš„æ•°æ®æœ‰å¾ˆå¤§æ¦‚ç‡ä»ç„¶å­˜åœ¨ã€‚ä»»åŠ¡å¯ä»¥ç«‹åˆ»é«˜é€Ÿåœ°è®¿é—®è¿™äº›â€œçƒ­â€æ•°æ®ï¼Œè¿…é€Ÿæ¢å¤åˆ°æœ€ä½³è¿è¡Œæ€§èƒ½ã€‚</p>\n<p>ç›¸åï¼Œå¦‚æœè°ƒåº¦å™¨å°†è¿™ä¸ªä»»åŠ¡è¿ç§»åˆ°<strong>å¦ä¸€ä¸ªCPUæ ¸å¿ƒ</strong>ä¸Šï¼Œæ–°æ ¸å¿ƒçš„ç¼“å­˜å¯¹è¿™ä¸ªä»»åŠ¡æ¥è¯´æ˜¯<strong>å†·çš„ (cold)</strong>ã€‚ä»»åŠ¡å¿…é¡»é‡æ–°ä»ç¼“æ…¢çš„ä¸»å†…å­˜ä¸­åŠ è½½æ‰€æœ‰éœ€è¦çš„æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šé€ æˆæ˜¾è‘—çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>\n<p>å› æ­¤ï¼ŒCPUäº²å’Œæ€§ç­–ç•¥å°±æ˜¯<strong>è®©è°ƒåº¦å™¨â€œå€¾å‘äºâ€å°†ä¸€ä¸ªä»»åŠ¡è°ƒåº¦å›å®ƒä¸Šä¸€æ¬¡æ‰§è¡Œçš„é‚£ä¸ªCPUæ ¸å¿ƒä¸Š</strong>ã€‚é€šè¿‡ç»´æŒè¿™ç§â€œäº²å’Œæ€§â€ï¼Œè°ƒåº¦å™¨æœ€å¤§åŒ–äº†ç¼“å­˜çš„é‡ç”¨ç‡ï¼Œæ˜¾è‘—å‡å°‘äº†å› ä»»åŠ¡è¿ç§»å¸¦æ¥çš„æ€§èƒ½æƒ©ç½šï¼Œä»è€Œåœ¨å®è§‚ä¸Šæå‡äº†æ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ã€‚</p>\n",
            "tags": [
                "Linux",
                "ä»»åŠ¡è°ƒåº¦"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/24/SBC/%E8%B0%83%E8%AF%95USB%E6%91%84%E5%83%8F%E5%A4%B4/",
            "url": "https://haoruanwn.github.io/2025/08/24/SBC/%E8%B0%83%E8%AF%95USB%E6%91%84%E5%83%8F%E5%A4%B4/",
            "title": "è°ƒè¯•USBæ‘„åƒå¤´",
            "date_published": "2025-08-24T12:21:57.000Z",
            "content_html": "<h1 id=\"usbæ‘„åƒå¤´å¸¦éº¦å…‹é£å’Œæ‰¬å£°å™¨è°ƒè¯•\"><a class=\"anchor\" href=\"#usbæ‘„åƒå¤´å¸¦éº¦å…‹é£å’Œæ‰¬å£°å™¨è°ƒè¯•\">#</a> USBæ‘„åƒå¤´ï¼ˆå¸¦éº¦å…‹é£å’Œæ‰¬å£°å™¨ï¼‰è°ƒè¯•</h1>\n<p>å¸¦éº¦å…‹é£å’ªå¤´å’Œæ‰¬å£°å™¨çš„USBæ‘„åƒå¤´<br />\n<img loading=\"lazy\" src=\"https://markdownforyuanhao.oss-cn-hangzhou.aliyuncs.com/img1/20250824202654485.jpg\" alt=\"qq_pic_merged_1756038364912\" /></p>\n<h2 id=\"æ‘„åƒå¤´æ¢æµ‹\"><a class=\"anchor\" href=\"#æ‘„åƒå¤´æ¢æµ‹\">#</a> æ‘„åƒå¤´æ¢æµ‹</h2>\n<p>é¦–å…ˆï¼Œéœ€è¦ç¡®è®¤æ‘„åƒå¤´è®¾å¤‡æ˜¯å¦è¢«ç³»ç»Ÿæ­£ç¡®è¯†åˆ«ã€‚</p>\n<ol>\n<li>\n<p>åˆ—å‡ºUSBè®¾å¤‡</p>\n<p>ä½¿ç”¨lsusbå‘½ä»¤å¯ä»¥æŸ¥çœ‹æ‰€æœ‰è¿æ¥åˆ°ç³»ç»Ÿçš„USBè®¾å¤‡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">hao@lckfb-taishanpi:~$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> lsusb</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 001</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0002</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 002</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0003</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 3.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 003</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0002</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 004</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0001</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1.1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 004</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 002:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 349c:3307</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Generic</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> HD</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> video</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">  </span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 005</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0002</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 2.0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">Bus</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 006</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 001:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ID</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1d6b:0001</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Linux</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Foundation</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1.1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> root</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hub</span></span></code></pre>\n<p>å…¶ä¸­<code>HD video</code>å°±æ˜¯æˆ‘ä»¬çš„USBæ‘„åƒå¤´ã€‚</p>\n</li>\n<li>\n<p>æŸ¥çœ‹è§†é¢‘è®¾å¤‡èŠ‚ç‚¹</p>\n<p>ç³»ç»Ÿä¼šä¸ºè§†é¢‘è®¾å¤‡åˆ›å»ºç›¸åº”çš„è®¾å¤‡æ–‡ä»¶ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">hao@lckfb-taishanpi:~$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> ls</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/video</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\">*</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">/dev/video0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  /dev/video1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  /dev/video2</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  /dev/video5</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  /dev/video-dec1</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  /dev/video-dec2</span></span></code></pre>\n</li>\n<li>\n<p>ä½¿ç”¨v4l-utilså·¥å…·</p>\n<p>v4l-utilsæ˜¯ä¸€ä¸ªå¼ºå¤§çš„è§†é¢‘è®¾å¤‡è°ƒè¯•å·¥å…·é›†ï¼Œå¯ä»¥æä¾›æ›´è¯¦ç»†çš„è®¾å¤‡ä¿¡æ¯ã€‚å¦‚æœç³»ç»Ÿæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">sudo</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> apt-get</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> install</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v4l-utils</span></span></code></pre>\n<p>ä½¿ç”¨<code>v4l2-ctl</code>åˆ—å‡ºæ‰€æœ‰è§†é¢‘è®¾å¤‡åŠå…¶å…³è”çš„è®¾å¤‡èŠ‚ç‚¹ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">hao@lckfb-taishanpi:~$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v4l2-ctl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --list-devices</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rockchip,rk3328-vpu-dec</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">platform:fdea0000.video-codec</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/video2</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/media1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rockchip,rk3568-vepu-enc</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">platform:fdee0000.video-codec</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/video5</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/media3</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rockchip-rga</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">platform:rga</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/video0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">rkvdec2</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">platform:rkvdec2</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/video1</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/media0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">HD</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> video</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">  :</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> HD</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> video</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">   </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">usb-fd840000.usb-1</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">:</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/video3</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/video4</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        /dev/media2</span></span></code></pre>\n<p>ä»è¾“å‡ºä¸­å¯ä»¥çœ‹åˆ°ï¼Œåä¸º<code>HD video</code>çš„USBæ‘„åƒå¤´å…³è”äº†<code>/dev/video3</code>å’Œ<code>/dev/video4</code>ä¸¤ä¸ªè®¾å¤‡èŠ‚ç‚¹ã€‚</p>\n</li>\n</ol>\n<h2 id=\"æŸ¥çœ‹æ‘„åƒå¤´å‚æ•°\"><a class=\"anchor\" href=\"#æŸ¥çœ‹æ‘„åƒå¤´å‚æ•°\">#</a> æŸ¥çœ‹æ‘„åƒå¤´å‚æ•°</h2>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šå“ªä¸ªè®¾å¤‡èŠ‚ç‚¹æ˜¯æœ‰æ•ˆçš„ï¼Œå¹¶æŸ¥çœ‹å…¶æ”¯æŒçš„è§†é¢‘æ ¼å¼ã€åˆ†è¾¨ç‡å’Œå¸§ç‡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">hao@lckfb-taishanpi:~$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v4l2-ctl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -d</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/video4</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --list-formats-ext</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ioctl:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> VIDIOC_ENUM_FMT</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        Type:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Video</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Capture</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">hao@lckfb-taishanpi:~$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v4l2-ctl</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -d</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/video3</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> --list-formats-ext</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ioctl:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> VIDIOC_ENUM_FMT</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">        Type:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Video</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Capture</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">        </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">0</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">]</span><span style=\"color:#998418;--shiki-dark:#B8A965\">:</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\"> '</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">MJPG</span><span style=\"color:#B5695977;--shiki-dark:#C98A7D77\">'</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Motion-JPEG, </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">compressed</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                Size:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1280x720</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.067s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">15.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.100s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">10.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                Size:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 800x480</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.050s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">20.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.067s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">15.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                Size:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 640x480</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.040s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">25.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.067s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">15.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                Size:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 480x320</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.040s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">25.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.067s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">15.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                Size:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 480x854</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.040s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">25.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">                        Interval:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Discrete</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0.050s</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">(</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">20.000 </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">fps</span><span style=\"color:#2993a3;--shiki-dark:#5eaab5\">)</span></span></code></pre>\n<p>ç»“æœè¡¨æ˜ï¼Œ<code>/dev/video4</code>ä¸æ”¯æŒè§†é¢‘æ•è·æ ¼å¼ï¼Œè€Œ<code>/dev/video3</code>æ”¯æŒ<code>MJPG</code>æ ¼å¼ï¼Œå¹¶åˆ—å‡ºäº†å¤šç§åˆ†è¾¨ç‡å’Œå¸§ç‡çš„ç»„åˆã€‚å› æ­¤ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨<code>/dev/video3</code>ä½œä¸ºè§†é¢‘è¾“å…¥è®¾å¤‡ã€‚</p>\n<h2 id=\"ä½¿ç”¨æ‘„åƒå¤´\"><a class=\"anchor\" href=\"#ä½¿ç”¨æ‘„åƒå¤´\">#</a> ä½¿ç”¨æ‘„åƒå¤´</h2>\n<h3 id=\"æ‹ç…§\"><a class=\"anchor\" href=\"#æ‹ç…§\">#</a> æ‹ç…§</h3>\n<p>ä½¿ç”¨<code>ffmpeg</code>ä»æ‘„åƒå¤´æ•è·ä¸€å¸§å›¾åƒå¹¶ä¿å­˜ä¸ºå›¾ç‰‡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ffmpeg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v4l2</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -i</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/video3</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -ss</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 0.5</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -vframes</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -update</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\"> </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">&#x3C;</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">æ‚¨çš„æ–‡ä»¶å.jp</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">g</span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">></span></span></code></pre>\n<h3 id=\"å½•åˆ¶è§†é¢‘æ— å£°\"><a class=\"anchor\" href=\"#å½•åˆ¶è§†é¢‘æ— å£°\">#</a> å½•åˆ¶è§†é¢‘ï¼ˆæ— å£°ï¼‰</h3>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ffmpeg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v4l2</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -input_format</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> mjpeg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -s</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1280x720</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -r</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 15</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -i</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/video3</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -c:v</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> copy</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> output.mkv</span></span></code></pre>\n<p>åœ¨ç»ˆç«¯é‡ŒæŒ‰<code>Ctrl + C</code>åœæ­¢å½•åˆ¶ã€‚</p>\n<p><strong>å‚æ•°è¯´æ˜:</strong></p>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>-f v4l2</code></td>\n<td>å¼ºåˆ¶ä½¿ç”¨<code>v4l2</code>é©±åŠ¨ã€‚</td>\n</tr>\n<tr>\n<td><code>-input_format mjpeg</code></td>\n<td>æŒ‡å®šè¾“å…¥æµæ˜¯æ‘„åƒå¤´æ”¯æŒçš„<code>mjpeg</code>æ ¼å¼ã€‚</td>\n</tr>\n<tr>\n<td><code>-s 1280x720</code></td>\n<td>è®¾ç½®è§†é¢‘åˆ†è¾¨ç‡ã€‚</td>\n</tr>\n<tr>\n<td><code>-r 15</code></td>\n<td>è®¾ç½®è§†é¢‘å¸§ç‡ã€‚</td>\n</tr>\n<tr>\n<td><code>-i /dev/video3</code></td>\n<td>æŒ‡å®šè¾“å…¥è®¾å¤‡ã€‚</td>\n</tr>\n<tr>\n<td><code>-c:v copy</code></td>\n<td>ç›´æ¥å¤åˆ¶è§†é¢‘æµï¼Œä¸è¿›è¡Œé‡æ–°ç¼–ç ï¼Œä»¥é™ä½CPUæ¶ˆè€—ã€‚</td>\n</tr>\n<tr>\n<td><code>output.mkv</code></td>\n<td>è¾“å‡ºçš„è§†é¢‘æ–‡ä»¶åã€‚</td>\n</tr>\n</tbody>\n</table>\n<p><strong>æ³¨æ„</strong>: åˆ†è¾¨ç‡å’Œå¸§ç‡éœ€è¦é€‰æ‹©æ‘„åƒå¤´æ”¯æŒçš„ç»„åˆã€‚æ ¹æ®æ¢æµ‹ç»“æœï¼Œ<code>1280x720</code>åˆ†è¾¨ç‡ä¸‹æ”¯æŒ<code>15.000 fps</code>ã€‚</p>\n<h2 id=\"éŸ³é¢‘è®¾å¤‡æ¢æµ‹\"><a class=\"anchor\" href=\"#éŸ³é¢‘è®¾å¤‡æ¢æµ‹\">#</a> éŸ³é¢‘è®¾å¤‡æ¢æµ‹</h2>\n<p>ä½¿ç”¨<code>aplay</code>å’Œ<code>arecord</code>å‘½ä»¤æ¢æµ‹æ’­æ”¾å’Œå½•éŸ³è®¾å¤‡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">hao@lckfb-taishanpi:~$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> aplay</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -l</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">****</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> List of PLAYBACK Hardware Devices </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">****</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">card</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> video</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">HD </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">video],</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> USB</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Audio</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">USB </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Audio]</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevices:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1/1</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevice</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> #0: subdevice #0</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">card</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> RK809</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Analog </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">RK809],</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fe410000.i2s-rk817-hifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> rk817-hifi-0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">fe410000.i2s-rk817-hifi </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">rk817-hifi-0]</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevices:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0/1</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevice</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> #0: subdevice #0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">hao@lckfb-taishanpi:~$</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> arecord</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -l</span></span>\n<span class=\"line\"><span style=\"color:#AB5959;--shiki-dark:#CB7676\">****</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> List of CAPTURE Hardware Devices </span><span style=\"color:#AB5959;--shiki-dark:#CB7676\">****</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">card</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> video</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">HD </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">video],</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> USB</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> Audio</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">USB </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">Audio]</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevices:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1/1</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevice</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> #0: subdevice #0</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">card</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 1:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> RK809</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">Analog </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">RK809],</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> device</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> fe410000.i2s-rk817-hifi</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> rk817-hifi-0</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> </span><span style=\"color:rgba(255, 18, 18, 0.8);--shiki-dark:rgba(255, 18, 18, 0.8)\">[</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">fe410000.i2s-rk817-hifi </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">rk817-hifi-0]</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevices:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> 0/1</span></span>\n<span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">  Subdevice</span><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"> #0: subdevice #0</span></span></code></pre>\n<p><strong>è®¾å¤‡åˆ—è¡¨:</strong></p>\n<table>\n<thead>\n<tr>\n<th>è®¾å¤‡åç§°</th>\n<th>ç±»å‹</th>\n<th>å£°å¡å· (Card)</th>\n<th>è®¾å¤‡å· (Device)</th>\n<th>ALSAæ ‡è¯†</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>HD video</strong></td>\n<td>æ’­æ”¾ &amp; å½•åˆ¶</td>\n<td>0</td>\n<td>0</td>\n<td><code>hw:0,0</code></td>\n</tr>\n<tr>\n<td><strong>Analog RK809</strong></td>\n<td>æ’­æ”¾ &amp; å½•åˆ¶</td>\n<td>1</td>\n<td>0</td>\n<td><code>hw:1,0</code></td>\n</tr>\n</tbody>\n</table>\n<p>æˆ‘ä»¬çš„USBæ‘„åƒå¤´é›†æˆäº†éº¦å…‹é£å’Œæ‰¬å£°å™¨ï¼Œè¢«è¯†åˆ«ä¸ºå£°å¡0ã€‚</p>\n<h2 id=\"ä½¿ç”¨éŸ³é¢‘è®¾å¤‡\"><a class=\"anchor\" href=\"#ä½¿ç”¨éŸ³é¢‘è®¾å¤‡\">#</a> ä½¿ç”¨éŸ³é¢‘è®¾å¤‡</h2>\n<h3 id=\"å½•åˆ¶æœ‰å£°è§†é¢‘\"><a class=\"anchor\" href=\"#å½•åˆ¶æœ‰å£°è§†é¢‘\">#</a> å½•åˆ¶æœ‰å£°è§†é¢‘</h3>\n<p>ç»“åˆè§†é¢‘å’ŒéŸ³é¢‘è¾“å…¥ï¼Œå½•åˆ¶å¸¦æœ‰å£°éŸ³çš„è§†é¢‘ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ffmpeg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> v4l2</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -input_format</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> mjpeg</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -i</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /dev/video3</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -f</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> alsa</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -channels</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> 1</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -i</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hw:0,0</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -c:v</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> copy</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -c:a</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> aac</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> video_with_audio.mp4</span></span></code></pre>\n<p><strong>æ–°å¢éŸ³é¢‘å‚æ•°è¯´æ˜:</strong></p>\n<table>\n<thead>\n<tr>\n<th>å‚æ•°</th>\n<th>è¯´æ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>-f alsa</code></td>\n<td>å¼ºåˆ¶ä½¿ç”¨<code>alsa</code>ä½œä¸ºéŸ³é¢‘é©±åŠ¨ã€‚</td>\n</tr>\n<tr>\n<td><code>-channels 1</code></td>\n<td>è®¾ç½®éŸ³é¢‘é€šé“ä¸ºå•å£°é“ã€‚æŸäº›è®¾å¤‡å¯èƒ½ä¸æ”¯æŒåŒå£°é“å½•åˆ¶ã€‚</td>\n</tr>\n<tr>\n<td><code>-i hw:0,0</code></td>\n<td>æŒ‡å®šéŸ³é¢‘è¾“å…¥è®¾å¤‡ï¼ˆå£°å¡0ï¼Œè®¾å¤‡0ï¼‰ã€‚</td>\n</tr>\n<tr>\n<td><code>-c:a aac</code></td>\n<td>æŒ‡å®šéŸ³é¢‘ç¼–ç å™¨ä¸º<code>aac</code>ã€‚</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"æ’­æ”¾éŸ³é¢‘\"><a class=\"anchor\" href=\"#æ’­æ”¾éŸ³é¢‘\">#</a> æ’­æ”¾éŸ³é¢‘</h3>\n<ul>\n<li>\n<p><strong>ä½¿ç”¨<code>aplay</code>æ’­æ”¾<code>.wav</code>æ ¼å¼æ–‡ä»¶</strong></p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">aplay</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -D</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> hw:0,0</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> test_sound.wav</span></span></code></pre>\n<p><code>-D hw:0,0</code>æ˜ç¡®æŒ‡å®šä½¿ç”¨å£°å¡0ï¼Œè®¾å¤‡0è¿›è¡Œæ’­æ”¾ã€‚</p>\n</li>\n<li>\n<p>ä½¿ç”¨ffplayæ’­æ”¾å¤šç§æ ¼å¼éŸ³é¢‘</p>\n<p>ffplayå¯ä»¥æ’­æ”¾mp3ç­‰å¤šç§æ ¼å¼ï¼Œå¹¶ä¸”èƒ½è‡ªåŠ¨é€‰æ‹©é»˜è®¤å£°å¡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">ffplay</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> music.mp3</span></span></code></pre>\n</li>\n</ul>\n",
            "tags": [
                "SBC",
                "éŸ³è§†é¢‘"
            ]
        },
        {
            "id": "https://haoruanwn.github.io/2025/08/22/%E4%BD%BF%E7%94%A8Docker%E5%AE%89%E8%A3%85%E5%B9%B6%E8%BF%90%E8%A1%8CVivado%E5%BC%80%E5%8F%91%E5%A5%97%E4%BB%B6/",
            "url": "https://haoruanwn.github.io/2025/08/22/%E4%BD%BF%E7%94%A8Docker%E5%AE%89%E8%A3%85%E5%B9%B6%E8%BF%90%E8%A1%8CVivado%E5%BC%80%E5%8F%91%E5%A5%97%E4%BB%B6/",
            "title": "ä½¿ç”¨Dockerå®‰è£…å¹¶è¿è¡ŒVivadoå¼€å‘å¥—ä»¶",
            "date_published": "2025-08-21T16:06:40.000Z",
            "content_html": "<h1 id=\"ä½¿ç”¨-docker-å®‰è£…å¹¶è¿è¡Œ-vivado-å¼€å‘å¥—ä»¶\"><a class=\"anchor\" href=\"#ä½¿ç”¨-docker-å®‰è£…å¹¶è¿è¡Œ-vivado-å¼€å‘å¥—ä»¶\">#</a> ä½¿ç”¨ Docker å®‰è£…å¹¶è¿è¡Œ Vivado å¼€å‘å¥—ä»¶</h1>\n<p>æœ¬æ–‡æ¡£æ—¨åœ¨è®°å½•å¦‚ä½•é€šè¿‡ Docker æ¥å®‰è£…å’Œè¿è¡Œ Xilinx Vivado å¼€å‘å¥—ä»¶ï¼Œä»¥å®ç°å¼€å‘ç¯å¢ƒçš„éš”ç¦»ä¸å¿«é€Ÿéƒ¨ç½²ã€‚</p>\n<h2 id=\"1-ä¿®å¤è¯­è¨€ç¯å¢ƒé—®é¢˜çš„-dockerfile\"><a class=\"anchor\" href=\"#1-ä¿®å¤è¯­è¨€ç¯å¢ƒé—®é¢˜çš„-dockerfile\">#</a> 1. ä¿®å¤è¯­è¨€ç¯å¢ƒé—®é¢˜çš„ Dockerfile</h2>\n<p>åŸºç¡€é•œåƒ <code>gusanagy/xilinx-vivado:2024.1-x11</code> å­˜åœ¨è¯­è¨€ç¯å¢ƒï¼ˆlocaleï¼‰é…ç½®é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ† GUI å·¥å…·æ— æ³•æ­£å¸¸å¯åŠ¨ã€‚é€šè¿‡ä»¥ä¸‹ <code>Dockerfile</code> å¯ä»¥ä¿®å¤æ­¤é—®é¢˜ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-dockerfile\"><span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">FROM</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> gusanagy/xilinx-vivado:2024.1-x11</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åˆ‡æ¢åˆ° root ç”¨æˆ·ä»¥è·å¾—å®‰è£…æƒé™</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">USER</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> root</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># ä¿®å¤å‘½ä»¤ï¼Œæ¥å®‰è£…å¹¶ç”Ÿæˆè¯­è¨€ç¯å¢ƒ</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">RUN</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> apt-get update &#x26;&#x26; \\</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    apt-get install -y locales &#x26;&#x26; \\</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    sed -i -e </span><span style=\"color:#B56959;--shiki-dark:#C98A7D\">'s/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/'</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> /etc/locale.gen &#x26;&#x26; \\</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    dpkg-reconfigure --frontend=noninteractive locales</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># å°†ä¿®å¤å¥½çš„è¯­è¨€ç¯å¢ƒè®¾ç½®ä¸ºç³»ç»Ÿé»˜è®¤</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">ENV</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> LANG en_US.UTF-8</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">ENV</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> LANGUAGE en_US:en</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">ENV</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> LC_ALL en_US.UTF-8</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\"># åˆ‡æ¢å›é•œåƒé»˜è®¤çš„é root ç”¨æˆ·</span></span>\n<span class=\"line\"><span style=\"color:#1E754F;--shiki-dark:#4D9375\">USER</span><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\"> vivadouser</span></span></code></pre>\n<h2 id=\"2-é…ç½®-docker-composeyml\"><a class=\"anchor\" href=\"#2-é…ç½®-docker-composeyml\">#</a> 2. é…ç½® docker-compose.yml</h2>\n<p>ä¸ºäº†ç®€åŒ–å®¹å™¨çš„å¯åŠ¨å’Œç®¡ç†ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>docker-compose.yml</code> æ–‡ä»¶æ¥å®šä¹‰æœåŠ¡ã€‚è¯¥é…ç½®åŒ…å«äº† GUI è½¬å‘ã€å·¥ä½œç›®å½•æŒ‚è½½ä»¥åŠå¯é€‰çš„ç¡¬ä»¶è®¾å¤‡æ˜ å°„ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-yaml\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">services</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">  vivado</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    build</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#2F798A;--shiki-dark:#4C9A91\"> .</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    image</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> vivado-fixed:2024.1</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    container_name</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> vivado</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    stdin_open</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> true</span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    tty</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#1E754F;--shiki-dark:#4D9375\"> true</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    environment</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> DISPLAY=$&#123;DISPLAY&#125;</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # - XAUTHORITY=$&#123;XAUTHORITY&#125;</span></span>\n<span class=\"line\"><span style=\"color:#393A34;--shiki-dark:#DBD7CAEE\">    </span></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    volumes</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /tmp/.X11-unix:/tmp/.X11-unix</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">      # - ~/.Xauthority:/home/vivadouser/.Xauthority:ro</span></span>\n<span class=\"line\"><span style=\"color:#999999;--shiki-dark:#666666\">      -</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> .:/home/vivadouser/workspace</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">    working_dir</span><span style=\"color:#999999;--shiki-dark:#666666\">:</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /home/vivadouser/workspace</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # (å¯é€‰) æŒ‚è½½JTAGç­‰ç¡¬ä»¶è®¾å¤‡</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    # devices:</span></span>\n<span class=\"line\"><span style=\"color:#A0ADA0;--shiki-dark:#758575DD\">    #   - \"/dev/xilinx_jtag:/dev/xilinx_jtag\"</span></span></code></pre>\n<h2 id=\"3-æ„å»ºé•œåƒå¹¶å¯åŠ¨å®¹å™¨\"><a class=\"anchor\" href=\"#3-æ„å»ºé•œåƒå¹¶å¯åŠ¨å®¹å™¨\">#</a> 3. æ„å»ºé•œåƒå¹¶å¯åŠ¨å®¹å™¨</h2>\n<p>å°†ä¸Šè¿°ä¸¤ä¸ªæ–‡ä»¶æ”¾ç½®åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºé•œåƒå¹¶ä»¥å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼ˆ<code>-d</code>ï¼‰å¯åŠ¨å®¹å™¨ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> compose</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> up</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -d</span></span></code></pre>\n<p>å¯¹äºæ—§ç‰ˆæœ¬çš„ Dockerï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ <code>docker-compose</code>ï¼š</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker-compose</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> up</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -d</span></span></code></pre>\n<h2 id=\"4-å¯åŠ¨-vivado-å›¾å½¢åŒ–ç•Œé¢\"><a class=\"anchor\" href=\"#4-å¯åŠ¨-vivado-å›¾å½¢åŒ–ç•Œé¢\">#</a> 4. å¯åŠ¨ Vivado å›¾å½¢åŒ–ç•Œé¢</h2>\n<p>å®¹å™¨æˆåŠŸè¿è¡Œåï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›å…¥å®¹å™¨å¹¶å¯åŠ¨ Vivadoã€‚</p>\n<h3 id=\"41-è¿›å…¥å®¹å™¨å†…éƒ¨\"><a class=\"anchor\" href=\"#41-è¿›å…¥å®¹å™¨å†…éƒ¨\">#</a> 4.1 è¿›å…¥å®¹å™¨å†…éƒ¨</h3>\n<p>æ‰§è¡Œ <code>docker exec</code> å‘½ä»¤è¿›å…¥å®¹å™¨çš„äº¤äº’å¼ç»ˆç«¯ã€‚æ¨èä½¿ç”¨ <code>-u vivadouser</code> å‚æ•°ä»¥é root ç”¨æˆ·èº«ä»½ç™»å½•ï¼Œä»¥é¿å…æ½œåœ¨çš„æƒé™é—®é¢˜ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">docker</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> exec</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -it</span><span style=\"color:#A65E2B;--shiki-dark:#C99076\"> -u</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> vivadouser</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> vivado</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> bash</span></span></code></pre>\n<h3 id=\"42-åˆå§‹åŒ–ç¯å¢ƒå˜é‡\"><a class=\"anchor\" href=\"#42-åˆå§‹åŒ–ç¯å¢ƒå˜é‡\">#</a> 4.2 åˆå§‹åŒ–ç¯å¢ƒå˜é‡</h3>\n<p>åœ¨å®¹å™¨çš„ shell ä¸­ï¼Œé¦–å…ˆéœ€è¦ source Vivado çš„è®¾ç½®è„šæœ¬æ¥é…ç½®å¿…è¦çš„ç¯å¢ƒå˜é‡ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#998418;--shiki-dark:#B8A965\">source</span><span style=\"color:#B56959;--shiki-dark:#C98A7D\"> /home/vivadouser/Vivado/2024.1/settings64.sh</span></span></code></pre>\n<h3 id=\"43-å¯åŠ¨å›¾å½¢åŒ–ç•Œé¢\"><a class=\"anchor\" href=\"#43-å¯åŠ¨å›¾å½¢åŒ–ç•Œé¢\">#</a> 4.3 å¯åŠ¨å›¾å½¢åŒ–ç•Œé¢</h3>\n<p>æœ€åï¼Œæ‰§è¡Œ <code>vivado</code> å‘½ä»¤å¯åŠ¨ Vivado çš„å›¾å½¢åŒ–ç•Œé¢ã€‚ä½¿ç”¨ <code>&amp;</code> å°†å…¶ç½®äºåå°è¿è¡Œï¼Œä»¥å…é˜»å¡å½“å‰ç»ˆç«¯ã€‚</p>\n<pre class=\"shiki shiki-themes vitesse-light vitesse-dark\" style=\"background-color:#ffffff;--shiki-dark-bg:#121212;color:#393a34;--shiki-dark:#dbd7caee\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#59873A;--shiki-dark:#80A665\">vivado</span><span style=\"color:#999999;--shiki-dark:#666666\">&#x26;</span></span></code></pre>\n<h2 id=\"5-æ³¨æ„äº‹é¡¹\"><a class=\"anchor\" href=\"#5-æ³¨æ„äº‹é¡¹\">#</a> 5. æ³¨æ„äº‹é¡¹</h2>\n<ul>\n<li><strong>é•œåƒä½“ç§¯</strong>ï¼šåŸºç¡€é•œåƒ <code>gusanagy/xilinx-vivado</code> ä½“ç§¯æ¥è¿‘ 25GBï¼Œè¯·ç¡®ä¿æœ¬åœ°ç£ç›˜ç©ºé—´å……è¶³ä¸”ç½‘ç»œæ¡ä»¶è‰¯å¥½ï¼Œä»¥ä¾¿é¡ºåˆ©æ‹‰å–ã€‚</li>\n<li><strong>X11 è½¬å‘</strong>ï¼šåœ¨ Linux ä¸»æœºä¸Šï¼Œ<code>docker-compose.yml</code> ä¸­çš„ <code>DISPLAY</code> å’Œ <code>/tmp/.X11-unix</code> æŒ‚è½½é€šå¸¸è¶³ä»¥å®ç° GUI è½¬å‘ã€‚åœ¨ macOS æˆ– Windows (WSLg) ä¸Šï¼Œå¯èƒ½éœ€è¦é¢å¤–çš„ X Server é…ç½®ã€‚</li>\n</ul>\n",
            "tags": [
                "FPGA/ZYNQ",
                "Vivado"
            ]
        }
    ]
}